<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-18 20:27:37              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*
Copyright @ 2020 - 2025 GDPlayer v4.7.1. https://gdplayer.to | https://t.me/gdplayerto
*/
 namespace GDPlayer; class MPD extends \GDPlayer\StreamHelper { protected $ampQry = "\x26\141\155\x70\73"; protected $isMP4 = false; protected $isMPD = true; private $segSeparator = "\x2f\x73\x74\162\145\x61\x6d\55\x73\x65\x67\57"; private function replaceUrls(string $regex, string $mpdContent, string $separator = '') { goto yE0Se; OJUpm: $separator = $this->segSeparator; goto NzUOU; eeqPf: hibej: goto oX5sm; UeBFY: preg_match_all($regex, $mpdContent, $matches); goto mwU7r; PzgAo: return str_replace($search, $replace, $mpdContent); goto MG1hV; jw8mn: return $mpdContent; goto R2TQL; oX5sm: if (!(!empty($search) && !empty($replace))) { goto yAGYC; } goto PzgAo; NzUOU: CBwSl: goto UeBFY; mwU7r: $unique = array_filter(array_unique($matches[1])); goto EgKVQ; EgKVQ: foreach ($unique as $val) { goto X6Rmr; fo5KB: $replace[] = $this->bypassURL($val, $separator); goto Iu6ux; rV0ql: $url = $this->bypassURL($val, $separator); goto OcV59; Iu6ux: goto YVkRx; goto ziCCC; X6Rmr: $search[] = $val; goto RL1Aq; RL1Aq: if ($separator === "\57\155\160\x64\x2f") { goto t5xN0; } goto fo5KB; OcV59: $replace[] = $this->addTokenToUrl($url); goto F2B44; Ov6E0: zyGeg: goto ox3eQ; ziCCC: t5xN0: goto rV0ql; F2B44: YVkRx: goto Ov6E0; ox3eQ: } goto eeqPf; yE0Se: session_write_close(); goto vOt3h; MG1hV: yAGYC: goto jw8mn; vOt3h: if (!empty($separator)) { goto CBwSl; } goto OJUpm; R2TQL: } private function replaceUTCTimingUrls(string $regex, string $mpdContent) { goto ygaTM; sX61g: KhkgA: goto p0Xxd; ygaTM: session_write_close(); goto eIWsU; eIWsU: $utcTimingUrls = []; goto OVs3M; UwK1J: if (empty($utcTimingUrls)) { goto kOxZe; } goto U18Op; QadEN: return $mpdContent; goto Xf5bo; U18Op: foreach ($utcTimingUrls as $val) { goto WhTCQ; WhTCQ: $search[] = $val; goto AheFf; AheFf: $replace[] = $this->bypassURL($val, $this->segSeparator); goto S47nH; S47nH: VSKHZ: goto cMXKo; cMXKo: } goto u3ilE; b8gcU: if (empty($utcTiming[1])) { goto fo_TA; } goto crFTh; rgW5g: fo_TA: goto UwK1J; p0Xxd: kOxZe: goto QadEN; OQ5Ll: $utcTimingUrls = array_filter($utcTimingValues, fn($url) => validateUrl($url)); goto rgW5g; OVs3M: preg_match_all($regex, $mpdContent, $utcTiming); goto b8gcU; JOP00: if (!(!empty($search) && !empty($replace))) { goto KhkgA; } goto yju_w; u3ilE: zBc53: goto JOP00; yju_w: return str_replace($search, $replace, $mpdContent); goto sX61g; crFTh: $utcTimingValues = array_filter(array_unique($utcTiming[1])); goto OQ5Ll; Xf5bo: } private function replaceBaseURLs(string $mpdContent) { goto qNuwq; nVpKC: return str_replace($search, $replace, $mpdContent); goto XOXku; cAoTo: return $mpdContent; goto gB2LM; OxaDU: if (empty($urls)) { goto u5a0M; } goto TrTcQ; yG2RZ: if (!(!empty($search) && !empty($replace))) { goto uu40V; } goto nVpKC; td8Wo: OlQ9z: goto yG2RZ; qNuwq: session_write_close(); goto bP2fS; dHgIe: $urls = array_filter($unique, fn($url) => validateUrl($url) || $url === "\x2e\x2f" || $url === SLASH); goto OxaDU; bP2fS: preg_match_all("\x2f\74\102\x61\x73\x65\x55\x52\x4c\x5b\136\76\135\52\x3e\50\x5b\136\x22\x5d\53\51\x3c\x5c\57\x42\x61\163\145\125\x52\114\76\x2f", $mpdContent, $baseURL); goto yKjQ_; P3Rj5: foreach ($unique as $val) { goto Q9tw2; F2_x5: $replace[] = $this->bypassURL($val, $this->segSeparator); goto HA713; Q9tw2: $search[] = $val; goto F2_x5; HA713: zpRIR: goto lNU2T; lNU2T: } goto td8Wo; c5MK0: u5a0M: goto P3Rj5; yKjQ_: $unique = array_filter(array_unique($baseURL[1])); goto dHgIe; TrTcQ: $unique = $urls; goto c5MK0; XOXku: uu40V: goto cAoTo; gB2LM: } private function replaceBasename(string $regex, string $mpdContent) { goto F6FB9; gLvX5: E9BDL: goto A2ERY; euY21: return $mpdContent; goto lbfGu; F6FB9: session_write_close(); goto pW4C3; q8Mvt: return str_replace($search, $replace, $mpdContent); goto jsa8p; A2ERY: if (!(!empty($search) && !empty($replace))) { goto o338F; } goto q8Mvt; Zv5HB: $unique = array_filter(array_unique($matches[1])); goto ZH5O8; pW4C3: preg_match_all($regex, $mpdContent, $matches); goto Zv5HB; ZH5O8: foreach ($unique as $val) { goto V_j09; eEL_2: $extension = pathinfo($val, PATHINFO_EXTENSION); goto IpaBu; J9y9L: KMvcs: goto j646P; vAWmU: $replace[] = $val; goto YNfMP; Jrtuo: if (is_bool($originalKey)) { goto Yvlqz; } goto mnLbM; Rsq3M: $newPath = strtr($val, [$basename => $newBasename]); goto YmFUX; RvAPf: Yvlqz: goto Vv304; YNfMP: goto mRYOO; goto Co_T0; V_j09: $search[] = $val; goto eEL_2; Vl0Ua: $originalKey = array_search("\x2e" . $extension, $this->binExtensions["\157\162\x69\x67\x69\x6e\141\154"]); goto Jrtuo; Vv304: mRYOO: goto J9y9L; IpaBu: if (!empty($extension)) { goto VzBA3; } goto vAWmU; q3KFh: $newBasename = $extension . "\x5f\x67\170\x5f" . pathinfo($val, PATHINFO_FILENAME) . $customExtension; goto Rsq3M; YmFUX: $replace[] = $newPath; goto RvAPf; Co_T0: VzBA3: goto DNVXV; DNVXV: $basename = basename($val); goto Vl0Ua; mnLbM: $customExtension = $this->binExtensions["\x63\x75\163\x74\x6f\155"][$originalKey]; goto q3KFh; j646P: } goto gLvX5; jsa8p: o338F: goto euY21; lbfGu: } private function parseMPD(string $mpdContent = '') { goto DUV2u; EjTQG: if (!$initIndex) { goto AFh5X; } goto z5w3d; kDVxd: $content = $this->replaceBasename($mediaRegex, $content); goto E0nFe; wggRa: Q9nxS: goto ap6Qq; ap6Qq: $content = $this->replaceBaseURLs($content); goto w1bVj; o877j: AnpkJ: goto vHjWx; Mj50v: $content = $this->replaceUrls($initRegex, $content); goto wG04n; ME53H: $initIndex = strpos($mpdContent, "\151\156\151\x74\151\141\x6c\x69\x7a\x61\x74\151\x6f\156\x3d\42"); goto EjTQG; MS9v9: goto MuNZz; goto c04_2; iobqx: $content = $this->replaceUrls("\x2f\106\102\120\x72\145\x64\x69\143\164\145\x64\115\x65\x64\x69\141\x3d\x22\50\133\136\x22\x5d\x2b\x29\42\x2f", $content); goto S4vSm; vHjWx: $content = $this->replaceUrls($initRegex, $content); goto OKtlT; DwjcR: if ($mediaIndex < $baseUrlIndex) { goto Qa_aJ; } goto kDVxd; R1tFw: if (!$mediaIndex) { goto Q9nxS; } goto DwjcR; nFEiA: if ($baseUrlIndex !== false) { goto cMg7O; } goto Mj50v; DvxeM: Qa_aJ: goto SUtF7; oo_Io: $content = $mpdContent; goto fMg0J; U72DF: $content = $this->replaceUTCTimingUrls("\x2f\166\x61\154\x75\145\75\42\50\133\136\42\135\x2b\51\x22\57", $content); goto EUyAG; DUV2u: session_write_close(); goto oo_Io; z5w3d: if ($initIndex < $baseUrlIndex) { goto AnpkJ; } goto Sp8Hg; EUyAG: return $content; goto LsM_5; vru52: $content = $this->replaceUrls("\57\x78\x6c\x69\156\x6b\x5c\x3a\x68\x72\x65\x66\x3d\42\x28\133\x5e\x22\135\53\51\x22\x2f", $content, "\57\155\160\x64\x2f"); goto EaABf; qY_Iq: $content = $this->replaceUrls("\x2f\162\x65\160\157\162\x74\x69\x6e\147\125\162\x6c\75\42\x28\133\x5e\42\135\x2b\51\42\57", $content); goto U72DF; AE4OM: $baseUrlIndex = strpos($mpdContent, "\x3c\x42\x61\x73\x65\125\x52\114"); goto nFEiA; wG04n: $content = $this->replaceUrls($mediaRegex, $content); goto iobqx; glfkb: phwEJ: goto wggRa; SUtF7: $content = $this->replaceUrls($mediaRegex, $content); goto glfkb; Y8FvG: $mediaRegex = "\57\155\145\144\x69\x61\75\42\x28\x5b\x5e\42\x5d\53\x29\x22\57"; goto AE4OM; w1bVj: MuNZz: goto vru52; OKtlT: WKeMv: goto YWP7H; Sp8Hg: $content = $this->replaceBasename($initRegex, $content); goto FrZlb; EaABf: $content = $this->replaceUrls("\57\155\x6f\x72\x65\111\x6e\x66\157\162\155\141\x74\151\157\x6e\x55\122\x4c\75\42\50\133\136\42\x5d\53\x29\x22\x2f", $content, "\57\162\x65\x64\x69\162\x65\143\x74\57"); goto qY_Iq; fMg0J: $initRegex = "\x2f\x69\x6e\151\x74\x69\141\154\x69\172\x61\164\x69\157\156\x3d\42\50\x5b\x5e\42\x5d\53\x29\42\x2f"; goto Y8FvG; FrZlb: goto WKeMv; goto o877j; c04_2: cMg7O: goto ME53H; YWP7H: AFh5X: goto Hgoh5; Hgoh5: $mediaIndex = strpos($mpdContent, "\x6d\x65\x64\x69\141\75\x22"); goto R1tFw; E0nFe: goto phwEJ; goto DvxeM; S4vSm: $content = $this->replaceUrls("\57\x73\157\x75\x72\x63\x65\125\x52\114\75\42\50\133\136\x22\x5d\53\x29\42\57", $content); goto MS9v9; LsM_5: } private function repairMPD(string $mpdContent) { goto l5kRv; LZ0ve: TCmei: goto tkuzT; OfOgQ: return sprintf($newFormat, $duration, $mpdContent); goto LZ0ve; qtc5w: $newFormat = "\x3c\x3f\170\x6d\154\x20\166\145\162\x73\x69\x6f\x6e\x3d\42\61\x2e\60\x22\40\x65\156\x63\157\144\151\156\147\75\x22\125\x54\x46\55\x38\x22\x3f\76\74\x4d\120\104\x20\170\x6d\x6c\x6e\x73\x3d\42\x75\162\x6e\72\x6d\x70\x65\147\72\144\141\163\x68\72\163\x63\x68\145\155\x61\72\155\x70\x64\72\x32\60\x31\61\42\40\x70\x72\157\x66\x69\154\x65\x73\75\42\x75\162\156\x3a\x6d\x70\x65\147\x3a\x64\x61\163\x68\x3a\x70\x72\x6f\146\x69\x6c\x65\x3a\151\x73\x6f\146\x66\55\x6c\151\166\145\x3a\62\60\61\61\x22\40\164\171\x70\x65\x3d\42\x73\164\141\164\x69\143\42\x20\x6d\145\x64\x69\141\x50\162\x65\x73\x65\156\x74\x61\x74\151\157\156\x44\165\162\x61\164\x69\157\156\x3d\x22\x25\x73\42\x3e\45\x73\x3c\x2f\115\x50\x44\76"; goto kWaFP; kWaFP: if (!(strpos($mpdContent, "\74\x4d\120\x44") === false && strpos($mpdContent, "\x64\165\x72\141\x74\151\157\156\75\42") !== false)) { goto TCmei; } goto y8pps; l5kRv: session_write_close(); goto qtc5w; y8pps: $duration = getStringBetween($mpdContent, "\x64\x75\162\x61\x74\151\x6f\x6e\75\42", "\x22"); goto OfOgQ; tkuzT: return $mpdContent; goto OQG6n; OQG6n: } public function playlistStream() { goto GhoW9; Jfl3P: enIQY: goto yPqSU; ygcrs: $content = strtr($content, ["\74\115\120\x44" => "\x3c\x21\55\55\x20{$this->copyrightText}\x20\55\55\x3e\12\x3c\x4d\120\x44"]); goto F2X1R; kNuhi: $this->isLive = stripos($content, "\164\171\160\145\x3d\42\x64\x79\x6e\141\x6d\151\x63\x22") !== false; goto sKryj; mY3he: $content = ''; goto dLHCn; xO42w: qziIT: goto QmdJL; kpa3b: $this->responseHeaders[] = "\x45\164\x61\147\x3a\40" . md5_file($this->cacheFile); goto vOQ5f; V_p2i: http_response_code(400); goto MT9_u; W29sf: http_response_code(404); goto OQLgt; Cu8yA: $content = $this->repairMPD($content); goto k7gtT; hCG9A: k2gUe: goto kpa3b; xswCW: goto E5XGy; goto hCG9A; F2X1R: gS3f2: goto tSNi_; sKryj: if (!(strpos($content, $this->copyrightText) === false)) { goto gS3f2; } goto ygcrs; ZDCo8: if (!($xml === false)) { goto a0_ES; } goto V_p2i; QmdJL: $content = $this->parseMPD($content); goto uWkEO; dbTq9: if ($cache) { goto k2gUe; } goto fKXTL; ifMrj: E5XGy: goto Cu8yA; tfCj1: a0_ES: goto cZlwu; OQLgt: exit; goto i82tg; yPqSU: $this->playlistParser($content); goto uKtgQ; vOQ5f: $this->responseHeaders[] = "\x58\55\103\x61\x63\150\145\x3a\40\x48\x49\x54"; goto Aar3T; cZlwu: $this->contentType = "\x61\x70\x70\154\151\x63\x61\x74\x69\157\x6e\57\x64\141\x73\x68\x2b\170\x6d\x6c"; goto kNuhi; i82tg: goto JoDKp; goto xO42w; tSNi_: if (!(!$this->isLive && !empty($content))) { goto enIQY; } goto Rt1fF; fKXTL: $content = $this->getMasterContent(); goto eUQTZ; eUQTZ: if ($content) { goto qziIT; } goto W29sf; MT9_u: exit; goto tfCj1; uWkEO: JoDKp: goto xswCW; dLHCn: $cache = getFileContent($this->cacheFile, "\162"); goto dbTq9; Aar3T: $content = $cache; goto ifMrj; k7gtT: $xml = @simplexml_load_string($content); goto ZDCo8; GhoW9: session_write_close(); goto mY3he; Rt1fF: createFile($this->cacheFile, $content, "\x77", true); goto Jfl3P; uKtgQ: } }
