<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-18 20:27:33              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*
Copyright @ 2020 - 2025 GDPlayer v4.7.1. https://gdplayer.to | https://t.me/gdplayerto
*/
 namespace GDPlayer\Ajax; use GDPlayer\GoogleDriveRestAPI; use GDPlayer\Model\{GDriveAuth, GDriveQueue as mGDriveQueue}; class GDriveQueue extends \GDPlayer\Ajax { protected GoogleDriveRestAPI $gdAPI; protected GDriveAuth $gdAuth; protected mGDriveQueue $gdQueue; protected $listColumns = ["\151\x64", "\x67\x64\x72\x69\166\145\137\x69\x64", "\x69\x64"]; protected const MESSAGE_DELETE_SUCCESS = "\x54\150\x65\x20\x62\x61\143\x6b\165\x70\x20\x71\165\145\x75\x65\40\150\141\163\x20\x62\x65\145\156\x20\x73\165\x63\x63\x65\x73\x73\x66\165\154\154\171\x20\x64\x65\154\x65\164\145\144"; protected const MESSAGE_DELETE_FAIL = "\124\150\145\x20\x62\x61\x63\153\165\x70\x20\x71\165\x65\165\x65\x20\x66\141\x69\154\145\x64\x20\164\x6f\40\144\x65\154\145\x74\145"; protected const MESSAGE_GDRIVE_COPY_FAIL = "\x43\x61\156\156\x6f\164\x20\143\157\x70\171\x20\x74\150\145\x20\146\x69\x6c\x65\41\x20\124\162\171\x20\x61\147\141\x69\x6e\40\154\x61\164\x65\162"; public function __construct() { goto cbHrL; cbHrL: session_write_close(); goto nnIN8; JrfF6: $this->loadData(); goto Lisk7; Lisk7: $this->gdAPI = new GoogleDriveRestAPI(); goto pZADV; tJEkd: $this->gdQueue = mGDriveQueue::getInstance(); goto C76Bk; LHYnv: $this->files = $_FILES; goto JrfF6; nnIN8: $this->data = array_merge($_POST, $_GET); goto LHYnv; pZADV: $this->gdAuth = GDriveAuth::getInstance(); goto tJEkd; C76Bk: } public function response() { session_write_close(); return $this->defaultResponse($this, true); } protected function copy() { goto V6Q3_; Hd6x9: $file = false; goto S3r_5; xcYii: djKOq: goto sHCyo; XSqGh: $result = $this->toJson(1, '', array("\154\x69\156\x6b" => "\x68\x74\x74\160\163\x3a\57\x2f\144\x72\151\x76\145\56\147\157\x6f\147\154\x65\56\143\x6f\x6d\x2f\146\x69\154\x65\x2f\144\x2f" . $file["\151\144"] . "\57\166\151\145\x77", "\151\144" => $file["\151\x64"])); goto xcYii; e3p2K: Nugec: goto oOWHX; nN0ZR: if (empty($this->data["\151\144"])) { goto V0VWc; } goto Hd6x9; d54Gb: return $result; goto dHwj_; sHCyo: V0VWc: goto d54Gb; qS4NT: if (empty($file["\151\x64"])) { goto djKOq; } goto XSqGh; S3r_5: $this->gdAuth->setCriteria("\163\x74\141\x74\165\x73", 1); goto bGqUw; bGqUw: $list = $this->gdAuth->get(["\x65\155\141\x69\x6c"]); goto V2Ccl; s1fMz: $result = $this->toJson(0, self::MESSAGE_GDRIVE_COPY_FAIL); goto nN0ZR; oOWHX: TRiXw: goto qS4NT; s4M4O: foreach ($list as $dt) { goto zDsb0; zDsb0: $this->gdAPI->setEmail($dt["\145\155\141\x69\154"]); goto X6Xxy; K2sB7: $this->gdAPI->encryptTitle(true); goto LaRj7; gaVdk: goto Nugec; goto bZAlp; bZAlp: aDl_L: goto s5V8W; Xd3s8: if (!$file) { goto aDl_L; } goto gaVdk; s5V8W: aRzJM: goto x8uNH; LaRj7: $file = $this->gdAPI->copy(); goto Xd3s8; X6Xxy: $this->gdAPI->setFileID($this->data["\151\144"]); goto K2sB7; x8uNH: } goto e3p2K; V2Ccl: if (!$list) { goto TRiXw; } goto s4M4O; V6Q3_: session_write_close(); goto s1fMz; dHwj_: } protected function delete() { goto Q18fs; X0zU5: xDLun: goto W8Ubn; Q18fs: session_write_close(); goto KGJcY; A3_iK: return $result; goto deS3Z; W8Ubn: gxiYi: goto A3_iK; CIcid: if (!$deleted) { goto xDLun; } goto TzKQZ; TzKQZ: $result = $this->toJson(1, self::MESSAGE_DELETE_SUCCESS); goto X0zU5; KGJcY: $result = $this->toJson(0, self::MESSAGE_DELETE_FAIL); goto kNUK6; kNUK6: if (empty($this->data["\x69\144"])) { goto gxiYi; } goto RwcUq; RwcUq: $this->gdQueue->setCriteria("\151\x64", $this->data["\x69\144"]); goto qxn9F; qxn9F: $deleted = $this->gdQueue->delete(); goto CIcid; deS3Z: } protected function createSearchQuery(string $search = '') { goto NYFCE; qTvBB: $search = "\45" . $search . "\45"; goto XHlhN; NYFCE: session_write_close(); goto e2SOZ; XHlhN: $this->gdQueue->setCriteria("\x67\144\162\151\x76\x65\x5f\151\144", $search, "\114\x49\113\105"); goto aPmn0; aPmn0: olhq7: goto GxqSs; e2SOZ: if (empty($search)) { goto olhq7; } goto qTvBB; GxqSs: } public function list() { goto qfLg4; gAe6H: $recordsTotal = $this->gdQueue->getTotalRows(); goto IY7PX; KXw3t: P3riv: goto gAe6H; quGxw: if ($this->isAdmin) { goto enct2; } goto Ono7z; F3r0G: $list = $this->gdQueue->get($this->listColumns); goto LwhHI; Ono7z: return $this->createJsonResponse($this->toDataTablesJson()); goto uQkjJ; OYxXq: $this->gdQueue->setLimit($qry["\163\x74\141\162\164"], $qry["\154\x65\x6e\147\164\150"]); goto Z6d9X; l6Qxh: $this->createSearchQuery($qry["\x73\145\141\162\x63\x68"]); goto OYxXq; qfLg4: session_write_close(); goto quGxw; KI4Ol: foreach ($list as $dt) { goto JQUL_; L3J5B: $newData["\x44\124\x5f\122\x6f\167\x49\x64"] = $dt["\x69\144"]; goto YLSF1; YLSF1: $data[] = $newData; goto F0f5B; JQUL_: $newData = $dt; goto L3J5B; F0f5B: WAIRh: goto qNm3L; qNm3L: } goto Ec1Fk; IY7PX: $this->createSearchQuery($qry["\163\145\x61\162\x63\x68"]); goto jF90D; LwhHI: if (!$list) { goto P3riv; } goto KI4Ol; cWxdY: $data = []; goto l6Qxh; lmrzu: return $this->createJsonResponse($this->toDataTablesJson(intval($qry["\x64\x72\x61\167"]), $data, $recordsTotal, $recordsFiltered)); goto i5D01; jF90D: $recordsFiltered = $this->gdQueue->getNumRows(); goto lmrzu; Ec1Fk: SsSGl: goto KXw3t; fzu4C: $qry = $this->extractDatatablesQry($this->data, $this->listColumns, "\x69\144"); goto cWxdY; uQkjJ: enct2: goto fzu4C; Z6d9X: $this->gdQueue->setOrderBy($qry["\x6f\162\x64\145\162\102\171"], $qry["\157\x72\144\x65\x72\104\151\162"]); goto F3r0G; i5D01: } }
