<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-18 20:27:33              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*
Copyright @ 2020 - 2025 GDPlayer v4.7.1. https://gdplayer.to | https://t.me/gdplayerto
*/
 namespace GDPlayer\Ajax; use GDPlayer\{Config, Helper, Hosting}; use GDPlayer\Model\{Subtitle, SubtitleManager, Video as mVideos, VideoAlternative, ViewVideo}; class Video extends \GDPlayer\Ajax { protected Hosting $hosting; protected Subtitle $sub; protected SubtitleManager $subMan; protected mVideos $videos; protected VideoAlternative $vAlt; protected ViewVideo $vwVideo; protected $primaryKey = "\151\x64"; protected $listColumns = []; protected const MESSAGE_SUBTITLE_DELETE_SUCCESS = "\x54\x68\x65\40\x73\165\142\164\151\x74\x6c\x65\x20\150\x61\x73\40\x62\145\145\156\40\163\165\143\143\145\163\x73\x66\165\x6c\154\171\x20\x72\x65\x6d\157\166\145\144"; protected const MESSAGE_SUBTITLE_DELETE_FAIL = "\124\x68\145\x20\163\165\x62\x74\x69\164\x6c\145\x20\146\x61\x69\x6c\145\144\x20\164\157\40\x72\145\155\x6f\x76\145"; protected const MESSAGE_SUBTITLE_NOT_FOUND = "\124\x68\x65\40\x73\165\142\x74\x69\164\154\x65\x20\x77\x61\163\x20\x6e\157\164\x20\x66\x6f\165\x6e\x64"; protected const MESSAGE_SUBTITLE_URL_INVALID = "\124\150\145\x20\163\165\x62\164\x69\164\x6c\x65\x20\x55\x52\114\x20\x69\x73\40\x69\156\x76\x61\x6c\x69\x64"; protected const MESSAGE_SUBTITLE_UPDATE_SUCCESS = "\124\150\145\40\163\165\x62\x74\151\164\154\x65\40\146\151\x6c\145\40\x68\x61\x73\40\142\x65\x65\x6e\x20\x73\165\143\143\145\x73\163\x66\165\154\154\171\40\x75\160\144\x61\x74\x65\x64"; protected const MESSAGE_SUBTITLE_UPDATE_FAIL = "\x54\150\145\40\x73\x75\x62\x74\151\164\154\x65\40\146\151\x6c\x65\40\x66\141\151\154\x65\144\x20\164\157\x20\x75\x70\144\x61\164\145"; protected const MESSAGE_SUBTITLE_UPLOAD_SUCCESS = "\x54\x68\145\x20\163\x75\x62\x74\151\x74\x6c\x65\40\x66\x69\x6c\x65\40\x68\x61\x73\x20\x62\145\x65\156\40\163\165\143\x63\x65\x73\163\146\x75\154\x6c\x79\40\165\x70\154\157\141\144\145\x64"; protected const MESSAGE_SUBTITLE_UPLOAD_FAIL = "\x54\x68\x65\x20\x73\x75\x62\164\151\164\x6c\x65\40\146\x69\154\x65\x20\x66\x61\x69\154\145\144\40\164\x6f\40\x75\x70\x6c\x6f\141\x64"; protected const MESSAGE_VIDEO_NOT_FOUND = "\x54\x68\145\x20\166\x69\x64\145\x6f\x20\x77\141\x73\x20\x6e\x6f\164\x20\146\x6f\x75\156\x64"; protected const MESSAGE_VIDEO_UPDATE_SUCCESS = "\x54\150\x65\40\166\151\144\x65\157\x20\150\141\163\40\142\x65\x65\156\x20\x73\165\x63\x63\145\163\x73\x66\165\154\154\x79\40\165\x70\144\141\x74\145\144"; protected const MESSAGE_VIDEO_UPDATE_FAIL = "\124\x68\145\40\166\x69\144\145\x6f\40\x66\x61\x69\154\x65\144\x20\164\x6f\x20\165\x70\144\141\x74\x65"; protected const MESSAGE_VIDEO_SAVE_SUCCESS = "\x54\150\145\40\156\145\167\40\166\x69\144\145\x6f\x20\150\141\x73\40\142\145\145\156\x20\x73\x61\166\x65\x64\x20\163\165\x63\143\145\163\x73\x66\x75\x6c\154\171"; protected const MESSAGE_VIDEO_SAVE_FAIL = "\x54\150\x65\40\156\x65\167\40\166\x69\144\x65\x6f\x20\x66\x61\x69\154\145\144\x20\x74\157\x20\x73\141\166\x65"; protected const MESSAGE_VIDEO_DELETE_SUCCESS = "\x54\150\x65\x20\166\151\x64\x65\x6f\x20\x68\141\x73\x20\142\x65\145\156\x20\163\x75\143\x63\145\x73\163\x66\x75\x6c\x6c\x79\x20\x64\145\x6c\x65\164\145\144"; protected const MESSAGE_VIDEO_DELETE_FAIL = "\x54\x68\x65\x20\166\151\x64\145\157\40\x66\x61\151\x6c\145\x64\x20\164\157\40\x64\x65\154\x65\164\145"; protected const MESSAGE_VIDEO_RENAME_EMPTY = "\124\150\x65\40\166\151\144\x65\157\x20\x74\151\164\154\145\x20\x69\163\40\151\156\166\141\x6c\151\x64"; protected const MESSAGE_POSTER_REMOVE_SUCCESS = "\124\150\x65\40\x70\x6f\x73\164\145\162\40\x68\x61\163\40\142\x65\x65\x6e\x20\x73\x75\x63\x63\145\x73\163\x66\x75\154\154\171\40\162\145\155\x6f\x76\145\144"; protected const MESSAGE_POSTER_REMOVE_FAIL = "\124\x68\145\40\x70\x6f\x73\x74\145\162\x20\146\x61\151\154\145\144\40\164\157\x20\162\x65\155\157\x76\145"; public function __construct() { goto oRwkl; ZJclj: $this->data = array_merge($_POST, $_GET); goto ESGIo; hjV79: $this->vAlt = VideoAlternative::getInstance(); goto sWtkQ; j4OMW: $this->videos = mVideos::getInstance(); goto hjV79; alOlA: $this->subMan = SubtitleManager::getInstance(); goto j4OMW; Aq73J: $this->sub = Subtitle::getInstance(); goto alOlA; TiItX: $this->hosting = new Hosting(); goto Aq73J; ESGIo: $this->files = $_FILES; goto Ad8Nz; sWtkQ: $this->vwVideo = ViewVideo::getInstance(); goto a2LhT; oRwkl: session_write_close(); goto ZJclj; a2LhT: $this->listColumns = [$this->primaryKey, "\164\151\164\154\145", "\150\x6f\163\x74", "\163\154\165\147", "\163\x74\141\x74\x75\x73", "\x64\155\143\141", "\151\x64", "\x76\x69\x65\x77\x73", "\x6e\141\155\145", "\x61\144\x64\x65\x64", "\165\x70\144\141\164\145\144", "\x70\x6f\x73\164\145\x72", "\x68\x6f\163\x74\x5f\151\x64", $this->primaryKey]; goto L529m; Ad8Nz: $this->loadData(); goto TiItX; L529m: } private function createDataList(array $list = []) { goto GQH1E; pncHJ: $iframe = strtr(Config::get("\151\x66\x72\x61\x6d\145\137\143\157\144\x65") ?? "\x3c\x69\x66\162\141\x6d\x65\40\x66\162\141\x6d\x65\142\x6f\x72\144\x65\162\75\x22\x30\x22\40\167\151\144\164\x68\75\42\x36\x34\60\x22\40\150\x65\151\147\x68\164\x3d\42\63\62\x30\42\40\x73\x72\143\x3d\x22\x25\x73\x22\x20\141\154\x6c\157\x77\146\x75\x6c\x6c\x73\143\162\145\x65\156\x3e\x3c\57\x69\x66\162\x61\x6d\145\x3e", ["\x7b\145\x6d\x62\x65\144\137\x75\162\154\175" => "\x25\x73"]); goto nPHTU; GW9r_: yGuEy: goto UqvDH; DDqP3: $e = BASE_URL . (Config::get("\163\x6c\165\147\137\145\x6d\x62\145\144") ?? "\x65"); goto OmH0K; HFdXH: return []; goto zYqQ9; JPoqy: if (!empty($list)) { goto Ej4iX; } goto HFdXH; UqvDH: return $data; goto Iz3DX; OmH0K: $d = BASE_URL . (Config::get("\163\x6c\x75\147\x5f\144\x6f\167\156\154\157\141\x64") ?? "\x64"); goto pncHJ; zYqQ9: Ej4iX: goto nSUWw; nPHTU: foreach ($list as $dt) { goto b7PuR; b7PuR: $newData = $dt; goto U3N_l; QT9vS: $newData["\163\154\165\x67"] = $slug; goto D7KlF; ljf4P: $newData["\x61\x63\164\x69\157\x6e\x73"]["\144\157\167\x6e\x6c\157\x61\x64"] = $d . SLASH . $slug; goto QMbXe; D7KlF: zVa65: goto ceSQs; CAp2V: $newData["\x73\x74\141\x74\165\x73"] = intval($dt["\163\164\141\164\x75\163"]); goto rcPqv; ceSQs: $newData["\x73\154\165\x67"] = $slug; goto QYqlE; tt7XI: $newData["\x73\x75\x62\137\x63\x6f\x75\x6e\x74"] = $this->sub->getNumRows(); goto CAp2V; U3N_l: $newData["\x44\x54\137\x52\157\167\x49\x64"] = $dt["\x69\144"]; goto K4uXJ; MVLwe: $this->videos->setCriteria("\151\x64", $dt["\151\x64"]); goto bSoNJ; gxhoM: $newData["\x6c\151\156\x6b"] = $this->hosting->getDownloadLink(); goto mzcm9; K4uXJ: $newData["\164\151\x74\154\x65"] = sanitizeHtml($dt["\x74\x69\164\154\x65"]); goto yHsew; yHsew: $newData["\x70\157\163\164\145\162"] = rawurldecode($dt["\160\x6f\163\164\x65\162"]); goto XQxiC; tjnqM: $this->vAlt->setCriteria("\166\151\144", $dt["\x69\144"]); goto XciI3; Za2k0: $data[] = $newData; goto pwVoe; pwVoe: GE8RX: goto A359g; rcPqv: $newData["\144\x6d\x63\x61"] = intval($dt["\x64\155\x63\x61"]); goto Za2k0; QYqlE: $embedLink = $e . SLASH . $slug; goto ljf4P; mzcm9: $slug = $dt["\163\154\x75\147"]; goto dDGJb; EZfI7: $this->hosting->setHost($dt["\x68\157\163\164"]); goto zSDmY; XQxiC: $newData["\160\x6f\x73\164\145\162\x5f\x75\x72\x6c"] = Helper::posterParser($newData["\x70\x6f\163\x74\x65\162"]); goto EZfI7; Q1d6Z: $newData["\141\x63\164\151\x6f\156\x73"]["\x65\x6d\142\145\x64\x5f\143\157\144\145"] = sanitizeHtml(sprintf($iframe, $embedLink)); goto tjnqM; XciI3: $newData["\141\154\164\137\143\157\165\156\164"] = $this->vAlt->getNumRows(); goto lvnW2; dDGJb: if (!empty($dt["\x73\154\165\x67"])) { goto zVa65; } goto nbd3w; QMbXe: $newData["\x61\x63\164\x69\157\x6e\163"]["\145\155\x62\145\144"] = $embedLink; goto Q1d6Z; zSDmY: $this->hosting->setID($dt["\x68\157\163\x74\137\151\x64"]); goto gxhoM; lvnW2: $this->tableValidation($dt["\151\x64"], "\166\x69\x64", $this->sub); goto tt7XI; bSoNJ: $this->videos->update(["\163\x6c\x75\x67" => $slug]); goto QT9vS; nbd3w: $slug = createSlug(); goto MVLwe; A359g: } goto GW9r_; GQH1E: session_write_close(); goto JPoqy; nSUWw: $data = []; goto DDqP3; Iz3DX: } private function createQuery() { goto Xnd4f; Xnd4f: session_write_close(); goto gNl1V; NtBzI: M3MLG: goto GZwJP; af78E: if (!empty($this->data["\x72\x65\143\x65\x6e\x74"]) && validateBoolean($this->data["\162\x65\x63\145\156\x74"])) { goto XB16d; } goto DVx1k; EKG9b: XB16d: goto G49dc; DVx1k: if (!empty($this->data["\x70\x6f\160\165\x6c\x61\162"]) && validateBoolean($this->data["\x70\x6f\x70\x75\154\141\x72"])) { goto CFku1; } goto isAzd; r7Vgf: $qry["\x6f\162\x64\145\162\x44\x69\162"] = sanitizeHtml($this->data["\157\x72\144\x65\162"][0]["\x64\151\x72"]); goto gLO0Y; ToTOc: $qry["\x6c\145\x6e\x67\164\x68"] = 7; goto ObOXz; gNl1V: $qry = $this->extractDatatablesQry($this->data, $this->listColumns, "\165\160\144\141\164\145\x64", "\144\145\x73\143"); goto af78E; a5mCZ: return $qry; goto P_DEo; DK_SE: goto M3MLG; goto jDhLH; G49dc: $qry["\157\162\144\x65\x72\x42\171"] = "\x61\x64\x64\x65\x64"; goto DK_SE; GZwJP: if (empty($this->data["\157\162\x64\145\x72"][0]["\144\151\162"])) { goto xrJp_; } goto r7Vgf; jDhLH: CFku1: goto fWAz5; ObOXz: L6H2U: goto a5mCZ; fWAz5: $qry["\157\162\144\x65\x72\x42\x79"] = "\166\151\145\x77\x73"; goto NtBzI; gLO0Y: xrJp_: goto SlcqR; isAzd: goto M3MLG; goto EKG9b; SlcqR: if (!((isset($this->data["\162\145\143\145\156\x74"]) || isset($this->data["\160\x6f\160\165\x6c\141\162"])) && intval($qry["\154\x65\x6e\147\x74\150"]) < 1)) { goto L6H2U; } goto ToTOc; P_DEo: } private function createSearchTitle(string $title = '') { goto y4G6u; LJx5O: $params = ["\72\x74\x69\x74\154\145\x78" => $title, "\x3a\x68\157\x73\x74\x78" => $title, "\x3a\150\x6f\163\x74\x5f\151\x64\170" => $title, "\x3a\164\151\x74\154\x65" => "\45" . $title . "\x25"]; goto Y_AKz; Whz_3: $title = sanitizeHtml($title); goto jmjyi; Y_AKz: $titles = array_values(array_filter(explode("\x20", $title))); goto uO2dj; w7MFw: rgiIr: goto GTFoi; GTFoi: ICI42: goto FjakQ; Ujn3l: $params["\x3a\141\x6c\164\137\150\x6f\x73\164\137\151\144\170"] = $title; goto RHCnH; y4G6u: session_write_close(); goto Whz_3; FjakQ: $queries[] = "\140\166\x77\137\166\151\x64\x65\157\x73\140\x2e\151\x64\x20\x49\116\x20\x28\x53\x45\x4c\x45\103\124\x20\x44\111\x53\124\x49\x4e\103\x54\40\166\141\56\166\151\144\40\x46\x52\117\x4d\40\140\x74\x62\x5f\x76\x69\144\x65\157\163\x5f\141\x6c\164\x65\162\x6e\x61\164\x69\x76\145\x73\140\40\166\x61\x20\127\x48\x45\122\105\x20\x76\x61\56\x60\x68\x6f\163\164\x60\40\75\40\x3a\141\x6c\x74\137\x68\x6f\x73\164\170\x20\x4f\x52\40\166\x61\56\140\x68\x6f\x73\164\x5f\151\144\140\40\x3d\40\72\141\154\x74\x5f\x68\x6f\x73\164\137\x69\144\x78\40\x4f\x52\x20\x76\141\56\140\x68\x6f\163\x74\x60\x20\x4c\x49\113\105\40\72\x61\154\x74\137\x68\x6f\x73\164\40\x4f\x52\40\x76\x61\x2e\140\150\157\163\x74\x5f\151\x64\140\40\x4c\x49\113\105\40\x3a\x61\154\164\137\150\x6f\x73\x74\137\x69\144\x29"; goto p2IkA; CSdlg: return ["\163\x71\154" => implode("\x20\x4f\122\40", $queries), "\160\141\162\141\155\163" => $params]; goto sDRMZ; jmjyi: $queries = ["\140\x74\x69\x74\154\145\140\40\75\x20\72\164\151\164\154\x65\170", "\140\x68\157\x73\x74\140\40\x3d\x20\x3a\150\157\x73\x74\170", "\140\x68\157\163\164\137\x69\x64\140\x20\75\x20\x3a\x68\x6f\x73\164\137\151\x64\170", "\140\x74\x69\164\154\145\140\40\114\111\113\105\x20\x3a\x74\x69\164\x6c\x65"]; goto LJx5O; uO2dj: if (!(count($titles) > 1)) { goto ICI42; } goto fpXsA; fpXsA: foreach ($titles as $i => $title) { goto H8thz; v4cxR: J7iCM: goto uSXPA; H8thz: $queries[] = "\x60\164\151\164\154\145\x60\40\114\x49\x4b\x45\40\x3a\x74\151\164\x6c\145{$i}"; goto u25bT; u25bT: $params["\x3a\164\x69\x74\x6c\145{$i}"] = "\x25" . $title . "\x25"; goto v4cxR; uSXPA: } goto w7MFw; y2y6S: $params["\72\x61\x6c\164\x5f\150\157\163\164\x5f\151\144"] = "\x25" . $title . "\x25"; goto CSdlg; p2IkA: $params["\72\141\154\x74\x5f\x68\157\163\164\170"] = $title; goto Ujn3l; RHCnH: $params["\x3a\141\x6c\164\x5f\x68\x6f\x73\164"] = "\x25" . $title . "\x25"; goto y2y6S; sDRMZ: } public function list() { goto sWRFA; iWfeg: $sqlNum .= $sqlDmca; goto D_yqd; gyCGD: $recordsFiltered = $filtered["\152\155\x6c"] ?? 0; goto HKVzk; WXMuE: $uid = intval($this->data["\165\151\144"]); goto rLO9g; Qpt_b: $sql .= $sqlDmca; goto iWfeg; Fv18B: $sqlNum = rtrim(strtr($sqlNum, $replace), "\x20\127\110\x45\x52\105"); goto Q9I24; Sj3fT: UxAkl: goto vgs_N; NIdWv: $sqlNum .= $sqlUid; goto UpgM1; qJ5Bm: $params["\72\x68\157\x73\164"] = "\45" . $qry["\163\145\141\162\143\150"] . "\45"; goto NyA0_; rpCZZ: return $this->createJsonResponse($result); goto zE1Ln; J1xyE: goto UxAkl; goto qNrK3; Af0UK: $sqlOrder = "\40\117\122\104\105\x52\40\102\x59\40\45\x73\x20\45\x73"; goto n7fRj; lPGUg: $replace = ["\x57\110\x45\x52\105\x20\101\116\104" => "\127\110\105\x52\x45", "\127\x48\x45\122\105\40\117\122\104\105\x52" => "\117\x52\104\105\122", "\x57\x48\105\x52\x45\40\114\111\115\111\124" => "\x4c\111\x4d\111\x54"]; goto EPhoE; sO6UX: $result = $this->toDataTablesJson(intval($qry["\144\162\x61\x77"]), $data, $recordsTotal, $recordsFiltered); goto rpCZZ; C_0YQ: $sql .= $sqlSearch; goto cCWf6; C3Pnv: $list = $this->vwVideo->rawFetchAll($sql, $params); goto A1Cv5; HKVzk: $recordsTotal = $this->vwVideo->getTotalRows(); goto sO6UX; hnmhH: $sql .= sprintf($sqlOrder, "\141\144\x64\145\144", "\x64\145\x73\143"); goto IGxpn; rLO9g: $sql .= $sqlUid; goto oZGEO; uo6sy: ePw3U: goto ncQlq; UpgM1: $params["\72\165\151\x64"] = $uid; goto J1xyE; rN51L: $sqlNum = "\x53\x45\114\105\x43\x54\40\x43\x4f\x55\116\x54\x28\x60\x69\x64\x60\x29\40\141\163\x20\x6a\x6d\154\x20\x46\x52\x4f\115\40\x60\166\167\137\x76\151\x64\145\x6f\x73\140\40\x57\x48\105\x52\105"; goto uqpA2; Q9I24: $filtered = $this->vwVideo->rawFetch($sqlNum, $params); goto gyCGD; xU8iG: $uid = $this->currentUser["\x69\144"]; goto WqVAH; IGxpn: YDDM5: goto w9Pui; OD5Ys: Nlx36: goto hnmhH; bAd2o: M_4xM: goto s_UrX; D_yqd: $params["\x3a\144\155\143\x61"] = intval($this->data["\x64\155\x63\x61"]); goto spftF; UbqMG: $params = array_merge($params, $searchQuery["\160\x61\162\141\x6d\163"]); goto NHNPj; uqpA2: $sqlUid = "\x20\140\x75\x69\144\140\40\75\40\x3a\165\151\x64"; goto xx91F; sWRFA: session_write_close(); goto yZt7k; rvAB6: $searchQuery = $this->createSearchTitle($qry["\x73\145\x61\162\x63\150"]); goto uNbJE; pLH17: $params["\72\x70\157\163\164\145\x72"] = "\45" . $qry["\163\x65\141\162\x63\150"] . "\45"; goto JYZ7w; zX7eS: hYIE3: goto ch4OT; oZGEO: $sqlNum .= $sqlUid; goto G_urt; XhBLw: if (empty($this->data["\165\151\144"])) { goto alXny; } goto WXMuE; P_6eo: $sql = "\123\x45\x4c\x45\x43\x54\x20\x60\x69\x64\140\54\x20\x60\164\151\x74\x6c\145\140\x2c\40\x60\x68\157\x73\x74\140\x2c\40\140\x73\164\x61\x74\165\x73\140\54\40\x60\x64\155\x63\x61\140\x2c\40\140\x76\x69\x65\x77\163\140\54\x20\x60\156\141\x6d\x65\x60\x2c\40\x60\x61\144\x64\145\x64\x60\x2c\x20\140\x75\x70\x64\141\164\145\x64\140\54\x20\x60\160\157\x73\x74\x65\x72\x60\54\40\x60\150\157\163\x74\x5f\x69\144\x60\54\40\x60\163\154\165\x67\x60\40\x46\122\117\115\x20\x60\x76\x77\x5f\166\151\144\x65\x6f\163\140\40\x57\110\x45\122\105"; goto rN51L; cCWf6: $sqlNum .= $sqlSearch; goto UbqMG; vgs_N: if (empty($qry["\x73\x65\141\162\x63\x68"])) { goto P7lDC; } goto rvAB6; xx91F: if ($this->isAdmin) { goto OHIz6; } goto qqXDc; s_UrX: $qry = $this->createQuery(); goto xU8iG; n2yOD: $params["\x3a\163\x74\x61\164\165\x73"] = intval($this->data["\163\x74\x61\164\165\163"]); goto uo6sy; NyA0_: $params["\x3a\x68\x6f\163\164\x5f\151\144"] = "\x25" . $qry["\x73\145\x61\162\x63\150"] . "\x25"; goto xUPne; ncQlq: $sqlDmca = "\40\x41\x4e\104\40\x60\x64\155\143\141\140\40\x3d\40\x3a\x64\x6d\143\141"; goto Zwci7; A1Cv5: $data = $this->createDataList($list); goto Fv18B; yZt7k: $result = $this->toDataTablesJson(); goto sSO5T; NHNPj: $params["\72\151\144"] = $qry["\x73\x65\x61\162\143\150"]; goto qJ5Bm; EPhoE: $sql = rtrim(strtr($sql, $replace), "\40\127\x48\x45\122\x45"); goto C3Pnv; WqVAH: $params = []; goto P_6eo; ORmVN: return $this->createJsonResponse($result); goto bAd2o; c8zYz: if (isset($this->data["\162\x65\143\145\156\x74"]) && validateBoolean($this->data["\162\145\x63\145\156\164"])) { goto Nlx36; } goto JYGkW; pVCL9: $sqlNum .= $sqlStatus; goto n2yOD; spftF: CaYq6: goto Af0UK; Zwci7: if (!(isset($this->data["\144\x6d\143\x61"]) && $this->data["\x64\155\143\141"] !== "\x6e\x75\x6c\154")) { goto CaYq6; } goto Qpt_b; oIdHy: goto YDDM5; goto OD5Ys; w9Pui: $sql .= sprintf("\40\x4c\111\x4d\x49\124\x20\45\144\x2c\x20\x25\x64", $qry["\x73\164\141\x72\x74"], $qry["\154\145\x6e\147\x74\150"]); goto lPGUg; qNrK3: OHIz6: goto XhBLw; JYZ7w: $params["\x3a\x73\154\165\x67"] = "\45" . $qry["\x73\145\x61\x72\143\150"] . "\x25"; goto BwX1q; G_urt: $params["\x3a\165\x69\x64"] = $uid; goto iDnas; BwX1q: P7lDC: goto E94_D; u2IBt: $sql .= $sqlStatus; goto pVCL9; n7fRj: if (isset($this->data["\x70\x75\x70\x75\x6c\x61\x72"]) && validateBoolean($this->data["\160\x75\160\x75\154\141\x72"])) { goto hYIE3; } goto c8zYz; E94_D: $sqlStatus = "\x20\101\x4e\104\40\140\163\x74\x61\x74\165\163\140\40\75\x20\x3a\x73\164\x61\x74\165\163"; goto gr2Q8; azG10: goto YDDM5; goto zX7eS; gr2Q8: if (!(isset($this->data["\x73\x74\141\x74\165\x73"]) && $this->data["\x73\164\141\164\x75\x73"] !== "\156\165\154\x6c")) { goto ePw3U; } goto u2IBt; qqXDc: $sql .= $sqlUid; goto NIdWv; uNbJE: $sqlSearch = sprintf("\x20\x41\116\104\x20\50\x25\163\x20\x4f\x52\40\x60\151\144\x60\x20\x3d\40\x3a\151\144\40\x4f\x52\x20\x60\x68\x6f\163\x74\140\x20\114\x49\113\105\x20\72\150\x6f\163\164\x20\117\122\x20\x60\x68\157\163\x74\137\x69\144\x60\x20\114\111\113\x45\x20\72\x68\x6f\x73\164\137\151\144\x20\117\x52\40\140\156\x61\155\145\140\40\114\x49\x4b\x45\x20\x3a\x6e\x61\x6d\145\40\117\x52\40\x60\x70\157\x73\x74\x65\x72\x60\x20\x4c\x49\113\x45\40\x3a\160\157\x73\164\145\162\x20\117\122\40\140\x73\154\165\x67\x60\x20\114\111\113\x45\x20\72\x73\154\x75\x67\51", $searchQuery["\163\x71\x6c"]); goto C_0YQ; JYGkW: $sql .= sprintf("\x20\117\x52\104\105\122\40\102\x59\x20\45\163\x20\45\x73", $qry["\157\x72\x64\x65\162\x42\x79"], $qry["\x6f\x72\x64\145\162\104\x69\162"]); goto azG10; xUPne: $params["\x3a\156\x61\155\145"] = "\x25" . $qry["\163\x65\x61\162\143\x68"] . "\x25"; goto pLH17; iDnas: alXny: goto Sj3fT; sSO5T: if ($this->currentUser) { goto M_4xM; } goto ORmVN; ch4OT: $sql .= sprintf($sqlOrder, "\166\151\145\167\x73", "\144\145\163\143"); goto oIdHy; zE1Ln: } public function response() { session_write_close(); return $this->defaultResponse($this); } protected function deleteByHostnames() { goto cJNzi; vvJTq: if (!in_array(true, $deleted)) { goto H65_U; } goto et3n6; et3n6: $result = $this->toJson(1, self::MESSAGE_VIDEO_DELETE_SUCCESS); goto JSQdl; BoHFq: return $result; goto o4UDN; TzOEX: WC4AI: goto Hk3ZI; ZaWfk: $result = $this->toJson(0, self::MESSAGE_VIDEO_DELETE_FAIL); goto IIc1y; JSQdl: H65_U: goto BoHFq; NWQ5N: foreach ($this->data["\x68\x6f\x73\x74\x6e\141\155\x65\x73"] as $hostname) { goto QJi6x; QJi6x: $this->videos->setCriteria("\x68\157\163\164", $hostname); goto jPgQO; jPgQO: $deleted[] = $this->videos->delete(); goto A8Il2; A8Il2: KpNSx: goto L8GDZ; L8GDZ: } goto TzOEX; Hk3ZI: me2Jy: goto vvJTq; cJNzi: session_write_close(); goto ZaWfk; hNehI: if (!(!empty($this->data["\150\157\x73\164\156\x61\x6d\x65\163"]) && $this->isAdmin)) { goto me2Jy; } goto NWQ5N; IIc1y: $deleted = []; goto hNehI; o4UDN: } protected function renameMulti() { goto OZR7t; FFb8Q: B3x9M: goto HCf74; EIRbw: parse_str($this->data["\x64\141\164\141"], $input); goto c9cbS; qn3kU: if (!in_array(true, $updated)) { goto blGMD; } goto ygOuH; vRKlv: foreach ($videos as $dt) { goto N3V5E; hZDpC: $updated[] = $this->videos->update(["\164\x69\x74\154\145" => $title, "\x75\160\144\x61\164\145\x64" => time()]); goto nGFnj; P5_ya: $title .= $input["\x72\x65\156\x61\155\x65\x50\157\x73\x74\x66\151\170"]; goto vVaf1; vVaf1: $title = strtr($title, [$input["\162\x65\x6e\141\155\145\x52\x65\x70\154\x61\x63\145\130"] => $input["\x72\x65\156\141\x6d\x65\122\145\x70\x6c\141\143\145\131"]]); goto sFAqy; nGFnj: nsCvo: goto l1XkM; sFAqy: $this->videos->setCriteria("\151\x64", $dt["\151\144"]); goto hZDpC; N3V5E: $title = $input["\x72\145\156\x61\x6d\145\120\162\x65\146\x69\170"] . $dt["\x74\151\164\x6c\x65"]; goto P5_ya; l1XkM: } goto vXsbo; K0mh6: return $result; goto DOhFe; n2CiZ: foreach ($ids as $id) { goto qMkmk; prvsC: if (!$dtV) { goto ZkBHC; } goto PdD51; qMkmk: $this->videos->setCriteria("\x69\x64", $id); goto OzhxW; qli8f: Nz06Z: goto HwjhZ; OzhxW: $dtV = $this->videos->getOne(["\x69\144", "\x74\151\x74\x6c\145"]); goto prvsC; PdD51: $videos[] = $dtV; goto KZmOg; KZmOg: ZkBHC: goto qli8f; HwjhZ: } goto FFb8Q; kyIUI: blGMD: goto gNb22; MwkVf: $ids = explode("\54", $input["\151\x64\163"]); goto n2CiZ; ygOuH: $result = $this->toJson(1, self::MESSAGE_VIDEO_UPDATE_SUCCESS); goto kyIUI; vXsbo: NHPiL: goto Mo6Q5; HUDuL: $updated = []; goto SFA7k; SFA7k: $videos = []; goto MwkVf; DOhFe: e9vcR: goto HUDuL; c9cbS: if (!empty($input["\151\144\163"])) { goto e9vcR; } goto K0mh6; FvRvl: $result = $this->toJson(0, self::MESSAGE_VIDEO_UPDATE_FAIL); goto EIRbw; Mo6Q5: A8xhN: goto qn3kU; HCf74: if (empty($videos)) { goto A8xhN; } goto vRKlv; OZR7t: session_write_close(); goto FvRvl; gNb22: return $result; goto ansvd; ansvd: } protected function rename() { goto Y2bTw; Nfjai: if (!$updated) { goto Reyi8; } goto L4yer; LNlQs: Reyi8: goto U4H6I; iBcId: og1dI: goto Ikb2D; VuhUh: $this->videos->setCriteria("\x69\144", $this->data["\x69\x64"]); goto apTji; Y2bTw: session_write_close(); goto MhXU4; glSyd: if (!empty($this->data["\x69\x64"])) { goto vwHDO; } goto Vofgo; L4yer: $result = $this->toJson(1, self::MESSAGE_VIDEO_UPDATE_SUCCESS); goto LNlQs; YdNY2: return $result; goto y8Vjp; Vofgo: goto Xedi7; goto iBcId; apTji: $updated = $this->videos->update(["\x74\x69\164\154\x65" => $this->data["\x6e\141\x6d\x65"], "\165\160\144\x61\164\x65\144" => time()]); goto Nfjai; MhXU4: $result = $this->toJson(0, self::MESSAGE_VIDEO_NOT_FOUND); goto f_Ib_; hH3w2: vwHDO: goto Y6QjI; Y6QjI: $result = $this->toJson(0, self::MESSAGE_VIDEO_UPDATE_FAIL); goto VuhUh; CCqr8: goto Xedi7; goto hH3w2; Ikb2D: $result = $this->toJson(0, self::MESSAGE_VIDEO_RENAME_EMPTY); goto CCqr8; f_Ib_: if (empty($this->data["\156\141\155\145"])) { goto og1dI; } goto glSyd; U4H6I: Xedi7: goto YdNY2; y8Vjp: } protected function delete() { goto pnj29; IWDBh: if (empty($this->data["\151\144"])) { goto IKHpm; } goto KbWw2; LwJW0: return $result; goto cRhPp; MR8la: $result = $this->toJson(1, self::MESSAGE_VIDEO_DELETE_SUCCESS); goto oLj8s; pnj29: session_write_close(); goto cwpg6; oLj8s: Q7jJS: goto keZ1I; ZWllj: $deleted = $this->videos->delete(); goto czFTP; keZ1I: IKHpm: goto LwJW0; cwpg6: $result = $this->toJson(0, self::MESSAGE_VIDEO_NOT_FOUND); goto IWDBh; KbWw2: $this->tableValidation($this->data["\151\144"], "\x69\x64", $this->videos); goto ZWllj; czFTP: if (!$deleted) { goto Q7jJS; } goto MR8la; cRhPp: } protected function removePoster() { goto Wkv2R; Qnl5b: $result = $this->toJson(1, self::MESSAGE_POSTER_REMOVE_SUCCESS); goto fru24; UHxOL: $result = $this->toJson(0, self::MESSAGE_VIDEO_NOT_FOUND); goto wOzia; Zn1IU: if (validateUrl($getVideo["\x70\x6f\x73\x74\x65\x72"])) { goto Zv2aE; } goto BfUwZ; BfUwZ: @unlink(IMAGES_PATH . $getVideo["\160\157\x73\x74\145\x72"]); goto uVyuP; ZqUoQ: return $result; goto JGZsd; kR_JV: $updated = $this->videos->update(["\160\157\163\164\145\x72" => '']); goto Sooct; mECH3: $this->tableValidation($this->data["\151\x64"], "\151\144", $this->videos); goto kR_JV; gdhDZ: $getVideo = $this->videos->getOne(["\x70\x6f\x73\164\145\x72"]); goto XVRAZ; VUrRH: $this->tableValidation($this->data["\x69\144"], "\151\x64", $this->videos); goto gdhDZ; fru24: xpkmS: goto ceqIC; XVRAZ: if (empty($getVideo["\160\157\163\x74\x65\x72"])) { goto uVX66; } goto Zn1IU; uVyuP: Zv2aE: goto ubga0; Wkv2R: session_write_close(); goto UHxOL; ubga0: $result = $this->toJson(0, self::MESSAGE_POSTER_REMOVE_FAIL); goto mECH3; wOzia: if (empty($this->data["\x69\x64"])) { goto RONlb; } goto VUrRH; cLO0i: RONlb: goto ZqUoQ; Sooct: if (!$updated) { goto xpkmS; } goto Qnl5b; ceqIC: uVX66: goto cLO0i; JGZsd: } protected function updateStatus() { goto ZqWCR; kk9lc: $result = $this->toJson(1, self::MESSAGE_VIDEO_SAVE_SUCCESS); goto Eok6L; cvYjF: $result = $this->toJson(0, self::MESSAGE_VIDEO_SAVE_FAIL); goto xLUx3; n8Zpb: return $result; goto fTE21; sVHVy: if (empty($this->data["\151\x64"])) { goto OVpTg; } goto cvYjF; bmjNG: $status = empty($this->data["\x73\157\x75\x72\x63\145\x73"]) ? 1 : 0; goto sVHVy; BkKwN: $updated = $this->videos->update(array("\163\164\141\x74\165\x73" => $status)); goto ajY8u; oHgQS: $result = $this->toJson(0, self::MESSAGE_VIDEO_NOT_FOUND); goto bmjNG; Eok6L: WbfA7: goto pzfDA; ZqWCR: session_write_close(); goto oHgQS; xLUx3: $this->tableValidation($this->data["\x69\144"], "\x69\x64", $this->videos); goto BkKwN; pzfDA: OVpTg: goto n8Zpb; ajY8u: if (!$updated) { goto WbfA7; } goto kk9lc; fTE21: } protected function getServer() { goto yLxiC; MiwZX: if (validateUrl($id)) { goto XWxsZ; } goto a1XR1; pwZ8L: $alternatives = []; goto Yq4hg; OyoNW: $hosts = []; goto sIkHB; ENxQ2: $result = $this->notAuthorize(); goto m1IgQ; mfCMl: iTCGw: goto wpCWr; HgOQ3: $host = $this->hosting->getHost(); goto Ml7KD; W2R7X: XWxsZ: goto u9Iqn; G1G6u: $id = $this->data["\151\144"]; goto k3Ymt; lrdf7: $this->videos->setCriteria("\x69\x64", $id); goto B5W4y; YySlK: return $result; goto BzaWa; fYhtx: $apiUrl .= "\55\54" . $this->security->encryptURL("\x6b\156\x74\154\x4d\155\x6b\114\165\103\x6f\x65\147"); goto OtqNY; EXq59: if (empty($qry["\x69\144"])) { goto VUMGK; } goto UPAlb; tBnNo: $uid = $data["\x75\x69\x64"]; goto L44bY; k3Ymt: $token = $this->security->encryptURL(getUserIP()); goto gOHiy; C14fF: $qry["\165\151\144"] = $uid; goto pwZ8L; MdKBG: $qry["\151\144"] = $id; goto C14fF; LcRGm: if (isLoadBalancer()) { goto iTCGw; } goto EmIT4; B5W4y: $data = $this->videos->getOne(["\x75\151\144", "\x68\157\163\x74"]); goto LNT_i; yLxiC: session_write_close(); goto ENxQ2; a1XR1: goto T4O8M; goto tuz62; u9Iqn: $this->hosting->setURL($id); goto Dl_jI; tvVXb: return $result; goto NBHSO; wpCWr: $apiUrl = $baseURL . "\141\160\151\57\77"; goto lScAQ; Ml7KD: $hosts[] = $host; goto ukbQx; m1IgQ: if (!empty($this->data["\x69\x64"])) { goto PkGjR; } goto tvVXb; Yq4hg: $this->vAlt->setCriteria("\x76\151\x64", $id); goto Yw7kj; OtqNY: $result = $this->toJson(0, self::MESSAGE_VIDEO_NOT_FOUND); goto EXq59; tuz62: crOoj: goto lrdf7; GrJBr: if (!isset($data["\x75\x69\144"])) { goto SVydt; } goto tBnNo; lScAQ: $apiUrl .= $this->security->encryptURL(http_build_query($qry)); goto fYhtx; mv7FO: $qry["\165\x73\145\124\x69\164\154\x65\x41\x73\123\x6c\x75\147"] = $useTitleAsSlug; goto ydOAh; EmIT4: $baseURL = getLoadBalancerRand($hosts); goto mfCMl; LNT_i: if (!isset($data["\150\157\163\164"])) { goto oWyyD; } goto arvsc; Yw7kj: $data = $this->vAlt->get(["\150\x6f\163\164"]); goto BHJ4E; KLYld: goto T4O8M; goto W2R7X; ydOAh: if (is_numeric($id)) { goto crOoj; } goto MiwZX; ukbQx: $qry["\150\157\163\164"] = $host; goto jrke_; BHJ4E: if (!$data) { goto PvCZo; } goto o7YAN; NBHSO: PkGjR: goto G1G6u; jrke_: $qry["\151\144"] = $id; goto NiPDq; C45QB: $qry["\x74\x6f\153\145\156"] = $token; goto mv7FO; Vr6JQ: T4O8M: goto xQvuY; hd69H: $qry["\x73\x6f\x75\x72\x63\145"] = "\144\x62"; goto MdKBG; vYOw5: PvCZo: goto AcpUQ; y3JqI: VUMGK: goto YySlK; UPAlb: $result = $this->toJson(1, "\117\113", $apiUrl); goto y3JqI; sIkHB: $qry = []; goto QLJ6Y; xQvuY: $baseURL = BASE_URL; goto LcRGm; AcpUQ: $hosts = array_merge($hosts, $alternatives); goto KLYld; Dl_jI: $id = $this->hosting->getID(); goto HgOQ3; gOHiy: $useTitleAsSlug = isset($this->data["\165\x73\x65\x54\x69\164\154\x65\101\163\x53\154\x75\147"]) ? validateBoolean($this->data["\x75\x73\x65\x54\x69\164\x6c\145\101\163\x53\x6c\165\x67"]) : false; goto IOAhK; xw85k: oWyyD: goto GrJBr; NiPDq: $qry["\165\151\144"] = $this->currentUser["\151\x64"]; goto Vr6JQ; o7YAN: $alternatives = array_column($data, "\150\x6f\x73\x74"); goto vYOw5; L44bY: SVydt: goto hd69H; arvsc: $hosts[] = $data["\x68\157\x73\164"]; goto xw85k; IOAhK: $uid = $this->currentUser["\x69\144"]; goto OyoNW; QLJ6Y: $qry["\x73\x61\x76\145\x64"] = true; goto C45QB; BzaWa: } protected function dmcaTakedown() { goto bRuxB; YGpZX: $result = $this->toJson(0, self::MESSAGE_VIDEO_UPDATE_FAIL); goto nVvEf; RgLtm: $updated = $this->videos->update(array("\x64\155\x63\141" => $this->data["\x74\141\x6b\145\144\157\167\156"], "\x75\x70\144\x61\x74\x65\x64" => time())); goto C0rS1; gxrs5: $updated = false; goto up88V; hVq9F: $result = $this->toJson(1, self::MESSAGE_VIDEO_UPDATE_SUCCESS); goto raAmC; C0rS1: if (!$updated) { goto txxiV; } goto hVq9F; zGdwX: return $result; goto M7TfX; raAmC: txxiV: goto X9KVA; up88V: $this->tableValidation($this->data["\151\x64"], "\x69\x64", $this->videos); goto RgLtm; X9KVA: yBK9c: goto zGdwX; nVvEf: if (!(!empty($this->data["\151\x64"]) && isset($this->data["\x74\x61\153\x65\144\x6f\167\156"]) && $this->isAdmin)) { goto yBK9c; } goto gxrs5; bRuxB: session_write_close(); goto YGpZX; M7TfX: } protected function getAlternatives() { goto KsQY2; yBJWm: if (empty($this->data["\151\x64"])) { goto lyvW0; } goto mjHCB; hL8N6: $this->hosting->setID($getVideo["\x68\157\x73\x74\137\x69\x64"]); goto wqnDi; D7rrD: if ($getVideo) { goto o3Uyy; } goto vtw4e; PsikA: $this->vAlt->setOrderBy("\157\x72\x64\x65\162", "\x41\x53\103"); goto Z3WId; Ic2So: lyvW0: goto TZwvY; mjHCB: $hosts = []; goto z_ENg; yuiHk: $this->vAlt->setCriteria("\166\x69\144", $this->data["\151\144"]); goto PsikA; Z3WId: $getVideoAlt = $this->vAlt->get(["\150\157\163\x74", "\x68\x6f\163\x74\137\151\144"]); goto DVQjA; z_ENg: $this->tableValidation($this->data["\x69\144"], "\151\144", $this->videos); goto HiZjc; wqnDi: $hosts[] = array("\x68\x6f\163\164" => $getVideo["\150\x6f\x73\164"], "\165\162\x6c" => $this->hosting->getDownloadLink()); goto RJw0F; wa6mL: $result = $this->notValid(); goto yBJWm; u8DWZ: foreach ($getVideoAlt as $dt) { goto ZOgHo; zNVYX: $hosts[] = array("\x68\157\x73\164" => $dt["\150\157\163\164"], "\x75\162\x6c" => $this->hosting->getDownloadLink()); goto lXRCa; ZOgHo: $this->hosting->setHost($dt["\150\157\163\164"]); goto TXjB5; lXRCa: DVHOw: goto SXEGI; TXjB5: $this->hosting->setID($dt["\x68\157\x73\164\x5f\x69\x64"]); goto zNVYX; SXEGI: } goto PXA9B; DVQjA: if (!$getVideoAlt) { goto vrhAU; } goto u8DWZ; RJw0F: lSGyh: goto yuiHk; HiZjc: $getVideo = $this->videos->getOne(["\x68\157\163\164", "\x68\x6f\163\164\x5f\151\144"]); goto D7rrD; s9OrD: vrhAU: goto FSA6t; JYNfS: o3Uyy: goto bm0Vm; FSA6t: $result = $this->toJson(1, '', $hosts); goto Ic2So; bm0Vm: if (!(!empty($getVideo["\x68\157\163\164"]) && !empty($getVideo["\x68\157\163\164\x5f\151\144"]))) { goto lSGyh; } goto hL6Ww; PXA9B: sSAUS: goto s9OrD; vtw4e: return $result; goto JYNfS; TZwvY: return $result; goto N3nmH; KsQY2: session_write_close(); goto wa6mL; hL6Ww: $this->hosting->setHost($getVideo["\150\x6f\163\164"]); goto hL8N6; N3nmH: } protected function getSubtitles() { goto MClzz; jGbjW: foreach ($list as $dt) { goto azOas; Z2FJD: goto ljG3w; goto fw9Xy; azOas: if (!validateUrl($dt["\154\151\156\153"])) { goto gFkjd; } goto w7Ig7; HdgCx: $this->tableValidation($this->data["\x69\x64"], "\166\x69\144", $this->sub); goto XLaK7; w7Ig7: $data[] = array("\x6e\141\155\x65" => $dt["\x6c\141\156\147\165\141\147\x65"], "\x75\x72\154" => $dt["\154\x69\x6e\x6b"]); goto Z2FJD; fw9Xy: gFkjd: goto dgJAj; dgJAj: $link = decode($dt["\154\151\x6e\153"]); goto HdgCx; XLaK7: $this->sub->update(array("\154\151\x6e\153" => $link)); goto PTunj; OA1IK: ljG3w: goto wsXiL; PTunj: $data[] = array("\x6e\141\155\145" => $dt["\154\141\x6e\x67\165\x61\147\x65"], "\165\x72\154" => $link); goto OA1IK; wsXiL: afaj8: goto Jq3jK; Jq3jK: } goto BhBb0; kJWgV: $this->tableValidation($this->data["\151\144"], "\166\151\x64", $this->sub); goto B9F80; jBkQE: qhIh4: goto xpAvI; MClzz: session_write_close(); goto qSQLg; qSQLg: $result = $this->notValid(); goto x_DLI; ZiJO1: if (!$list) { goto rYOor; } goto jGbjW; xpAvI: return $result; goto YYdhJ; bMNNl: $data = []; goto kJWgV; x_DLI: if (empty($this->data["\x69\x64"])) { goto qhIh4; } goto bMNNl; IlsPg: $list = $this->sub->get(["\151\x64", "\154\141\x6e\147\165\x61\x67\145", "\154\151\x6e\153"]); goto ZiJO1; WP8ng: rYOor: goto PZnL2; BhBb0: a2iPD: goto WP8ng; B9F80: $this->sub->setOrderBy("\x6f\162\x64\x65\x72", "\101\x53\103"); goto IlsPg; PZnL2: $result = $this->toJson(1, '', $data); goto jBkQE; YYdhJ: } protected function searchSubtitles() { goto bGs80; pz4Sf: bJqA3: goto YDge8; fl17m: foreach ($list as $dt) { goto bzbw9; bzbw9: $val = rtrim(Helper::replaceURLScheme($dt["\x68\157\163\x74"]), SLASH) . "\57\x75\x70\x6c\x6f\141\x64\x73\x2f\x73\165\142\x74\x69\164\154\145\x73\57" . $dt["\x66\x69\x6c\145\137\x6e\x61\155\145"]; goto DOhBW; phtaZ: sQpmM: goto lpaZ7; DOhBW: $result[] = ["\x69\144" => $dt["\146\x69\154\145\x5f\x6e\141\155\x65"], "\x6c\141\x62\145\154" => $dt["\154\141\156\x67\165\141\x67\x65"], "\x76\x61\x6c\x75\145" => $val]; goto phtaZ; lpaZ7: } goto VYqhd; hYLFw: vgFk7: goto zLZGF; fs4uu: $this->subMan->setCriteria("\165\x69\x64", $this->currentUser["\151\x64"]); goto hYLFw; Yf8po: $this->subMan->setCriteria("\x6c\x61\x6e\147\x75\x61\x67\145", $this->data["\161"], "\x4c\x49\113\105", "\117\x52"); goto DwtVC; YDge8: return $this->toCustomJson($result); goto ucNwd; qr7Wi: if ($this->isAdmin) { goto vgFk7; } goto fs4uu; tW0r6: $this->subMan->setLimit(0, 10); goto qr7Wi; NkIZ3: $result = []; goto tW0r6; nnQvU: $this->subMan->setCriteria("\x66\x69\154\145\x5f\x6e\141\155\x65", $this->data["\161"], "\x4c\111\113\105", "\101\116\x44"); goto xeGnE; Z0wWw: QkoWc: goto nnQvU; WbmHg: if (!$this->isAdmin) { goto QkoWc; } goto Zbldc; xeGnE: jMigz: goto Yf8po; VYqhd: lKC_W: goto pz4Sf; cu7SJ: $this->data["\161"] .= "\x25"; goto WbmHg; slRT8: $list = $this->subMan->get(["\x66\151\154\145\137\156\141\155\x65", "\x68\157\163\x74", "\154\x61\156\x67\x75\141\147\x65"]); goto e7bpy; Zbldc: $this->subMan->setCriteria("\146\151\154\x65\137\156\141\x6d\x65", $this->data["\x71"], "\x4c\111\113\x45"); goto sfIzo; DwtVC: pn26H: goto slRT8; sfIzo: goto jMigz; goto Z0wWw; bGs80: session_write_close(); goto NkIZ3; e7bpy: if (!$list) { goto bJqA3; } goto fl17m; zLZGF: if (empty($this->data["\161"])) { goto pn26H; } goto cu7SJ; ucNwd: } protected function editSubtitleValidation(string $type = '') { goto H7KrP; SQcv0: tMiEE: goto CqoX7; V0_Vs: $result = $this->toJson(0, self::MESSAGE_SUBTITLE_URL_INVALID); goto BWxdB; oUJ7d: $result = $this->toJson(0, self::MESSAGE_SUBTITLE_UPDATE_FAIL); goto FaQzU; Pzz9B: $updated = $this->sub->update(array("\154\151\x6e\153" => $subtitleUrl, "\154\141\156\147\x75\141\147\145" => $lang)); goto T4T9s; H7KrP: session_write_close(); goto V0_Vs; On7rf: if ($type === "\x75\162\x6c" && validateUrl($this->data["\x65\x64\x69\164\123\x75\142\125\x52\x4c"])) { goto o3VYo; } goto opVSB; opVSB: if ($type === "\146\x69\x6c\x65" && !empty($this->files["\145\144\151\x74\123\x75\x62\106\151\x6c\x65"])) { goto yywpS; } goto C45Jd; kRiL5: $this->subMan->insert(array("\146\x69\154\x65\x5f\x6e\141\155\x65" => basename($subtitleFile), "\146\x69\154\x65\x5f\x73\x69\x7a\x65" => filesize($subtitleFile), "\146\151\x6c\x65\137\x74\x79\160\x65" => $fileType, "\x6c\141\156\147\x75\x61\x67\x65" => $lang, "\141\144\144\x65\x64" => time(), "\x75\151\144" => $this->currentUser["\x69\144"], "\150\x6f\x73\164" => BASE_URL)); goto J8zbp; FaQzU: $this->tableValidation($this->data["\145\144\x69\x74\x53\165\x62\111\x64"], "\x69\144", $this->sub); goto QMA8_; ibUf1: if (!$subtitleFile) { goto iioMP; } goto ql8oe; J8zbp: $result = $this->toJson(1, self::MESSAGE_SUBTITLE_UPLOAD_SUCCESS, array("\x69\x64" => $this->data["\145\x64\x69\x74\x53\x75\142\111\x64"], "\x6c\x61\x6e\x67" => $lang, "\x73\165\142" => $subtitleUrl)); goto SQcv0; pfSf1: goto iCsfy; goto y9bMG; AOI61: return $result; goto bVtvr; kwhUo: nIlu_: goto pfSf1; q32Bc: $result = $this->toJson(0, self::MESSAGE_SUBTITLE_UPLOAD_FAIL); goto OFqcq; a4xeX: iCsfy: goto AOI61; LIyxo: $fileType = getMimeType($subtitleFile); goto kRiL5; OFqcq: $subtitleFile = uploadSubtitle($this->files["\x65\144\x69\164\x53\165\142\x46\x69\154\145"]); goto ibUf1; y9bMG: yywpS: goto q32Bc; T5ugH: $this->tableValidation($this->data["\x65\x64\x69\x74\123\165\x62\111\144"], "\x69\144", $this->sub); goto Pzz9B; ObD2u: $result = $this->toJson(1, self::MESSAGE_SUBTITLE_UPDATE_SUCCESS, array("\x69\144" => $this->data["\x65\144\x69\164\123\165\142\x49\x64"], "\154\141\156\147" => $lang, "\x73\x75\142" => $this->data["\x65\x64\151\164\x53\165\x62\x55\x52\x4c"])); goto kwhUo; QMA8_: $updated = $this->sub->update(array("\154\x69\156\x6b" => $this->data["\145\x64\x69\x74\x53\x75\142\x55\x52\x4c"], "\154\x61\x6e\147\x75\x61\x67\x65" => $lang, "\x75\x70\x64\x61\164\x65\144" => time())); goto dWuhA; C45Jd: goto iCsfy; goto LaGZP; T4T9s: if (!$updated) { goto tMiEE; } goto LIyxo; ql8oe: $subtitleUrl = strtr($subtitleFile, [normalizeSeparator(BASE_DIR) => BASE_URL]); goto T5ugH; LaGZP: o3VYo: goto oUJ7d; dWuhA: if (!$updated) { goto nIlu_; } goto ObD2u; BWxdB: $lang = $this->data["\145\144\151\x74\x53\165\142\x4c\141\x6e\x67"] ?? "\104\145\x66\x61\165\154\164"; goto On7rf; CqoX7: iioMP: goto a4xeX; bVtvr: } protected function editSubtitle() { goto dwzBE; Z9nxC: $result = $this->toJson(0, self::MESSAGE_SUBTITLE_NOT_FOUND); goto xSqbY; XRxHq: return $result; goto r4GAF; SEZY3: LdllD: goto XRxHq; xSqbY: $type = $this->data["\x65\144\x69\164\123\x75\x62\124\171\x70\145"] ?? "\165\162\x6c"; goto z3Btr; z3Btr: if (empty($this->data["\145\x64\x69\x74\x53\165\x62\x49\144"])) { goto LdllD; } goto aw3vu; aw3vu: $result = $this->editSubtitleValidation($type); goto SEZY3; dwzBE: session_write_close(); goto Z9nxC; r4GAF: } protected function deleteSubtitle() { goto oqYd4; oqYd4: session_write_close(); goto GkcYO; jJeZC: $deleted = $this->sub->delete(); goto zDegN; tLosx: VKx3c: goto lQa0p; zDegN: if (!$deleted) { goto a6vMS; } goto kSgvm; kSgvm: $result = $this->toJson(1, self::MESSAGE_SUBTITLE_DELETE_SUCCESS); goto Fzpu5; mdQFV: $this->tableValidation($this->data["\x69\144"], "\x69\x64", $this->sub); goto jJeZC; Fzpu5: a6vMS: goto tLosx; lQa0p: return $result; goto gKwah; XLtbU: if (empty($this->data["\x69\144"])) { goto VKx3c; } goto mdQFV; GkcYO: $result = $this->toJson(0, self::MESSAGE_SUBTITLE_DELETE_FAIL); goto XLtbU; gKwah: } }
