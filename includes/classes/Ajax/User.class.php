<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-18 20:27:33              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*
Copyright @ 2020 - 2025 GDPlayer v4.7.1. https://gdplayer.to | https://t.me/gdplayerto
*/
 namespace GDPlayer\Ajax; use GDPlayer\Login; use GDPlayer\Model\{User as mUsers, ViewUser}; class User extends \GDPlayer\Ajax { protected Login $session; protected mUsers $mUsers; protected ViewUser $vwUser; protected $listColumns = ["\x6e\141\155\145", "\165\163\145\x72", "\x65\x6d\141\151\154", "\x73\x74\141\164\165\163", "\x61\x64\144\x65\144", "\165\160\x64\x61\164\145\144", "\162\x6f\154\x65", "\x76\151\144\145\x6f\x73", "\151\x64"]; protected const MESSAGE_EMAIL_EMPTY = "\105\155\141\x69\154\40\x61\144\144\162\x65\163\x73\x20\151\x73\x20\162\x65\161\165\x69\162\145\x64"; protected const MESSAGE_EMAIL_USED = "\x54\150\145\40\x65\155\x61\x69\154\40\x61\x64\144\162\145\x73\163\40\151\163\40\141\x6c\x72\145\x61\x64\x79\x20\x69\x6e\x20\165\x73\x65\x20\x62\x79\x20\141\x6e\x6f\x74\150\145\x72\40\165\163\x65\162"; protected const MESSAGE_EMAIL_UPDATE_SUCCESS = "\x54\150\x65\x20\145\155\141\x69\x6c\x20\141\x64\144\162\145\163\163\40\x68\141\x73\x20\142\x65\x65\x6e\x20\x73\x75\x63\x63\145\163\163\146\x75\154\x6c\x79\40\165\x70\x64\141\164\145\144\x2e\x20\120\x6c\145\x61\163\x65\x20\x72\x65\55\154\x6f\147\151\x6e"; protected const MESSAGE_EMAIL_UPDATE_FAIL = "\124\150\x65\x20\x65\x6d\141\151\x6c\40\141\x64\144\162\145\x73\163\x20\x66\141\x69\154\145\144\40\164\x6f\40\165\160\x64\x61\x74\145"; protected const MESSAGE_USERNAME_UPDATE_SUCCESS = "\124\x68\x65\x20\x75\x73\x65\x72\156\141\155\x65\40\150\x61\x73\40\142\x65\x65\156\40\x73\x75\x63\143\145\x73\163\x66\x75\x6c\154\x79\40\165\x70\x64\x61\164\145\144\56\x20\x50\x6c\x65\141\x73\145\x20\162\145\55\154\157\x67\151\156"; protected const MESSAGE_USERNAME_UPDATE_FAIL = "\x54\150\x65\40\165\163\145\x72\156\141\x6d\x65\x20\146\x61\x69\154\x65\x64\x20\x74\157\40\165\160\x64\141\164\x65"; protected const MESSAGE_DELETE_SUCCESS = "\124\x68\145\x20\x75\163\x65\162\x20\x68\x61\163\40\142\x65\x65\156\40\x73\165\143\143\145\163\163\146\165\154\x6c\171\40\x64\x65\x6c\145\164\x65\144"; protected const MESSAGE_DELETE_FAIL = "\x54\x68\145\x20\165\163\x65\162\40\x66\141\151\x6c\x65\144\x20\x74\157\40\x64\x65\154\x65\x74\145"; public function __construct() { goto e4u5h; jRUJ1: $this->mUsers = mUsers::getInstance(); goto rM_i5; e4u5h: session_write_close(); goto kh3oz; rM_i5: $this->vwUser = ViewUser::getInstance(); goto vBbT3; NpOTp: $this->session = new Login(); goto jRUJ1; z86Su: $this->files = $_FILES; goto zlvZH; zlvZH: $this->loadData(); goto NpOTp; kh3oz: $this->data = array_merge($_POST, $_GET); goto z86Su; vBbT3: } protected function createSearchQuery(string $search = '') { goto RUQpb; ml4Ix: $or = "\x4f\122"; goto QetbY; QetbY: $this->vwUser->setMultiCriteria([["\x65\x6d\x61\151\x6c", $search, $like], ["\165\163\x65\162", $search, $like, $or], ["\156\x61\155\145", $search, $like, $or]]); goto INBPw; KmdG5: if (empty($search)) { goto AH2br; } goto LXSz6; INBPw: AH2br: goto ykuse; LXSz6: $search = "\45" . $search . "\x25"; goto JTVhm; JTVhm: $like = "\x4c\111\113\x45"; goto ml4Ix; RUQpb: session_write_close(); goto KmdG5; ykuse: } public function list() { goto GCMQm; yPLEI: ztvh3: goto sLV1r; AowUF: if (!$list) { goto tMd93; } goto FBtWd; g1MD8: return $this->createJsonResponse($result); goto zc6b1; K1edf: $data = []; goto oebi3; FzF9d: $result = $this->toDataTablesJson(intval($qry["\144\162\141\x77"]), $data, $recordsTotal, $recordsFiltered); goto i618r; UMgIe: $this->createSearchQuery($qry["\x73\145\x61\162\x63\x68"]); goto CEZM5; oebi3: $this->createSearchQuery($qry["\163\x65\x61\x72\x63\150"]); goto owc3h; xH9EO: $list = $this->vwUser->get($this->listColumns); goto AowUF; qPMv2: $result = $this->toDataTablesJson(); goto UCCFs; UCCFs: j5NK6: goto g1MD8; owc3h: $this->vwUser->setLimit($qry["\x73\x74\x61\x72\164"], $qry["\x6c\x65\x6e\147\x74\x68"]); goto byosm; r8Ykf: $recordsTotal = $this->vwUser->getTotalRows(); goto UMgIe; sLV1r: tMd93: goto r8Ykf; aReTD: oFyoE: goto qPMv2; ODMBD: $qry = $this->extractDatatablesQry($this->data, $this->listColumns, "\x75\160\x64\x61\164\x65\x64", "\x64\145\163\143"); goto K1edf; CEZM5: $recordsFiltered = $this->vwUser->getNumRows(); goto FzF9d; byosm: $this->vwUser->setOrderBy($qry["\x6f\x72\144\145\x72\102\x79"], $qry["\157\162\x64\145\162\104\151\x72"]); goto xH9EO; nTY2R: if (!$this->isAdmin) { goto oFyoE; } goto ODMBD; i618r: goto j5NK6; goto aReTD; FBtWd: foreach ($list as $dt) { goto dOI0B; VsF7o: $newData["\x44\x54\x5f\x52\157\167\111\144"] = $dt["\151\144"]; goto Z8DbG; dOI0B: $newData = $dt; goto VsF7o; xMxdk: kosA3: goto MSX4e; Z8DbG: $newData["\x72\157\154\145"] = userRoles($dt["\162\157\x6c\x65"]); goto SQOvF; SQOvF: $data[] = $newData; goto xMxdk; MSX4e: } goto yPLEI; GCMQm: session_write_close(); goto nTY2R; zc6b1: } public function response() { session_write_close(); return $this->defaultResponse($this); } protected function delete() { goto Sw9B1; gmMmD: $result = $this->toJson(1, self::MESSAGE_DELETE_SUCCESS); goto EAyNf; J2KBX: if (!$deleted) { goto ngfLK; } goto gmMmD; PxuzV: $deleted = $this->mUsers->delete(); goto J2KBX; rT5DV: $result = $this->toJson(0, self::MESSAGE_DELETE_FAIL); goto Xdhq_; QMCrj: return $result; goto pVCi8; EAyNf: ngfLK: goto GYi9_; Sw9B1: session_write_close(); goto rT5DV; Zvuc7: $this->mUsers->setCriteria("\151\144", $this->data["\x69\144"]); goto PxuzV; Xdhq_: if (empty($this->data["\x69\144"])) { goto QyZU0; } goto Zvuc7; GYi9_: QyZU0: goto QMCrj; pVCi8: } protected function editEmail() { goto mvk9Z; R4aWA: Ora4Y: goto zveER; ICdKo: if ($this->mUsers->getNumRows() > 0) { goto giKQk; } goto UEu4q; On39g: if ($this->currentUser["\165\x73\145\x72"] === "\144\145\155\157") { goto nvZPh; } goto ZbIem; mvk9Z: session_write_close(); goto On39g; atUNv: goto Ora4Y; goto h7z0P; tBHhj: $this->mUsers->setCriteria("\x69\144", $this->currentUser["\151\x64"]); goto xtyV6; bX6Tu: tYxx1: goto Oq1nx; UEu4q: $result = $this->toJson(0, self::MESSAGE_EMAIL_UPDATE_FAIL); goto tBHhj; G5wpj: goto Ora4Y; goto bX6Tu; zUF7S: UhUvh: goto kxumo; kxumo: goto wrSay; goto NRBbG; ZbIem: if (empty($this->data["\145\155\141\151\154"]) || !validateEmail($this->data["\x65\155\141\151\154"])) { goto tYxx1; } goto szgEd; NRBbG: giKQk: goto x1GR2; f4AE9: if (!$updated) { goto UhUvh; } goto WKwlB; Oq1nx: $result = $this->toJson(0, self::MESSAGE_EMAIL_EMPTY); goto R4aWA; S2iIV: $result = $this->notAuthorize(); goto G5wpj; xCX21: $this->session->logout(); goto zUF7S; xtyV6: $updated = $this->mUsers->update(array("\145\x6d\141\x69\x6c" => $this->data["\145\x6d\141\x69\x6c"], "\165\160\x64\141\x74\145\144" => time())); goto f4AE9; szgEd: $this->mUsers->setMultiCriteria([["\x69\x64", $this->currentUser["\151\144"], "\74\x3e"], ["\x65\x6d\141\x69\154", $this->data["\x65\x6d\x61\x69\x6c"], "\x3d", "\101\x4e\104"]]); goto ICdKo; h7z0P: nvZPh: goto S2iIV; x1GR2: $result = $this->toJson(0, self::MESSAGE_EMAIL_USED); goto CJFsy; zveER: return $result; goto NsDYw; WKwlB: $result = $this->toJson(1, self::MESSAGE_EMAIL_UPDATE_SUCCESS); goto xCX21; CJFsy: wrSay: goto atUNv; NsDYw: } protected function editUsername() { goto nXM5S; nvj1j: $result = $this->notAuthorize(); goto ktAvf; g6ABk: UcJnw: goto FHAd7; S8ewO: $result = $this->toJson(1, self::MESSAGE_USERNAME_UPDATE_SUCCESS); goto katCD; Hp4NK: $this->mUsers->setMultiCriteria([["\x69\x64", $this->currentUser["\x69\x64"], "\x3c\x3e"], ["\x75\163\x65\x72", $this->data["\x75\x73\x65\x72"], "\75", "\101\116\x44"]]); goto jaDTp; a1e7a: ft33u: goto aXDYs; IEd88: if (empty($this->data["\x75\163\145\x72"])) { goto FF4UK; } goto Hp4NK; MJhsQ: $updated = $this->mUsers->update(array("\165\x73\x65\162" => $this->data["\x75\x73\145\162"], "\x75\x70\144\141\164\145\x64" => time())); goto lkcaP; jaDTp: if ($this->mUsers->getNumRows() > 0) { goto UcJnw; } goto SkoPn; am75G: goto vMm3v; goto ydTOL; ydTOL: dYfcm: goto nvj1j; katCD: $this->session->logout(); goto a1e7a; nXM5S: session_write_close(); goto ZTJSA; N_C44: FF4UK: goto JnJR2; ktAvf: goto vMm3v; goto N_C44; FHAd7: $result = $this->toJson(0, self::MESSAGE_EMAIL_USED); goto QwrN4; ZTJSA: if ($this->currentUser["\x75\x73\x65\162"] === "\x64\x65\x6d\x6f") { goto dYfcm; } goto IEd88; aXDYs: goto Gkyjf; goto g6ABk; SkoPn: $result = $this->toJson(0, self::MESSAGE_USERNAME_UPDATE_FAIL); goto cFD79; u_vrb: return $result; goto sCn2s; cFD79: $this->mUsers->setCriteria("\x69\x64", $this->currentUser["\151\144"]); goto MJhsQ; JnJR2: $result = $this->toJson(0, self::MESSAGE_EMAIL_EMPTY); goto f9gS9; QwrN4: Gkyjf: goto am75G; lkcaP: if (!$updated) { goto ft33u; } goto S8ewO; f9gS9: vMm3v: goto u_vrb; sCn2s: } }
