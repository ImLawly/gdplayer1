<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-18 20:27:36              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*
Copyright @ 2020 - 2025 GDPlayer v4.7.1. https://gdplayer.to | https://t.me/gdplayerto
*/
 namespace GDPlayer\Model; use GDPlayer\Subscene; class SubtitleManager extends \GDPlayer\Model { use \GDPlayer\ModelSingleton; protected $table = "\164\x62\137\163\165\x62\x74\x69\x74\x6c\145\137\x6d\x61\156\x61\147\145\162"; protected $fields = ["\151\x64", "\146\151\x6c\x65\137\x6e\141\155\145", "\146\151\x6c\x65\x5f\x73\x69\x7a\145", "\x66\151\154\x65\x5f\x74\171\x70\145", "\154\x61\156\x67\x75\x61\147\145", "\x61\144\144\x65\144", "\165\151\144", "\150\x6f\x73\x74", "\x75\x70\144\x61\x74\x65\x64"]; protected $primaryKey = "\x69\144"; private $defaultSubtitleLanguage = "\x55\x6e\153\x6e\157\167\x6e"; private function identifyLanguageFromFileName(string $fileName = '') { goto JiOG3; RQyvm: $languages = languageList(); goto T2CYk; JiOG3: session_write_close(); goto RQyvm; atKRJ: return $this->defaultSubtitleLanguage; goto JbcEe; T2CYk: $ex = array_map("\164\162\151\x6d", array_pad(explode("\56", strtolower($fileName)), 2, '')); goto U__M6; jluCp: lZ_zC: goto atKRJ; U__M6: foreach ($languages as $code => $name) { goto qOxyJ; M27HW: v3RoB: goto awf6_; qOxyJ: if (!($ex[0] === $code || $ex[1] === $code || $ex[0] === $name || $ex[1] === $name)) { goto TCo73; } goto T3VG_; Y7Hhw: TCo73: goto M27HW; T3VG_: return $name; goto Y7Hhw; awf6_: } goto jluCp; JbcEe: } private function extractLanguageUrlFromUrl(string $url = '') { goto zK771; YYPNE: return $result; goto OBbOl; yztV8: $result = ["\146\151\154\x65" => $ex[0], "\x6c\x61\x62\x65\154" => $ex[1]]; goto cussu; ae65e: GRQ1i: goto qWRje; knXKw: if (!empty($ex[1])) { goto GRQ1i; } goto o58qr; cussu: goto z_wvy; goto ae65e; o58qr: goto z_wvy; goto erE36; qWRje: $result = ["\x66\151\x6c\x65" => $ex[1], "\x6c\x61\x62\x65\154" => $ex[0]]; goto xR1vP; xR1vP: z_wvy: goto YYPNE; zK771: session_write_close(); goto GS1sp; bh2KZ: $ex = array_map("\164\162\151\155", array_pad(explode("\174", $url), 2, '')); goto J6Sok; GS1sp: $result = []; goto bh2KZ; J6Sok: if (!empty($ex[0]) && validateUrl($ex[0])) { goto aE83u; } goto knXKw; erE36: aE83u: goto yztV8; OBbOl: } public function saveMultipleSubtitlesUrls() { goto Dn3q7; Dn3q7: session_write_close(); goto iowkk; MCoDI: $urls = array_values(array_filter($urls)); goto BV5KI; IzlWR: $urls = explode("\xa", str_replace(["\15", "\x9"], '', $_POST["\155\165\x6c\164\151\123\x75\x62\125\x72\x6c\163"])); goto MCoDI; RCd_C: return $result; goto saAGe; NwSBr: TYLcW: goto jInmY; iowkk: $result = []; goto PCw9N; PCw9N: if (empty($_POST["\x6d\165\154\164\x69\x53\x75\x62\125\162\154\163"])) { goto kQYHM; } goto IzlWR; BV5KI: foreach ($urls as $url) { goto DLKMk; JvWUO: $result[] = $customLabelUrl; goto vMj1p; p0Tj1: if (empty($customLabelUrl)) { goto Nyjkx; } goto JvWUO; s1G1r: $customLabelUrl = $this->extractLanguageUrlFromUrl($url); goto p0Tj1; kEDwR: r5lXY: goto yPYBB; IDU7a: $result[] = ["\146\x69\154\x65" => trim($url), "\154\141\142\x65\154" => $language]; goto BtuvG; dSLQS: $language = $this->identifyLanguageFromFileName($fileName); goto IDU7a; DLKMk: if (strpos($url, "\174") === false) { goto pkD71; } goto s1G1r; Ko8h5: $fileName = pathinfo(parse_url($url, PHP_URL_PATH), PATHINFO_FILENAME); goto dSLQS; BtuvG: bJjjH: goto kEDwR; Kd1Hp: goto bJjjH; goto uL521; vMj1p: Nyjkx: goto Kd1Hp; uL521: pkD71: goto Ko8h5; yPYBB: } goto NwSBr; jInmY: kQYHM: goto RCd_C; saAGe: } public function uploadMultipleSubtitlesFiles() { goto c8HSH; LcoHC: return $result; goto HKLz8; c8rUQ: if (empty($_FILES["\x6d\165\x6c\164\x69\123\165\142\106\151\154\x65\163"]["\x74\x6d\160\x5f\x6e\x61\x6d\145"][0])) { goto b6C_O; } goto JqnKJ; DJ8gh: foreach ($multiSubFiles as $files) { goto aIvyQ; GwQEM: if (!$uploaded) { goto d_4gx; } goto Yp8dh; PUrTa: $uploaded = $this->uploadSubtitle($files, $language); goto GwQEM; Yp8dh: $result[] = $uploaded; goto maglQ; MDSE3: Mhv87: goto My_8b; maglQ: d_4gx: goto MDSE3; aIvyQ: $language = $this->identifyLanguageFromFileName($files["\x6e\x61\x6d\145"]); goto PUrTa; My_8b: } goto R0JDE; bQ2x0: b6C_O: goto LcoHC; SyvBv: $result = []; goto c8rUQ; c8HSH: session_write_close(); goto SyvBv; R0JDE: SNMY_: goto bQ2x0; JqnKJ: $multiSubFiles = repairMultipleFiles($_FILES["\155\165\154\164\x69\123\165\x62\x46\151\x6c\x65\163"]); goto DJ8gh; HKLz8: } public function saveMultipleSubtitlesUrls2() { goto Ng6Pa; Fx2Cv: if (empty($_POST["\163\165\x62\x2d\x75\x72\154"])) { goto kyTu8; } goto n3XXb; mbp5y: $result = []; goto Fx2Cv; jtPhE: kyTu8: goto bBoU1; n3XXb: $subscene = new Subscene(); goto VzSqS; Ng6Pa: session_write_close(); goto mbp5y; VzSqS: $subtitles = array_values(array_filter($_POST["\163\x75\142\55\165\162\154"])); goto YXriM; YXriM: foreach ($subtitles as $i => $url) { goto VH2AU; eYZCX: qDpXk: goto EzGzX; EzGzX: $result[] = ["\146\x69\154\145" => $url, "\x6c\141\x62\145\x6c" => $_POST["\154\141\156\147\55\165\162\x6c"][$i]]; goto LODVU; YttHr: $file = $subscene->file(); goto tdGo0; LODVU: CuwUh: goto CLl6Q; bMHlK: $url = strtr($file, [normalizeSeparator(BASE_DIR) => BASE_URL]); goto PrOpf; PrOpf: c4b8i: goto eYZCX; VH2AU: if (!(strpos($url, "\x73\x75\142\55\163\x63\x65\x6e\x65\x2e\x63\157\x6d") !== false)) { goto qDpXk; } goto zFTsU; tdGo0: if (!$file) { goto c4b8i; } goto bMHlK; zFTsU: $subscene->setUrl($url); goto YttHr; CLl6Q: } goto ajevc; bBoU1: return $result; goto NuZeQ; ajevc: X2Yw6: goto jtPhE; NuZeQ: } public function uploadMultipleSubtitlesFiles2() { goto o40Yr; qquk1: $subFiles = repairMultipleFiles($_FILES["\163\165\x62\x2d\146\151\x6c\x65"]); goto eFSoK; iyi8J: $result = []; goto Mu8be; gOYRL: return $result; goto p7fWn; Mu8be: if (empty($_FILES["\163\165\x62\x2d\x66\151\x6c\x65"]["\x74\x6d\x70\137\156\x61\155\x65"][0])) { goto xBh5c; } goto qquk1; EER1u: GaU9W: goto PPDa1; PPDa1: xBh5c: goto gOYRL; o40Yr: session_write_close(); goto iyi8J; eFSoK: foreach ($subFiles as $i => $files) { goto clQi8; clQi8: $language = $_POST["\x6c\x61\156\x67\55\x66\x69\x6c\145"][$i] ?? $this->defaultSubtitleLanguage; goto GayV0; GayV0: $uploaded = $this->uploadSubtitle($files, $language); goto qEP05; bxuzg: et6qY: goto JvX0F; JvX0F: z1_XT: goto TWm_Y; GhHSJ: $result[] = $uploaded; goto bxuzg; qEP05: if (!$uploaded) { goto et6qY; } goto GhHSJ; TWm_Y: } goto EER1u; p7fWn: } private function uploadSubtitle(array $files, string $language) { goto X1X5H; nW9gv: $file = uploadSubtitle($files); goto Zbz0s; Fs1NJ: $time = time(); goto nW9gv; MwmnH: $result = false; goto Fs1NJ; X1X5H: session_write_close(); goto MwmnH; Zbz0s: if (!(!empty($language) && file_exists($file))) { goto F4pL3; } goto Fu0b4; gdSRL: return $result; goto Q1Rlk; kUHoQ: $result = ["\x66\151\x6c\x65" => strtr($file, [normalizeSeparator(BASE_DIR) => BASE_URL]), "\154\x61\x62\x65\154" => $language]; goto q7Jcw; q7Jcw: F4pL3: goto gdSRL; Fu0b4: $this->insert(["\x66\151\x6c\x65\x5f\156\x61\155\x65" => $files["\156\x61\x6d\145"], "\x66\x69\154\145\x5f\164\x79\160\x65" => $files["\164\171\160\145"], "\146\x69\x6c\x65\x5f\x73\151\172\145" => $files["\x73\151\172\145"], "\154\141\156\147\x75\x61\x67\145" => $language, "\x61\x64\144\x65\x64" => $time, "\x75\x69\x64" => publicUserLogin(), "\x75\160\x64\141\x74\145\x64" => $time, "\x68\x6f\x73\164" => BASE_URL]); goto kUHoQ; Q1Rlk: } public function getUpdateQueries() { goto hpIny; dX0EC: return ["\x41\x4c\x54\105\122\40\x54\101\102\114\105\x20\140\164\142\x5f\163\x75\142\164\x69\x74\154\145\137\155\141\156\x61\147\145\162\x60\40\101\x44\104\x20\103\x4f\114\125\x4d\x4e\40\140\x75\x70\144\141\x74\x65\144\140\40\111\116\x54\x28\x31\65\x29\40\116\x4f\x54\x20\x4e\x55\x4c\114\x20\104\x45\106\101\x55\114\124\40\x22\60\42\73", "\101\114\124\x45\x52\40\x54\x41\x42\114\105\x20\x60\x74\x62\137\163\x75\142\x74\151\x74\154\x65\x5f\155\141\x6e\141\147\x65\162\140\x20\115\117\x44\111\x46\131\x20\103\x4f\x4c\x55\115\x4e\x20\x60\x69\x64\140\x20\x42\x49\x47\x49\116\x54\50\62\60\51\x20\x4e\x4f\x54\40\116\x55\114\x4c\x20\x41\125\124\x4f\137\111\116\x43\x52\x45\x4d\105\116\x54\x3b", "\x41\114\x54\105\x52\x20\x54\x41\x42\114\105\40\140\164\x62\x5f\163\165\x62\x74\x69\x74\x6c\145\x5f\155\x61\x6e\x61\x67\x65\x72\140\40\x4d\x4f\x44\111\106\x59\40\x43\117\x4c\125\x4d\116\x20\x60\x6c\141\x6e\x67\x75\x61\x67\145\140\x20\x56\101\x52\x43\110\x41\x52\x28\x35\x30\51\x20\116\117\x54\x20\116\x55\x4c\x4c\73", "\x41\114\x54\x45\122\40\x54\x41\102\x4c\x45\40\140\x74\142\x5f\163\x75\x62\x74\x69\x74\x6c\x65\x5f\x6d\141\156\141\147\145\162\x60\40\x4d\117\104\111\x46\x59\x20\103\x4f\114\125\x4d\116\x20\x60\150\x6f\163\x74\140\x20\x56\x41\x52\x43\110\101\x52\50\61\x39\x31\x29\x20\x4e\117\124\x20\x4e\125\114\114\73", "\x41\x4c\124\x45\x52\40\x54\101\x42\114\x45\40\140\x74\x62\137\163\x75\x62\164\151\164\154\x65\x5f\155\141\x6e\141\x67\x65\x72\x60\x20\115\117\x44\x49\x46\x59\x20\x43\117\x4c\x55\x4d\116\x20\140\x66\x69\x6c\x65\x5f\x6e\x61\x6d\x65\140\x20\x56\x41\122\103\110\x41\122\50\x31\x39\61\x29\40\x4e\x4f\124\x20\x4e\x55\114\x4c\73", "\x55\120\104\x41\124\x45\40\140\x74\x62\x5f\x73\165\x62\x74\x69\x74\x6c\x65\x5f\x6d\141\x6e\141\147\x65\x72\140\x20\123\x45\124\40\140\x6c\x61\x6e\x67\165\141\x67\x65\140\75\x22\42\x20\x57\x48\105\122\105\x20\140\x6c\141\x6e\147\x75\141\x67\x65\140\x20\111\123\40\x4e\125\x4c\x4c\73", "\x44\x45\114\105\124\x45\x20\x74\61\40\106\x52\x4f\115\40\140\164\x62\x5f\163\165\x62\164\151\x74\x6c\x65\x5f\155\141\156\141\x67\x65\162\x60\40\x74\x31\x20\x4a\117\111\116\x20\x60\164\142\x5f\x73\165\142\164\x69\x74\154\145\137\155\x61\156\141\x67\145\x72\140\40\x74\x32\40\117\x4e\x20\164\x31\x2e\x60\x66\x69\154\x65\137\156\141\x6d\x65\x60\x20\75\40\164\x32\x2e\140\x66\151\x6c\x65\137\156\141\x6d\x65\x60\40\127\x48\105\x52\105\40\164\61\x2e\x60\x69\x64\x60\40\76\40\x74\x32\x2e\140\x69\x64\x60\73"]; goto ujeOa; hI98G: $this->removeAllIndexes(); goto dX0EC; hpIny: session_write_close(); goto hI98G; ujeOa: } }
