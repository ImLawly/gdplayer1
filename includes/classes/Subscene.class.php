<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-18 20:27:38              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*
Copyright @ 2020 - 2025 GDPlayer v4.7.1. https://gdplayer.to | https://t.me/gdplayerto
*/
 namespace GDPlayer; use KubAT\PhpSimple\HtmlDomParser; use GDPlayer\Helper; class Subscene { protected $baseUrl = "\150\x74\164\160\163\72\57\x2f\x73\165\142\x2d\x73\x63\x65\156\145\56\x63\157\155\57"; protected $subsceneDir; protected $subsceneUrl; public function __construct(string $url = '') { goto tVrh5; UPa5M: $this->subsceneDir = normalizeSeparator(SUBTITLES_PATH . "\163\x75\x62\x73\143\x65\156\145\57"); goto Pf0RZ; tVrh5: session_write_close(); goto UPa5M; VJDD_: $this->setUrl($url); goto GDuV_; Pf0RZ: createDir($this->subsceneDir); goto VJDD_; GDuV_: } public function setUrl(string $url = '') { session_write_close(); $this->subsceneUrl = $url; } public function getDownloadUrl() { goto q_R0s; JEGQx: $err = curl_error($ch); goto Sm9aY; agqjk: curl_setopt($ch, CURLOPT_PROXY, $proxy["\x70\x72\157\x78\x79"]); goto WUT0I; pHP2O: createErrorLog([__FILE__, __FUNCTION__, $this->subsceneUrl, $status, $err]); goto nkdim; Cw99s: $response = curl_exec($ch); goto bIMW_; Sm9aY: curl_close($ch); goto bQgD_; kA49f: return $this->getDownloadUrl(); goto eo4ZH; CwIaW: goto hiOzo; goto VTN1D; J_pHO: xY788: goto CwIaW; pkz5K: $ch = Helper::getCurlDefaultConfig(curl_init()); goto o4wWr; u0lFq: $result = false; goto pkz5K; zf3vr: if (empty($btnDL->href)) { goto xY788; } goto NEAUE; NEAUE: $result = rtrim($this->baseUrl, SLASH) . $btnDL->href; goto J_pHO; sxPam: curl_setopt($ch, CURLOPT_REFERER, $this->baseUrl); goto wFHbo; nkdim: goto hiOzo; goto MWG3q; sOU7W: $dom = HtmlDomParser::str_get_html($response); goto TwOTC; VTN1D: UBWhZ: goto kA49f; ucoIN: if (!$proxy) { goto Obh0n; } goto agqjk; gDR_b: $proxy = proxyRotator(); goto ucoIN; TwOTC: $btnDL = $dom->find("\x2e\x64\x6f\167\x6e\x6c\x6f\x61\144\40\141\56\142\x75\164\x74\157\156", 0); goto zf3vr; pv0H3: curl_setopt($ch, CURLOPT_PROXYUSERPWD, $proxy["\165\x73\162\160\x77\x64"]); goto Qj0t7; Qj0t7: Obh0n: goto Cw99s; o4wWr: curl_setopt($ch, CURLOPT_URL, $this->subsceneUrl); goto sxPam; q_R0s: session_write_close(); goto u0lFq; ejNC8: return $result; goto olZro; bQgD_: if (empty($err)) { goto UuBno; } goto j3Lwg; bIMW_: $status = curl_getinfo($ch, CURLINFO_HTTP_CODE); goto JEGQx; MWG3q: UuBno: goto sOU7W; j3Lwg: if ($proxy) { goto UBWhZ; } goto pHP2O; wFHbo: curl_setopt($ch, CURLOPT_USERAGENT, USER_AGENT); goto gDR_b; WUT0I: curl_setopt($ch, CURLOPT_PROXYTYPE, $proxy["\x74\x79\160\x65"]); goto pv0H3; eo4ZH: hiOzo: goto ejNC8; olZro: } private function createFileLocation(string $url = '') : string { goto x6xFU; ASaX9: UgUgu: goto Rg2uL; cF_S4: $path = explode("\x73\x75\x62\164\151\164\x6c\x65\163\57", parse_url($url, PHP_URL_PATH)); goto Pw8Pf; tYp4B: Ub4lt: goto yUQce; Y3lGg: $subtitleFile = $this->subsceneDir . $name . "\x2d" . randomString(5) . "\56\x7a\151\160"; goto ASaX9; HAqHS: $subtitleFile = $this->createFileLocation($url); goto O5438; Rg2uL: if (!file_exists($subtitleFile)) { goto Ub4lt; } goto HAqHS; yUQce: return $subtitleFile; goto AUq2r; Pw8Pf: $name = substr(strtr(trim(end($path), SLASH), [SLASH => "\55"]), 0, 200); goto Y3lGg; O5438: goto UgUgu; goto tYp4B; x6xFU: session_write_close(); goto cF_S4; AUq2r: } private function saveToFile(string $file = '', string $content = '') { goto QAqr_; dG4fC: $result = normalizeSeparator($file); goto S3I5o; nvUCa: $result = false; goto dj5oI; S3I5o: TBd3f: goto hvqHq; dj5oI: $maxSize = 2 * MEGABYTES; goto POXUs; A4A4q: return $result; goto lksci; POXUs: if (!($maxSize >= strlen($content) && !isPHPFile($content))) { goto XSq2U; } goto EsFiV; tImCV: if (!$saved) { goto TBd3f; } goto dG4fC; QAqr_: session_write_close(); goto nvUCa; EsFiV: $saved = createFile($file, $content); goto tImCV; hvqHq: XSq2U: goto A4A4q; lksci: } private function extractZipFile(string $file = '') { goto o0dAo; Z4cm1: goto PiLwo; goto pnHWM; jBCMB: stream_set_blocking($fp, false); goto pZI7u; H3DyG: return $result; goto hoQs0; pZI7u: $content = stream_get_contents($fp); goto ufNWR; o0dAo: session_write_close(); goto a7Drz; BTZLK: jxvGk: goto n9Muc; ueTuo: unlink($file); goto kKX1D; VHW_H: if (!(in_array($ext, $allowExt) && strpos($filename, "\x2e\x2e\x2f") === false && substr($filename, 0, 1) !== SLASH && !is_executable($filename))) { goto jxvGk; } goto p_7bO; RUzCb: $i = 0; goto c8Ean; vNArF: $ext = pathinfo($filename, PATHINFO_EXTENSION); goto VHW_H; Qi768: if (!($open === true)) { goto sUC56; } goto Zgo4Z; T3W3o: $zip = new \ZipArchive(); goto ZOlAL; NRXnQ: bxd47: goto H3DyG; pnHWM: DOcTI: goto cCIin; PQxUm: $result = $savedFile; goto ueTuo; pUECF: $i++; goto Z4cm1; ef3P6: $savedFile = false; goto T3W3o; zXGqI: $saveToFile = strtr($outputDir, ["\x2f\163\x75\x62\163\143\145\x6e\x65" => '']) . "\x2e" . $ext; goto rtiaz; Mh_Mz: $filename = $zip->getNameIndex($i); goto vNArF; n9Muc: AgCuB: goto pUECF; ufNWR: fclose($fp); goto zXGqI; ZOlAL: $open = $zip->open($file); goto Qi768; kKX1D: deleteDir($outputDir); goto NRXnQ; cCIin: $zip->close(); goto M81o3; oFH2u: createDir($outputDir); goto Aahwf; Aahwf: $result = false; goto ef3P6; p_7bO: $fp = $zip->getStream($filename); goto jBCMB; bzkpg: return false; goto Fw0AH; Zgo4Z: $allowExt = ["\163\x72\164", "\166\x74\164", "\141\163\x73", "\163\165\x62", "\163\164\x6c", "\x64\146\x78\x70", "\164\164\x6d\x6c", "\163\142\x76", "\x74\x78\x74"]; goto RUzCb; bJBn4: goto DOcTI; goto BTZLK; M81o3: sUC56: goto Ngojw; Fw0AH: dfimx: goto xpGx8; Ngojw: if (!$savedFile) { goto bxd47; } goto PQxUm; rtiaz: $savedFile = $this->saveToFile($saveToFile, $content); goto bJBn4; c8Ean: PiLwo: goto y8D13; xpGx8: $outputDir = normalizeSeparator(dirname($file)) . SLASH . pathinfo($file, PATHINFO_FILENAME); goto oFH2u; a7Drz: if (file_exists($file)) { goto dfimx; } goto bzkpg; y8D13: if (!($i < $zip->numFiles)) { goto DOcTI; } goto Mh_Mz; hoQs0: } private function download(string $url = '', string $outputFile = '') { goto CTw3n; pZAd7: curl_setopt($ch, CURLOPT_USERAGENT, USER_AGENT); goto fO6Gk; yXHB1: $status = curl_getinfo($ch, CURLINFO_HTTP_CODE); goto SccdG; SccdG: $err = curl_error($ch); goto E77yn; W2S4T: goto lHIj0; goto rqWx6; MH0lb: $ch = Helper::getCurlDefaultConfig(curl_init()); goto QrSFR; eN2TJ: curl_setopt($ch, CURLOPT_PROXY, $proxy["\x70\162\157\170\x79"]); goto bY4S4; vqN9c: createErrorLog([__FILE__, __FUNCTION__, $this->subsceneUrl, $status, $err]); goto mnkfD; mnHiE: createErrorLog([__FILE__, __FUNCTION__, $this->subsceneUrl, $outputFile]); goto UGMKR; bY4S4: curl_setopt($ch, CURLOPT_PROXYTYPE, $proxy["\164\171\160\145"]); goto NPmJD; xEwku: curl_setopt($ch, CURLOPT_BUFFERSIZE, SMALL_BUFFER_SIZE); goto GkZSn; mnkfD: goto lHIj0; goto YwEge; CTw3n: session_write_close(); goto F7FWv; tJjeY: odgSI: goto xUt7A; NPmJD: curl_setopt($ch, CURLOPT_PROXYUSERPWD, $proxy["\x75\163\x72\160\x77\x64"]); goto tJjeY; Ozfxo: $result = $this->extractZipFile($outputFile); goto W2S4T; Ed3PU: YiGPu: goto gOOUB; GkZSn: curl_setopt($ch, CURLOPT_RETURNTRANSFER, false); goto KZnpX; mme4T: if ($proxy) { goto PM_MK; } goto vqN9c; gOOUB: return $result; goto ICwNy; KZnpX: curl_setopt($ch, CURLOPT_REFERER, $this->baseUrl); goto pZAd7; QKzse: if (!$proxy) { goto odgSI; } goto eN2TJ; VzzDy: if ($fp) { goto xRJ17; } goto mnHiE; QrSFR: curl_setopt($ch, CURLOPT_URL, $url); goto xEwku; DdpAv: curl_exec($ch); goto yXHB1; jm8ZP: lHIj0: goto Ed3PU; DJygu: fclose($fp); goto v4ta8; fO6Gk: $proxy = proxyRotator(); goto QKzse; v4ta8: if (empty($err)) { goto E42RK; } goto mme4T; lG81q: xRJ17: goto MH0lb; YwEge: E42RK: goto Ozfxo; F7FWv: $result = false; goto vGixr; xUt7A: curl_setopt($ch, CURLOPT_FILE, $fp); goto DdpAv; UGMKR: goto YiGPu; goto lG81q; E77yn: curl_close($ch); goto DJygu; vGixr: $fp = @fopen($outputFile, "\x77\x62"); goto VzzDy; rqWx6: PM_MK: goto PSBwN; PSBwN: return $this->download($url, $outputFile); goto jm8ZP; ICwNy: } public function file() { goto m54Ot; UJsEc: $result = false; goto zM0Om; hKVH4: mEytR: goto YGSrt; zM0Om: $url = $this->getDownloadUrl(); goto V0Swy; YGSrt: cpUET: goto ibUyL; nKDll: $result = $this->download($url, $subsceneFile); goto hKVH4; ibUyL: return $result; goto VjDup; r685g: $subsceneFile = $this->createFileLocation($url); goto ssmqZ; V0Swy: if (!$url) { goto cpUET; } goto r685g; ssmqZ: if (!$subsceneFile) { goto mEytR; } goto nKDll; m54Ot: session_write_close(); goto UJsEc; VjDup: } }
