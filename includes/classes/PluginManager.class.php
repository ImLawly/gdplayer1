<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-18 20:27:37              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*
Copyright @ 2020 - 2025 GDPlayer v4.7.1. https://gdplayer.to | https://t.me/gdplayerto
*/
 namespace GDPlayer; use GDPlayer\Views; use GDPlayer\Model\Plugins; class PluginManager { private static array $headScripts = []; private static array $footerScripts = []; public static function init(bool $isBackend = false) { goto Z1BcB; GrS3b: $md = Plugins::getInstance(); goto BDe_0; Z1BcB: session_write_close(); goto GrS3b; ZWB_F: HORhW: goto ANESV; HM7FL: $plugins = $md->get(["\x66\x6f\x6c\x64\145\162"]); goto I7nHu; BDe_0: $md->setCriteria("\x69\x73\x5f\x61\x63\x74\x69\x76\x65", 1); goto HM7FL; I7nHu: foreach ($plugins as $plugin) { goto JrGbe; IozHt: self::includePhpFiles("{$basePath}\x2f\146\x72\x6f\156\x74\145\x6e\144"); goto vGUAU; mJtOA: self::includePhpFiles("{$basePath}\x2f\142\x61\x63\153\x65\x6e\144"); goto zQfB_; jhyDT: if (!$isBackend && is_dir("{$basePath}\57\x66\162\x6f\156\164\145\156\x64")) { goto gMokT; } goto K9YtV; K9YtV: goto uPQjk; goto aN2sk; vGUAU: uPQjk: goto uw9xV; WNR9g: Pi3Ep: goto Gc28u; Gc28u: if (!file_exists("{$basePath}\57\x66\165\156\143\x74\151\157\x6e\163\56\160\150\x70")) { goto bPX0D; } goto nf4jE; uw9xV: taOx0: goto adx8Q; kHDt0: if ($isBackend && is_dir("{$basePath}\57\x62\x61\143\x6b\x65\x6e\x64")) { goto I1EI3; } goto jhyDT; u2pMM: if (!is_dir("{$basePath}\57\x63\x6c\x61\x73\x73\x65\x73")) { goto Pi3Ep; } goto BnHUL; pXS1r: bPX0D: goto kHDt0; ipPjw: gMokT: goto IozHt; nf4jE: Views::includeFile("{$basePath}\57\146\165\156\x63\x74\151\x6f\156\163\x2e\x70\150\x70"); goto pXS1r; JrGbe: $basePath = BASE_DIR . "\x2f\160\154\x75\147\x69\156\163\x2f{$plugin["\x66\x6f\154\x64\x65\x72"]}"; goto u2pMM; aN2sk: I1EI3: goto mJtOA; zQfB_: goto uPQjk; goto ipPjw; BnHUL: self::registerClassAutoload($plugin["\146\x6f\x6c\x64\x65\162"], "{$basePath}\57\x63\x6c\141\x73\163\x65\163"); goto WNR9g; adx8Q: } goto ZWB_F; ANESV: } private static function registerClassAutoload(string $namespace, string $baseDir) { session_write_close(); spl_autoload_register(function ($class) use($namespace, $baseDir) { goto B_r2N; LCR4T: $relativeClass = substr($class, strlen($prefix)); goto xKNcv; G7GqR: if (!(strpos($class, $prefix) === 0)) { goto xmxl1; } goto LCR4T; P4626: Views::requireFile($file); goto Uzm39; B_r2N: $prefix = ucfirst($namespace) . "\x5c"; goto G7GqR; Uzm39: Mpz0T: goto rIIVg; xKNcv: $file = $baseDir . "\57" . str_replace("\134", "\x2f", $relativeClass) . "\x2e\x70\150\160"; goto mAIJH; rIIVg: xmxl1: goto KwSXt; mAIJH: if (!file_exists($file)) { goto Mpz0T; } goto P4626; KwSXt: }); } private static function includePhpFiles(string $dir) { goto OHhpt; OHhpt: session_write_close(); goto oVv4x; fn0sG: XrTcb: goto lRu5l; oVv4x: foreach (glob($dir . "\57\x2a\x2e\160\x68\160") as $file) { Views::includeFile($file); xJMYe: } goto fn0sG; lRu5l: } public static function loadScript(string $location, callable $callback, array $pages = ["\x2a"]) { goto AKmdW; np33U: QQ9ht: goto Bs3lL; uLNlO: hcBwc: goto Sn4Ki; AKmdW: session_write_close(); goto x_x10; KE3RO: self::$headScripts[] = [$callback, $pages]; goto E4xKs; iT_71: if ($location === "\146\x6f\157\164\145\162") { goto QQ9ht; } goto HGInv; HGInv: goto hcBwc; goto RF3jq; Bs3lL: self::$footerScripts[] = [$callback, $pages]; goto uLNlO; E4xKs: goto hcBwc; goto np33U; RF3jq: TCkHl: goto KE3RO; x_x10: if ($location === "\150\x65\141\144") { goto TCkHl; } goto iT_71; Sn4Ki: } public static function renderScripts(string $location, string $page = '') { goto iAjln; BmjVf: $scripts = $location === "\x68\145\141\x64" ? self::$headScripts : self::$footerScripts; goto n0stV; xFUl4: f0rHZ: goto KCDrj; iAjln: session_write_close(); goto BmjVf; n0stV: foreach ($scripts as [$callback, $pages]) { goto Kq14x; Q3hoU: IrR4O: goto OCiGh; P_FV9: call_user_func($callback); goto Q3hoU; Kq14x: if (!(in_array("\52", $pages) || in_array($page, $pages))) { goto IrR4O; } goto P_FV9; OCiGh: fnZ2l: goto pDA4G; pDA4G: } goto xFUl4; KCDrj: } public static function dispatchPluginPage() : bool { goto BlB_P; Y2FmF: Ub7Ym: goto tR2DU; BlB_P: session_write_close(); goto efV7_; yA4d3: UnjXZ: goto tkBCq; o1BWk: if (empty($segments[$pKey + 1])) { goto ASkj8; } goto FggLj; nuPTX: $pKey = array_search("\x70", $segments); goto v_WMG; LMR0d: $viewPath = PLUGINS_PATH . "{$plugin}\x2f\x76\x69\145\167\163\x2f" . ($adminKey ? "\x62\x61\x63\x6b\145\x6e\144" : "\146\162\157\156\x74\145\156\144") . "\x2f{$page}\x2e\x70\150\160"; goto J0dla; MXHJk: goto Ge3U6; goto RTyFm; Li7FP: return true; goto JFmLE; YnnQK: goto CKZ5Y; goto yA4d3; AGttX: $adminKey = array_search(ADMIN_DIR, $segments); goto nuPTX; MfqzN: Views::loadPage404(); goto YnnQK; jcuDF: CKZ5Y: goto Li7FP; J0dla: if (file_exists($viewPath)) { goto UnjXZ; } goto MfqzN; tR2DU: Ge3U6: goto LMR0d; efV7_: $uri = $_SERVER["\122\x45\121\x55\105\123\124\x5f\x55\x52\x49"] ?? ''; goto hntLZ; rMQk0: if (empty($segments[$pKey + 2])) { goto Ub7Ym; } goto wPKOm; OJ18a: if ($pKey) { goto YA9d1; } goto zpkAW; rfTMV: ASkj8: goto rMQk0; ZjCra: $page = "\x69\x6e\x64\145\x78"; goto OJ18a; FggLj: $plugin = $segments[$pKey + 1]; goto rfTMV; tkBCq: Views::includeFile($viewPath); goto jcuDF; wPKOm: $page = $segments[$pKey + 2]; goto Y2FmF; zpkAW: return false; goto MXHJk; RTyFm: YA9d1: goto o1BWk; cuQ1n: $segments = array_values(array_filter(explode("\57", trim($path, "\x2f")))); goto AGttX; hntLZ: $path = parse_url($uri, PHP_URL_PATH); goto cuQ1n; v_WMG: $plugin = ''; goto ZjCra; JFmLE: } }
