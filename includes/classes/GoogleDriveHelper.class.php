<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-18 20:27:34              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*
Copyright @ 2020 - 2025 GDPlayer v4.7.1. https://gdplayer.to | https://t.me/gdplayerto
*/
 namespace GDPlayer; use GDPlayer\Model\{GDriveAuth, GDriveMirror, VideoHash}; abstract class GoogleDriveHelper { protected GDriveAuth $gdAuth; protected GDriveMirror $gdMirror; protected VideoHash $vHash; protected $baseURL = "\x68\164\x74\160\163\x3a\57\57\167\x77\x77\x2e\147\x6f\157\147\x6c\145\x61\160\151\x73\x2e\143\x6f\155"; protected $tokenPath = "\57\157\141\165\164\x68\62\x2f\x76\x34\57\164\x6f\x6b\x65\x6e"; protected $v2Path = "\57\144\162\x69\166\145\57\x76\62"; protected $accessToken = false; protected $apiKey = false; protected $encryptTitle = false; protected $cachePrefixAbout = "\147\144\162\151\166\x65\x5f\141\x62\x6f\165\x74\176"; protected $cachePrefixToken = "\147\144\162\x69\166\x65\x5f\x61\x63\x63\x65\163\163\x2d\x74\x6f\x6b\x65\156\176"; protected $cacheTimeout = 3200; protected $copyDesc = "\143\157\x70\x79\x20\142\x79\40\x67\144\160\x6c\x61\171\145\162\56\164\157\160\40\x74\x6f\157\x6c"; protected $email = ''; protected $fileID = ''; protected $nextPageToken = ''; protected $postContentType = ["\103\x6f\x6e\x74\x65\156\164\x2d\x54\x79\160\x65\x3a\x20\x61\160\x70\154\x69\x63\141\x74\151\x6f\156\x2f\x6a\x73\157\156"]; protected $searchTitle = ''; protected $showFolderOnly = false; protected $showPrivateOnly = false; protected $userDetail = false; public function __construct() { goto jEqtA; Qm5Uj: $this->vHash = VideoHash::getInstance(); goto X_i4f; qlLvA: $this->gdAuth = GDriveAuth::getInstance(); goto YAhlV; YAhlV: $this->gdMirror = GDriveMirror::getInstance(); goto Qm5Uj; jEqtA: session_write_close(); goto qlLvA; X_i4f: } public function getDownloadURL() { session_write_close(); return sprintf("\45\163\45\x73\x2f\x66\x69\154\x65\163\x2f\x25\163\x3f\141\154\164\75\155\145\x64\151\x61\x26\153\x65\x79\x3d\x25\x73", $this->baseURL, $this->v2Path, $this->fileID, $this->apiKey); } public function getEmail() : string { session_write_close(); return $this->email; } public function getFileID() : string { session_write_close(); return $this->fileID; } public function getNextPageToken() { session_write_close(); return $this->nextPageToken; } public function getAPIKey() { session_write_close(); return $this->apiKey; } public function getUserInfo() { goto hOgoW; hOgoW: session_write_close(); goto lHoT6; lHoT6: $this->gdAuth->setCriteria("\x65\155\141\x69\154", $this->email); goto f4z7S; f4z7S: return $this->gdAuth->getOne(); goto wxF3v; wxF3v: } public function setNextPageToken(string $nextPageToken = '') { session_write_close(); $this->nextPageToken = $nextPageToken; } public function searchTitle(string $searchTitle = '') { session_write_close(); $this->searchTitle = $searchTitle; } public function searchFolderOnly(bool $showFolderOnly = false) { session_write_close(); $this->showFolderOnly = $showFolderOnly; } public function searchPrivateOnly(bool $showPrivateOnly = false) { session_write_close(); $this->showPrivateOnly = $showPrivateOnly; } public function encryptTitle(bool $encrypted = false) { session_write_close(); $this->encryptTitle = $encrypted; } protected function saveFileInfo(array $file = []) { goto aT5Gp; kYy0X: if (!(isset($file["\x69\144"]) && isset($file["\x74\x69\164\x6c\x65"]) && isset($file["\157\x72\151\147\x69\156\141\x6c\106\x69\154\x65\x6e\x61\x6d\x65"]) && strpos($file["\x6d\151\x6d\x65\x54\x79\x70\145"], "\166\x6e\x64\x2e\x67\x6f\x6f\147\154\x65\55\141\160\x70\163\56\x66\x6f\x6c\x64\x65\x72") === false)) { goto yize7; } goto NyIv0; A_ozr: $result = $this->vHash->insert(["\x68\157\163\x74" => "\x67\144\162\x69\166\145", "\150\157\x73\x74\137\x69\144" => $file["\x69\144"], "\147\144\x72\x69\166\145\137\145\155\x61\x69\x6c" => $this->email, "\x64\x61\x74\141" => $file]); goto ZfO2P; rqWHW: return $result; goto Ll1u0; NyIv0: $this->vHash->setCriteria("\x68\x6f\163\164", "\x67\x64\x72\151\166\x65"); goto cnwdo; b0xDz: yize7: goto rqWHW; aT5Gp: session_write_close(); goto qnqRh; qnqRh: $result = false; goto kYy0X; pUZpy: if (!($this->vHash->getNumRows() === 0)) { goto ZfNdE; } goto A_ozr; cnwdo: $this->vHash->setCriteria("\x68\157\163\x74\137\x69\144", $file["\151\144"], "\75", "\101\116\104"); goto pUZpy; ZfO2P: ZfNdE: goto b0xDz; Ll1u0: } protected function itemsParser(string $response = '') : array { goto Sjqnc; PO8Ja: $data = @json_decode($response, true); goto K3eOy; Sjqnc: session_write_close(); goto PO8Ja; K3eOy: $this->nextPageToken = $data["\156\x65\170\164\x50\x61\147\x65\124\x6f\x6b\145\x6e"] ?? ''; goto ZJNAb; ZJNAb: return $data["\x69\x74\145\155\x73"] ?? []; goto FI7TJ; FI7TJ: } protected function saveFileMirrorDB(string $fileID = '', string $fileMirrorID = '') { goto dOxY8; IjGEW: pBCIS: goto kxLeB; aoZJ8: $result = false; goto dh_TW; u0p1i: $this->gdMirror->setCriteria("\x6d\151\162\x72\x6f\x72\x5f\x69\144", $fileMirrorID, "\75", "\101\x4e\x44"); goto JX9Yi; AlCcS: zVV6h: goto IjGEW; JX9Yi: if (!($this->gdMirror->getNumRows() === 0)) { goto zVV6h; } goto YusuV; YusuV: $result = $this->gdMirror->insert(["\x67\x64\162\x69\x76\145\x5f\151\144" => $fileID, "\x6d\151\x72\162\157\x72\x5f\151\144" => $fileMirrorID, "\x6d\151\x72\162\157\x72\137\x65\155\141\151\154" => $this->email, "\141\x64\144\x65\x64" => time()]); goto AlCcS; dOxY8: session_write_close(); goto aoZJ8; kxLeB: return $result; goto fWAuI; go9ur: $this->gdMirror->setCriteria("\147\x64\162\151\166\145\137\x69\144", $fileID); goto u0p1i; dh_TW: if (!($fileID !== $fileMirrorID)) { goto pBCIS; } goto go9ur; fWAuI: } }
