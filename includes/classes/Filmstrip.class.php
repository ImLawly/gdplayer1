<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-18 20:27:34              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*
Copyright @ 2020 - 2025 GDPlayer v4.7.1. https://gdplayer.to | https://t.me/gdplayerto
*/
 namespace GDPlayer; use GDPlayer\Helper; class Filmstrip { protected $imageURL = ''; protected $imageWidth = 0; protected $imageHeight = 0; protected $imageInfo = []; protected $thumbCount = 0; protected $thumbDuration = 0; protected $thumbWidth = 0; protected $thumbHeight = 0; protected $tmpDir = ''; protected $tmpFile = ''; public function __construct() { session_write_close(); $this->tmpDir = BASE_DIR . "\165\x70\x6c\157\141\144\163\57\x69\x6d\141\147\x65\163\57\x63\141\143\150\145\57"; } protected function parseImageInfo(string $url = '') { goto T_6Qy; V6aG_: list($url, $fragment) = array_pad(explode("\43", $url), 2, ''); goto LMSfd; ZJGJt: q7kuV: goto r45Ie; BKFy2: $this->thumbCount = intval($qFragment["\143\x6f\x75\x6e\x74"]); goto ZJGJt; r45Ie: if (empty($qFragment["\146\162\145\161\x75\145\156\143\x79"])) { goto avtsN; } goto IqjVj; HR_qZ: avtsN: goto X0pgw; W4BMb: $this->imageURL = strtr($url, ["\x20" => "\x25\x32\x30"]); goto uE8qH; LMSfd: parse_str($fragment, $qFragment); goto W4BMb; T_6Qy: session_write_close(); goto V6aG_; p1AyK: if (empty($qFragment["\x63\157\165\x6e\164"])) { goto q7kuV; } goto BKFy2; IqjVj: $this->thumbDuration = intval($qFragment["\x66\162\x65\161\165\x65\156\x63\171"]); goto HR_qZ; uE8qH: $this->tmpFile = $this->tmpDir . substr(keyFilter($this->imageURL), 0, 245) . "\56\152\x70\147"; goto p1AyK; X0pgw: } protected function saveTmpImage() { goto xOTQB; vxOxE: Tl0D2: goto SuBa0; FK1A1: createErrorLog([__FILE__, __FUNCTION__, $this->imageURL, $err]); goto tRsOB; ALhMp: if (empty($err)) { goto hzh9R; } goto FK1A1; ON6pq: createDir($this->tmpDir); goto rLGKp; SuBa0: return false; goto E2dGu; x4_5Q: if (!file_exists($this->tmpFile)) { goto LvKhz; } goto Xx_zq; xOTQB: session_write_close(); goto x4_5Q; keniL: $ch = Helper::getCurlDefaultConfig(curl_init()); goto B0KJF; B0KJF: curl_setopt($ch, CURLOPT_URL, $this->imageURL); goto CImv4; rLGKp: createFile($this->tmpFile, $response); goto vxOxE; tRsOB: goto Tl0D2; goto IkGR8; Xx_zq: return $this->tmpFile; goto M7vAW; M7vAW: LvKhz: goto keniL; uGKGH: curl_close($ch); goto ALhMp; O5LG0: $err = curl_error($ch); goto uGKGH; dBC65: $response = curl_exec($ch); goto O5LG0; CImv4: curl_setopt($ch, CURLOPT_BUFFERSIZE, SMALL_BUFFER_SIZE); goto dBC65; IkGR8: hzh9R: goto ON6pq; E2dGu: } protected function getImageDetails(string $url = '') { goto D57zw; Mc7Xt: eAM8Y: goto Rz3sT; mtyS7: if (!$saved) { goto BfWda; } goto wmgxd; jads2: $this->imageHeight = $this->imageInfo[1]; goto Mc7Xt; Y9zE_: $this->parseImageInfo($url); goto rG0el; wmgxd: $this->imageInfo = @getimagesize($this->tmpFile); goto aWb3w; aWb3w: if (!$this->imageInfo) { goto eAM8Y; } goto y9a9j; Rz3sT: BfWda: goto OcUJD; rG0el: $saved = $this->saveTmpImage(); goto mtyS7; y9a9j: $this->imageWidth = $this->imageInfo[0]; goto jads2; D57zw: session_write_close(); goto Y9zE_; OcUJD: } public function createCustomVttSizes(string $url = '', int $width = 0, int $height = 0, int $duration = 0) { goto aGFJl; AaEg4: SobP0: goto xffqa; yUbD9: $this->thumbHeight = $height; goto l39Oj; BdTiO: $this->thumbCount = $this->imageInfo[1] / $height; goto pIqfK; ey64K: if (empty($duration)) { goto SobP0; } goto ooBsZ; pIqfK: NHt7F: goto QGhxE; xffqa: if (!($this->thumbCount === 0 && $this->imageInfo[0] === $width && $this->imageInfo[1] > $this->imageInfo[0])) { goto NHt7F; } goto BdTiO; l39Oj: $this->getImageDetails($url); goto ey64K; aGFJl: session_write_close(); goto pwyOh; QGhxE: return $this->createVttContent(); goto uoggp; pwyOh: $this->thumbWidth = $width; goto yUbD9; ooBsZ: $this->thumbDuration = $duration; goto AaEg4; uoggp: } public function repairVttContent(string $url = '', string $content = '') { goto N073T; CRJ7_: goto WzRTh; goto MjfNd; e5qBm: return $result; goto DB_o0; sNdln: WzRTh: goto e5qBm; N073T: session_write_close(); goto baGqT; qU1Fr: Bw4tN: goto CRJ7_; baGqT: $result = ''; goto UBfjg; zMzC_: foreach ($lines as $line) { goto E0vPc; vJJQh: Lt5vy: goto uQscJ; uQscJ: $result .= $baseURL . ltrim($line, SLASH) . "\12"; goto vNS2e; E0vPc: if (strpos($line, "\43\170\x79\167\x68\75") !== false && !validateUrl($line)) { goto Lt5vy; } goto dfbFP; UVkRZ: goto A3elg; goto vJJQh; ZIjb1: bI9Ss: goto GV5Gm; dfbFP: $result .= $line . "\xa"; goto UVkRZ; vNS2e: A3elg: goto ZIjb1; GV5Gm: } goto qU1Fr; DbNb2: $baseURL = strtr(Helper::getHostOrigin($url, true), ["\151\x2e\x64\x6f\157\x64\x63\x64\x6e" => "\151\x6d\x67\56\x64\x6f\157\x64\x63\144\x6e"]) . SLASH; goto YbmPK; qOJiq: if (strpos($url, "\x64\157\x6f\x64\143\144\x6e\x2e") !== false) { goto RkrwH; } goto EHgtA; UBfjg: $lines = explode("\12", strtr($content, ["\xd\xa" => "\xa"])); goto qOJiq; sOAqh: sDibn: goto sNdln; YbmPK: foreach ($lines as $line) { goto tchw1; WnGDX: goto S6KQT; goto vB8sB; vB8sB: TACvO: goto zfnS0; PIVGX: S6KQT: goto FXPXP; zfnS0: $result .= $baseURL . ltrim($line, SLASH) . "\xa"; goto PIVGX; FXPXP: eOUe5: goto bsbaQ; hL3sF: $result .= $line . "\xa"; goto WnGDX; tchw1: if (strpos($line, "\43\x78\x79\167\x68\75") !== false) { goto TACvO; } goto hL3sF; bsbaQ: } goto sOAqh; MjfNd: RkrwH: goto DbNb2; EHgtA: $baseURL = strtr($url, [basename(parse_url($url, PHP_URL_PATH)) => '']); goto zMzC_; DB_o0: } public function createVttContent() { goto uflH0; eFn2d: if (!($this->thumbCount === $imagesLen)) { goto uriN6; } goto JIYKe; JIYKe: goto hSOXO; goto Va1S5; mNhS7: $i = 0; goto zKnVd; HNtDj: BcoUz: goto J9cGT; k6UvU: $i++; goto LyBBi; F5azS: $times[] = convertToDurationTimeFormat($start) . "\56\60\x30\x30\x20\x2d\55\x3e\x20" . convertToDurationTimeFormat($end) . "\x2e\60\60\60\12"; goto nfvPv; EF_IH: goto y_frl; goto u0CCO; BCr0W: VlVxL: goto v5_na; ExjGK: $j = 0; goto ojbu9; o0SRs: hSOXO: goto jtrcX; m2ZCn: if (!($this->thumbCount === 0 || $this->imageHeight === 0 || $this->imageWidth === 0)) { goto BcoUz; } goto s5Ypp; sax_n: $i = 0; goto BCr0W; RD6uD: w6A3O: goto SeUu_; LyBBi: goto VlVxL; goto o0SRs; ubcLZ: if (!($i < $this->thumbCount)) { goto w6A3O; } goto yGHj2; SeUu_: $images = []; goto Ty7hT; uflH0: session_write_close(); goto iClKV; zKnVd: rkRPi: goto ubcLZ; LoFtB: $imagesLen++; goto eFn2d; nfvPv: c_s1K: goto l8_yB; OhLIE: goto rkRPi; goto RD6uD; LJ4Ox: foreach ($times as $i => $v) { goto Ph25u; fX70s: $content .= $images[$i]; goto I09iL; Ph25u: $content .= $v; goto fX70s; I09iL: Q3LAY: goto mde0G; mde0G: } goto ybrl0; v5_na: if (!($i < $thumbX)) { goto hSOXO; } goto gMn9E; ybrl0: aDcfa: goto a9e5X; qQWXJ: ISODF: goto k6UvU; yGHj2: $start = $i * $this->thumbDuration; goto ujJ71; ujJ71: $end = $start + $this->thumbDuration; goto F5azS; g82Kv: $images[] = $this->imageURL . "\43\x78\171\167\150\x3d{$x}\x2c{$y}\54{$this->thumbWidth}\54{$this->thumbHeight}\xa\xa"; goto LoFtB; Ty7hT: $imagesLen = 0; goto ExjGK; l8_yB: $i++; goto OhLIE; iClKV: $content = "\x57\x45\102\126\124\x54\xa\xa"; goto m2ZCn; J9cGT: $thumbX = $this->imageWidth / $this->thumbWidth; goto Ky4in; qiYLV: $times = []; goto mNhS7; w3O58: $y = $j * $this->thumbHeight; goto sax_n; FRG_B: $j++; goto EF_IH; Ky4in: $thumbY = $this->imageHeight / $this->thumbHeight; goto qiYLV; s5Ypp: return $content; goto HNtDj; gMn9E: $x = $i * $this->thumbWidth; goto g82Kv; u0CCO: qrw9X: goto LJ4Ox; ojbu9: y_frl: goto QKiGL; jtrcX: J479x: goto FRG_B; a9e5X: return $content; goto WyD12; QKiGL: if (!($j < $thumbY)) { goto qrw9X; } goto w3O58; Va1S5: uriN6: goto qQWXJ; WyD12: } }
