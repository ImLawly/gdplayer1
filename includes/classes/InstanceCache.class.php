<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-18 20:27:36              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*
Copyright @ 2020 - 2025 GDPlayer v4.7.1. https://gdplayer.to | https://t.me/gdplayerto
*/
 namespace GDPlayer; use Phpfastcache\CacheManager; use Phpfastcache\Core\Item\ExtendedCacheItemInterface; use Phpfastcache\Core\Pool\ExtendedCacheItemPoolInterface; use Phpfastcache\Config\ConfigurationOption; use Phpfastcache\Drivers\Memcache\Config as MemcacheConfig; use Phpfastcache\Drivers\Memcached\Config as MemcachedConfig; use Phpfastcache\Drivers\Redis\Config as RedisConfig; use Phpfastcache\Exceptions\{PhpfastcacheDriverException, PhpfastcacheRootException}; class InstanceCache { private static ?self $instance = null; private ConfigurationOption $icacheConfig; private ConfigurationOption $icacheDefaultConfig; private $icache = null; private $driver = "\122\145\x64\x69\163"; private $driverFile; private $driversAllowed = []; private $driversError = []; private $instanceId; private $cacheHostname = "\61\62\67\56\x30\56\x30\56\x31"; private $cachePort = 6379; private $cacheDatabase = 16; private $cacheUsername = null; private $cachePassword = null; private function __construct() { goto aRMWA; sjztU: $driver = $altDriver; goto G676u; nK8Er: $this->driverFile = normalizeSeparator(TMP_PATH . "\103\x61\x63\150\x65\x44\x72\x69\166\145\x72\56\x74\x78\x74"); goto zVrE4; UwtES: $this->cacheDatabase = CACHE_DATABASE; goto T___4; aRMWA: session_write_close(); goto nK8Er; VOKHp: upLIb: goto Uk6o3; Uk6o3: $driver = ucfirst(strtolower(CACHE_DRIVER)); goto lnvtF; fDEvk: $this->cachePassword = CACHE_PASSWORD; goto UwtES; lnvtF: UFFGU: goto Ksn53; G676u: goto UFFGU; goto VOKHp; LfUdp: goto UFFGU; goto mB9jF; zufm9: $this->instanceId = hash_hmac("\155\144\x35", BASE_URL, SECURE_SALT); goto rlK5b; Ksn53: $this->driver = in_array($driver, $this->driversAllowed) && !in_array($driver, $this->driversError) ? $driver : $this->driversAllowed[0]; goto Talxx; qxapF: $this->cachePort = CACHE_PORT; goto m8v29; itnsd: $altDriver = getFileContent($this->driverFile); goto fT4dy; aZpBQ: if (defined("\x43\101\103\110\105\137\x44\x52\111\126\105\x52")) { goto upLIb; } goto LfUdp; mB9jF: dHnSS: goto sjztU; Talxx: $this->icacheDefaultConfig = new ConfigurationOption(["\x64\145\146\x61\165\x6c\x74\x54\164\x6c" => CACHE_TIMEOUT, "\160\141\164\x68" => TMP_PATH]); goto zufm9; T___4: $this->createCacheInstance(); goto fyojB; m8v29: $this->cacheUsername = CACHE_USERNAME; goto fDEvk; rlK5b: $this->cacheHostname = CACHE_HOST; goto qxapF; zVrE4: $this->detectDrivers(); goto FaDRB; FaDRB: $driver = $this->driversAllowed[0]; goto itnsd; fT4dy: if (is_string($altDriver)) { goto dHnSS; } goto aZpBQ; fyojB: } private function __clone() { } public function __wakeup() { } private function detectDrivers() { goto ur7Oy; ur7Oy: session_write_close(); goto YN_wz; YN_wz: if (empty($this->cacheHostname)) { goto Usj6_; } goto QmIX0; gO0Y5: $this->driversAllowed[] = "\x4d\x65\155\x63\x61\143\150\145"; goto BD01a; bzn22: if (!extension_loaded("\155\145\x6d\x63\x61\x63\150\145\x64")) { goto B3cjM; } goto rO0LG; zefaj: if (!(extension_loaded("\x61\160\143\x75") && ini_get("\141\x70\x63\56\x65\156\x61\142\x6c\x65\x64"))) { goto Mny4K; } goto GENLx; rO0LG: $this->driversAllowed[] = "\115\x65\155\143\x61\x63\150\x65\x64"; goto a9u8Y; QmIX0: if (!extension_loaded("\162\x65\x64\151\163")) { goto Pst_O; } goto wHj9t; BD01a: vyMEp: goto bzn22; a9u8Y: B3cjM: goto TrRJX; kD6NL: Pst_O: goto Hu8WN; wHj9t: $this->driversAllowed[] = "\122\x65\x64\151\x73"; goto kD6NL; TrRJX: Usj6_: goto zefaj; HIjwI: Mny4K: goto RfeiE; GENLx: $this->driversAllowed[] = "\x41\160\x63\x75"; goto HIjwI; RfeiE: $this->driversAllowed[] = "\106\x69\154\145\x73"; goto Oxw5n; Hu8WN: if (!extension_loaded("\155\145\155\143\141\143\x68\145")) { goto vyMEp; } goto gO0Y5; Oxw5n: } private function createDriverConfig() { goto lg6Qg; feZdQ: AdFKn: goto ph2nX; lg6Qg: session_write_close(); goto ec3t8; ec3t8: switch ($this->driver) { case "\122\x65\x64\x69\x73": $this->icacheConfig = new RedisConfig(["\x68\x6f\x73\x74" => $this->cacheHostname, "\160\x6f\162\164" => $this->cachePort, "\x64\141\x74\x61\x62\x61\163\x65" => $this->cacheDatabase, "\160\x61\163\x73\x77\x6f\162\144" => $this->cachePassword, "\164\151\x6d\145\x6f\165\164" => 30, "\x6f\x70\x74\120\x72\145\146\x69\170" => $this->instanceId . "\137"]); goto AdFKn; case "\x4d\145\155\x63\141\x63\150\x65": $this->icacheConfig = new MemcacheConfig(["\150\x6f\x73\x74" => $this->cacheHostname, "\160\x6f\162\x74" => $this->cachePort]); goto AdFKn; case "\115\x65\x6d\143\x61\143\150\x65\x64": goto d6nj_; pm05y: $config["\x73\141\163\x6c\x50\141\x73\163\x77\x6f\x72\x64"] = $this->cachePassword; goto sG0_t; SqvUL: goto AdFKn; goto hyavB; a_j3a: $this->icacheConfig = new MemcachedConfig($config); goto SqvUL; d6nj_: $config = ["\150\157\x73\164" => $this->cacheHostname, "\160\157\x72\164" => $this->cachePort]; goto HJQng; xqk6E: if (empty($this->cachePassword)) { goto bGBS_; } goto pm05y; o8Rqh: $config["\x73\141\163\154\x55\x73\145\162"] = $this->cacheUsername; goto bQsSY; sG0_t: bGBS_: goto a_j3a; bQsSY: orzI6: goto xqk6E; HJQng: if (empty($this->cacheUsername)) { goto orzI6; } goto o8Rqh; hyavB: default: goto AdFKn; } goto iQRla; iQRla: HgP8r: goto feZdQ; ph2nX: } private function createCacheInstance(string $newDriver = '') { goto tVFQy; OcxeQ: EqAkJ: goto zJ6CN; M8hku: oSId7: goto nReBc; qnFg2: $this->createDriverConfig(); goto nZi2I; nReBc: $this->icacheConfig = $this->icacheDefaultConfig; goto e1aSq; nZi2I: i8bba: goto sXucA; kg089: $this->driver = $newDriver; goto M8hku; dZTxv: if (empty($newDriver)) { goto oSId7; } goto kg089; sXucA: if (!($this->icache === null)) { goto EqAkJ; } goto bCUfe; e1aSq: if (empty($this->cacheHostname)) { goto i8bba; } goto qnFg2; bCUfe: try { $this->icache = CacheManager::getInstance($this->driver, $this->icacheConfig, $this->instanceId); } catch (PhpfastcacheDriverException|PhpfastcacheRootException|\Exception $e) { goto mni0F; mni0F: error_log("\x43\141\x63\150\145\x20\x27{$this->driver}\47\40\x45\162\162\157\162\x3a\40{$e->getMessage()}"); goto bP8yt; bP8yt: $this->driversError[] = $this->driver; goto KPGRA; cfe2p: array_splice($this->driversAllowed, $searchKey, 1); goto lluT6; bOQEC: $this->createCacheInstance($newDriver); goto g9KQD; lluT6: $newDriver = $this->driversAllowed[0]; goto j2X5U; IiUIe: if (!is_numeric($searchKey)) { goto yLwD2; } goto cfe2p; g9KQD: yLwD2: goto NJKse; j2X5U: createFile($this->driverFile, $newDriver); goto bOQEC; KPGRA: $searchKey = array_search($this->driver, $this->driversAllowed); goto IiUIe; NJKse: } goto OcxeQ; tVFQy: session_write_close(); goto dZTxv; zJ6CN: } public static function getInstance() : self { goto BJ2oI; pMVLB: if (!(self::$instance === null)) { goto PTMm1; } goto nJDw0; CO_cw: PTMm1: goto QUcTP; nJDw0: self::$instance = new self(); goto CO_cw; QUcTP: return self::$instance; goto G1SBh; BJ2oI: session_write_close(); goto pMVLB; G1SBh: } public static function getStats() { session_write_close(); return self::getInstance()->icache->getStats(); } public static function getItem(string $key) : ExtendedCacheItemInterface { session_write_close(); return self::getInstance()->icache->getItem($key); } public static function clear() : bool { goto Luz9s; RONqQ: $cache = self::getInstance()->icache; goto UBqlX; UBqlX: $result = $cache->clear(); goto o39xy; W7s3a: return $result; goto Y2hWG; o39xy: $cache->detachAllItems(); goto W7s3a; Luz9s: session_write_close(); goto RONqQ; Y2hWG: } public static function save(ExtendedCacheItemInterface $cacheItem) : bool { goto iSE4_; vCBQg: return $result; goto uJI5Q; PkQPg: $cache = self::getInstance()->icache; goto nYo8I; iSE4_: session_write_close(); goto PkQPg; a4rG2: $cache->detachAllItems(); goto vCBQg; nYo8I: $result = $cache->save($cacheItem); goto a4rG2; uJI5Q: } public static function saveDeferred(ExtendedCacheItemInterface $cacheItem) : bool { goto rsZ_H; rsZ_H: session_write_close(); goto QyclG; Yp4eZ: return $result; goto GhpC2; UkiPI: $cache->detachAllItems(); goto Yp4eZ; QyclG: $cache = self::getInstance()->icache; goto rq7M2; rq7M2: $result = $cache->saveDeferred($cacheItem); goto UkiPI; GhpC2: } public static function deleteItem(string $key) : bool { goto vpySC; ZuImM: $cache = self::getInstance()->icache; goto Jop_D; vpySC: session_write_close(); goto ZuImM; Jop_D: $result = $cache->deleteItem($key); goto yQtuM; yQtuM: $cache->detachAllItems(); goto MwPJc; MwPJc: return $result; goto sBA2B; sBA2B: } public static function deleteItemsByTag(string $tagName) : bool { goto o8dfT; nX3Cc: return $result; goto JCaZ6; lV9dL: $cache->detachAllItems(); goto nX3Cc; o8dfT: session_write_close(); goto wviQ5; lgjUS: $result = in_array(true, [$cache->deleteItemsByTag($tagName, $cache::TAG_STRATEGY_ONE), $cache->deleteItemsByTag($tagName, $cache::TAG_STRATEGY_ALL), $cache->deleteItemsByTag($tagName, $cache::TAG_STRATEGY_ONLY)]); goto lV9dL; wviQ5: $cache = self::getInstance()->icache; goto lgjUS; JCaZ6: } public static function deleteItemsByTags(array $tagNames) : bool { goto zw64m; b6KLk: $result = in_array(true, [$cache->deleteItemsByTags($tagNames, $cache::TAG_STRATEGY_ONE), $cache->deleteItemsByTags($tagNames, $cache::TAG_STRATEGY_ALL), $cache->deleteItemsByTags($tagNames, $cache::TAG_STRATEGY_ONLY)]); goto aZXm1; MfLVa: $cache = self::getInstance()->icache; goto b6KLk; aZXm1: $cache->detachAllItems(); goto tigCP; tigCP: return $result; goto ermha; zw64m: session_write_close(); goto MfLVa; ermha: } public static function setItem(string $key, $value = null, $ttl = 3600, $tags = null) : bool { goto ML9h_; uXb_w: FP64_: goto BufeJ; fIDo_: $cacheItem = $cache->getItem($key); goto Hh5F0; my77E: goto LU9ux; goto xN_i2; eSQBJ: return $result; goto S3y0t; ML9h_: session_write_close(); goto mBFfw; o6DdT: $cache->detachAllItems(); goto eSQBJ; IF84K: if (is_array($tags)) { goto t8FHp; } goto URQ3q; Jgk2Y: goto LU9ux; goto uXb_w; BufeJ: $cacheItem->set($value)->expiresAt($ttl); goto xYEBj; eO9QD: t8FHp: goto vOJS9; kFIAR: $result = $cache->save($cacheItem); goto o6DdT; VECSK: goto NsqQm; goto eO9QD; mBFfw: $cache = self::getInstance()->icache; goto fIDo_; rl3Iq: $cacheItem->set($value)->expiresAfter($ttl); goto Jgk2Y; Hh5F0: if (is_integer($ttl)) { goto SE1_x; } goto rrWD0; vOJS9: $cacheItem->addTags($tags); goto tgsgG; URQ3q: if (!is_null($tags)) { goto hktvF; } goto VECSK; BhjIf: hktvF: goto IOPOk; IOPOk: $cacheItem->addTag($tags); goto iRlAp; iRlAp: NsqQm: goto kFIAR; xN_i2: SE1_x: goto rl3Iq; rrWD0: if ($ttl instanceof \DateTimeInterface) { goto FP64_; } goto my77E; tgsgG: goto NsqQm; goto BhjIf; xYEBj: LU9ux: goto IF84K; S3y0t: } }
