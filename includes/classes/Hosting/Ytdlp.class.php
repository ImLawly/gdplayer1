<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-18 20:27:36              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*
Copyright @ 2020 - 2025 GDPlayer v4.7.1. https://gdplayer.to | https://t.me/gdplayerto
*/
 namespace GDPlayer\Hosting; class Ytdlp extends \GDPlayer\CoreHelper { private $language = "\151\x64\x2c\x65\x6e\x3b\161\75\60\x2e\71"; private $logDir = ''; private $logFile = ''; private $retry = 0; private $url = ''; private $userAgent = ''; private $ytdlpProxy = ''; private $ytdlpApp; private $ytdlpOptions = []; private $ytdlpDisableCookie = false; private $ytdlpDisableProxy = false; public function __construct(string $id = '') { goto RROs0; mG598: createDir($this->logDir); goto uohqz; dSExz: $this->cookies = $this->getCustomCookies(); goto mG598; dQeDF: ufVW9: goto dSExz; ENx_9: $exe = stripos(PHP_OS, "\127\x49\x4e") !== false ? "\x2e\x65\170\145" : ''; goto TDgEB; hbkOX: $this->language = getBrowserLanguage(); goto dQeDF; Um6zO: $this->logDir = normalizeSeparator(CACHE_PATH . "\x6c\x6f\147\163\57\171\164\x2d\144\154\x70\x2f"); goto j3A1X; uohqz: $this->logFile = $this->logDir . keyFilter($this->url) . "\56\154\157\x67"; goto ENx_9; hKzg_: if (!in_array(get_called_class(), directHosts(), true)) { goto ufVW9; } goto qAwZ2; RROs0: session_write_close(); goto wfFzg; TDgEB: $this->ytdlpApp = normalizeSeparator(BIN_PATH . "\x79\164\55\144\154\x70" . $exe); goto X1Kdy; wfFzg: parent::__construct(); goto YYlFb; j3A1X: $this->userAgent = USER_AGENT; goto hKzg_; qAwZ2: $this->userAgent = getBrowserUserAgent(); goto hbkOX; X1Kdy: chmod($this->ytdlpApp, 0700); goto siO5G; YYlFb: $this->url = $id; goto Um6zO; siO5G: } public function addOption(string $option = '') { goto ObHlU; I10Uw: BtgPX: goto gdzGu; HBpru: $this->ytdlpOptions[] = $option; goto I10Uw; ObHlU: if (empty($option)) { goto BtgPX; } goto HBpru; gdzGu: } public function disableCookie() { $this->ytdlpDisableCookie = true; } public function disableProxy() { $this->ytdlpDisableProxy = true; } private function getType(string $videoUrl = '') { goto z_H8B; z_H8B: $type = $this->videoType; goto jAs21; PeFPJ: goto h7Y7A; goto ZPQey; ZPQey: l0rrc: goto nDCrg; jAs21: if (strpos($videoUrl, "\x2e\155\x33\x75\x38") !== false || stripos($videoUrl, "\155\63\165") !== false) { goto l0rrc; } goto TS15u; VKazO: return $type; goto ISFJq; TS15u: if (strpos($videoUrl, "\x2e\155\x70\144") !== false || stripos($videoUrl, "\x64\141\163\x68") !== false) { goto HOxZs; } goto PeFPJ; DMgmF: goto h7Y7A; goto DVyEC; v3sRg: $type = $this->mpdType; goto tyHs5; DVyEC: HOxZs: goto v3sRg; nDCrg: $type = $this->hlsType; goto DMgmF; tyHs5: h7Y7A: goto VKazO; ISFJq: } private function subtitlesExtracktor(array $subtitles = []) { foreach ($subtitles as $k => $v) { goto i1Bnj; D7n36: $label = $lang["\x76\141\x6c\165\145"]; goto Acdg3; gopvj: x7AWU: goto rLzL5; rLzL5: DcSHs: goto zLbHz; afdCM: foreach ($v as $dt) { goto gWi9j; gWi9j: if (!(isset($dt["\160\x72\157\x74\x6f\143\x6f\x6c"]) && $dt["\160\x72\x6f\x74\157\x63\157\x6c"] === "\x68\164\x74\160")) { goto ID_HK; } goto aSDkq; aSDkq: $this->tracks[] = ["\146\x69\154\145" => $dt["\x75\162\x6c"], "\154\141\142\x65\154" => $label]; goto f4uQP; Rkarm: ID_HK: goto Pmv7G; f4uQP: goto x7AWU; goto Rkarm; Pmv7G: CrNnN: goto r4Fkt; r4Fkt: } goto gopvj; Acdg3: EFXu7: goto afdCM; q_1bE: if (!isset($lang["\153\145\x79"])) { goto EFXu7; } goto D7n36; i1Bnj: $lang = languageList($k); goto oF9Vn; oF9Vn: $label = "\125\156\x6b\156\x6f\167\156\40\x43\103"; goto q_1bE; zLbHz: } Km3jW: } private function parseFormatSources(array $formatSources = []) { goto O36xF; Ydt1w: Ou2r3: goto LTtzG; CaAVo: Y4L2I: goto XA8OZ; ztXSo: if (!empty($manifestUrls)) { goto l9OKv; } goto WigYr; JNBKc: l9OKv: goto ikoDT; WigYr: foreach ($formatSources as $dt) { goto nsckU; iTM8Q: goto Y4L2I; goto caFZ_; caFZ_: eqSFC: goto vuy5h; SSqyJ: goto eqSFC; goto jCM63; nsckU: $videoUrl = $dt["\x6d\x61\156\x69\146\x65\163\x74\x5f\165\x72\x6c"] ?? $dt["\x75\x72\154"]; goto pDjfo; aP8VH: if ($type !== $this->videoType) { goto E9UMt; } goto QTVT_; QTVT_: $this->sources[] = ["\x66\151\x6c\145" => $videoUrl, "\164\171\160\x65" => $type, "\154\x61\142\145\154" => $dt["\x66\x6f\x72\x6d\141\x74\137\x69\x64"]]; goto SSqyJ; jCM63: E9UMt: goto LpcCa; pDjfo: $type = $this->getType($videoUrl); goto aP8VH; LpcCa: $this->sources[] = ["\146\151\x6c\x65" => $videoUrl, "\x74\171\x70\145" => $type, "\x6c\x61\x62\x65\x6c" => "\117\x72\151\x67\151\x6e\141\154"]; goto iTM8Q; vuy5h: RHnfu: goto cS424; cS424: } goto CaAVo; u9qXz: $this->sources[] = ["\146\x69\154\x65" => $videoUrl, "\x74\x79\160\x65" => $this->getType($videoUrl), "\154\x61\142\145\154" => "\117\x72\x69\147\x69\156\x61\x6c"]; goto Ydt1w; ikoDT: $videoUrl = end($manifestUrls); goto u9qXz; O36xF: $manifestUrls = array_column($formatSources, "\x6d\141\x6e\x69\146\x65\x73\x74\137\x75\162\154"); goto ztXSo; XA8OZ: goto Ou2r3; goto JNBKc; LTtzG: } public function getSources() : array { goto RvyxI; OENla: if (empty($ytdlpData["\163\165\142\164\x69\164\154\x65\x73"])) { goto AaeID; } goto dVcdh; FGvTD: goto s_ynK; goto g5DDE; IL9dI: $this->status = "\x6f\153"; goto r5vNs; dVcdh: $this->subtitlesExtracktor($ytdlpData["\163\x75\142\x74\x69\164\x6c\x65\163"]); goto uiV9N; Uzqzg: $this->sources[] = ["\x66\151\x6c\145" => $ytdlpData["\x6d\x61\156\151\146\x65\x73\x74\x5f\x75\x72\x6c"], "\x74\171\160\x65" => $this->getType($ytdlpData["\155\x61\x6e\x69\x66\x65\x73\164\137\165\162\154"]), "\154\x61\142\145\154" => "\117\x72\151\x67\151\x6e\141\x6c"]; goto FGvTD; D3AzC: $this->sources[] = ["\146\151\x6c\145" => $urls[0], "\x74\171\160\145" => $this->hlsType, "\154\x61\x62\145\154" => "\117\x72\x69\147\x69\156\x61\154"]; goto VM7K6; o96g0: $this->sources = array_values(array_filter($this->sources, fn($val) => !empty($val["\x66\151\x6c\x65"]))); goto WvHde; g5DDE: BmthP: goto ObZOY; RvyxI: $ytdlpData = $this->exec(); goto uy8mM; w6WGV: hsSvy: goto Gbw97; lP8rj: return $this->sources; goto XgDsr; LwZfp: if (empty($urls)) { goto Cn3WJ; } goto D3AzC; X36U1: $this->referer = $this->url; goto OENla; Xa2vf: goto s_ynK; goto w6WGV; Qb5Nw: goto s_ynK; goto PZnjB; r5vNs: AqYnm: goto lP8rj; FhRJy: OUbmm: goto yEkvF; ObZOY: $this->sources[] = ["\146\x69\154\145" => $ytdlpData["\165\x72\154"], "\164\x79\x70\145" => $this->getType($ytdlpData["\165\162\x6c"]), "\x6c\x61\x62\145\x6c" => "\117\162\151\147\x69\156\141\154"]; goto Xa2vf; WvHde: if (empty($this->sources)) { goto AqYnm; } goto IL9dI; NiJRF: goto s_ynK; goto FhRJy; JqoZE: if (!empty($ytdlpData["\165\162\154"])) { goto BmthP; } goto gxXAB; fDI4E: if (isset($ytdlpData["\x65\x78\x74\x72\141\x63\164\x6f\x72"]) && $ytdlpData["\145\x78\x74\x72\141\143\164\157\x72"] === "\171\x6f\x75\164\165\x62\145" && !empty($ytdlpData["\146\x6f\x72\x6d\x61\164\163"])) { goto OUbmm; } goto VnOIj; gxXAB: if (!empty($ytdlpData["\x66\x6f\x72\x6d\x61\164\163"])) { goto hsSvy; } goto NiJRF; Gbw97: $this->parseFormatSources($ytdlpData["\146\x6f\x72\x6d\141\164\163"]); goto MFR36; mj1WT: $this->image = $ytdlpData["\x74\150\x75\x6d\142\156\141\151\154"] ?? ''; goto X36U1; VM7K6: Cn3WJ: goto Qb5Nw; yEkvF: $urls = array_values(array_filter(array_column($ytdlpData["\x66\157\162\155\141\164\163"], "\155\x61\156\x69\x66\x65\x73\164\x5f\x75\x72\x6c"), fn($val) => strpos($val, "\x2f\x68\x6c\163\x5f\166\x61\x72\151\141\156\164") !== false)); goto LwZfp; MFR36: s_ynK: goto o96g0; uiV9N: AaeID: goto fDI4E; PZnjB: QMIYQ: goto Uzqzg; VnOIj: if (!empty($ytdlpData["\x6d\x61\x6e\x69\x66\145\x73\164\137\x75\x72\154"])) { goto QMIYQ; } goto JqoZE; uy8mM: $this->title = $ytdlpData["\x74\x69\164\x6c\145"] ?? ''; goto mj1WT; XgDsr: } private function retry() { goto pvYeo; gX9TG: $plist = proxyList(); goto xtuTZ; hvpmH: foreach ($plist as $proxy) { goto fGN78; Xzy09: $this->ytdlpProxy .= $pIpPort; goto cAsPA; GJLG3: if (empty($pIpPort)) { goto Xwyjk; } goto Xzy09; cAsPA: Xwyjk: goto oDCwz; x5x00: $result = $this->exec(); goto jhjoA; zGC_L: a3u1_: goto iWTqQ; jhjoA: if (!$result) { goto a3u1_; } goto ZRy3r; ZRy3r: goto YZ5h3; goto zGC_L; MlY0v: $this->ytdlpProxy .= empty($pType) ? "\x68\x74\164\160" : $pType; goto e_KoK; oDCwz: $this->ytdlpProxy .= SLASH; goto x5x00; A9evT: tKeXf: goto GJLG3; iWTqQ: ArX31: goto fHZtB; e_KoK: $this->ytdlpProxy .= "\x3a\57\57"; goto M2WBQ; fGN78: list($pIpPort, $pUsrPwd, $pType) = array_map("\x74\x72\151\x6d", array_pad(explode("\x2c", $proxy), 3, '')); goto MlY0v; M2WBQ: if (empty($pUsrPwd)) { goto tKeXf; } goto FimeE; FimeE: $this->ytdlpProxy .= $pUsrPwd . "\x40"; goto A9evT; fHZtB: } goto uwUWe; VhmXu: LeQf3: goto hvpmH; s3SrA: return $result; goto VhmXu; laXGP: return $result; goto FPfE2; pvYeo: $result = false; goto gX9TG; xtuTZ: if (!($this->retry > 3 && empty($plist))) { goto LeQf3; } goto s3SrA; uwUWe: YZ5h3: goto laXGP; FPfE2: } private function outputParser(string $output = '') { goto AylJC; H6PS7: if (!empty($output)) { goto nJhyz; } goto linkH; pqoCl: return $this->retry(); goto EGeA7; KxVnu: return $result; goto Br6YL; AiDZv: $result = $output; goto QxgAR; EGeA7: goto tZFI3; goto hhRqu; DIvtT: $result = json_decode($output, true); goto PcXSW; q6blA: SmJKm: goto DIvtT; eejYE: tZFI3: goto KxVnu; linkH: $this->retry++; goto pqoCl; PcXSW: ctsOV: goto eejYE; hhRqu: nJhyz: goto dQ04v; dQ04v: if (substr(trim($output), 0, 1) === "\173") { goto SmJKm; } goto AiDZv; AylJC: $result = false; goto H6PS7; QxgAR: goto ctsOV; goto q6blA; Br6YL: } protected function exec(string $command = '') { goto i38OI; Y7Jdy: $optCustom = ''; goto HXHOj; XnsTO: if (file_exists($this->ytdlpApp)) { goto ZcQLP; } goto R66kn; lyWyk: goto K0MyO; goto o1L9_; fDEOC: $output = trim(stream_get_contents($pipes[1])); goto qkqdf; i38OI: $result = false; goto XnsTO; mtLbn: $descriptorSpec = [1 => ["\160\151\160\145", "\x77"], 2 => ["\x70\x69\160\145", "\x77"]]; goto O3Hi5; ukX37: @unlink($this->logFile); goto dgqxk; R66kn: createErrorLog([__FILE__, __FUNCTION__, $this->ytdlpApp . "\40\x61\x70\160\x20\144\x6f\x65\163\x20\x6e\157\164\40\145\x78\151\x73\x74"]); goto ZxSfv; HCSka: $this->ytdlpOptions[] = sprintf("\x2d\55\160\x72\x6f\x78\171\40\42\x25\x73\42", $this->ytdlpProxy); goto alzcg; alzcg: qjJVZ: goto dk0ha; EpORO: createErrorLog([__FILE__, __FUNCTION__, $command, "\x43\141\156\156\x6f\164\x20\x72\x75\x6e\40\164\x68\145\x20\141\x70\x70\x2f\143\x6f\155\155\141\156\144"]); goto lyWyk; mP8b4: createFile($this->logFile, $error); goto jVrhH; HXHOj: if (empty($this->ytdlpOptions)) { goto zVemI; } goto Wzazq; PUcFu: fclose($pipes[1]); goto cjr39; v4E5T: $this->ytdlpOptions[] = sprintf("\55\55\141\144\144\55\x68\x65\141\144\x65\162\40\42\143\x6f\x6f\153\151\145\x3a\45\163\x22", implode("\73", $this->cookies)); goto n75qp; O3Hi5: $process = proc_open($command, $descriptorSpec, $pipes); goto igarO; QBcjZ: if (!(!$this->ytdlpDisableProxy && !empty($this->ytdlpProxy))) { goto qjJVZ; } goto HCSka; aNhCv: $command = sprintf("\45\163\x20\x2d\55\144\x75\x6d\x70\x2d\x6a\x73\x6f\x6e\40\55\x2d\x61\x64\144\x2d\150\x65\x61\144\x65\x72\40\42\x61\x63\x63\145\160\164\55\x6c\141\156\147\x75\141\147\145\x3a\x25\x73\x22\40\x2d\55\165\x73\145\x72\55\x61\147\145\156\x74\40\x22\x25\x73\42\40\45\163\x20\42\x25\163\x22", $this->ytdlpApp, $this->language, $this->userAgent, $optCustom, $this->url); goto J7wGg; o1L9_: J4dJe: goto fDEOC; dk0ha: if (!(!$this->ytdlpDisableCookie && !empty($this->cookies))) { goto XffXG; } goto v4E5T; ZxSfv: return $result; goto zB5BU; BYvwV: return $result; goto scEpC; qkqdf: $error = trim(stream_get_contents($pipes[2])); goto PUcFu; dgqxk: K0MyO: goto BYvwV; IO40F: zVemI: goto P5_yM; cjr39: fclose($pipes[2]); goto Jc5CG; jVrhH: $result = $this->outputParser($output); goto ukX37; zB5BU: ZcQLP: goto QBcjZ; Wzazq: $optCustom = implode("\40", $this->ytdlpOptions); goto IO40F; J7wGg: uHPzn: goto mtLbn; Jc5CG: proc_close($process); goto mP8b4; P5_yM: if (!empty($command)) { goto uHPzn; } goto aNhCv; n75qp: XffXG: goto Y7Jdy; igarO: if (is_resource($process)) { goto J4dJe; } goto EpORO; scEpC: } }
