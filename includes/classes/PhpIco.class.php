<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-18 20:27:37              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*
Copyright @ 2020 - 2025 GDPlayer v4.7.1. https://gdplayer.to | https://t.me/gdplayerto
*/
 namespace GDPlayer; class PhpIco { private $images = []; public function __construct(string $file, array $sizes = []) { goto lWio1; Z021M: foreach ($required_functions as $function) { if (!function_exists($function)) { $notAllowed = true; return; } kZzpW: } goto uLVZ_; VTLBI: lqwdj: goto kMxvZ; uLVZ_: r2B_a: goto DDGiw; HTh7d: $required_functions = ["\147\145\164\151\x6d\x61\147\x65\163\x69\172\145", "\x69\x6d\141\147\x65\143\162\x65\141\164\x65\146\x72\x6f\155\x73\x74\x72\x69\x6e\147", "\151\x6d\141\147\145\x63\x72\x65\141\x74\145\x74\162\x75\x65\x63\x6f\154\157\162", "\151\x6d\141\x67\145\x63\x6f\154\x6f\x72\164\x72\141\156\163\160\x61\x72\x65\x6e\164", "\151\x6d\x61\x67\x65\143\x6f\x6c\x6f\162\x61\x6c\x6c\157\x63\x61\164\145\141\154\x70\x68\x61", "\151\155\x61\x67\x65\x61\154\160\x68\x61\142\x6c\x65\156\144\151\156\147", "\x69\x6d\141\147\x65\x73\x61\x76\x65\x61\154\160\x68\x61", "\x69\x6d\x61\x67\x65\x73\170", "\151\x6d\x61\x67\145\x73\171", "\151\155\x61\147\x65\x63\x6f\x70\x79\162\x65\163\141\155\160\x6c\x65\x64"]; goto ApzSu; lWio1: session_write_close(); goto HTh7d; ApzSu: $notAllowed = false; goto Z021M; DDGiw: if (!(!$notAllowed && $file)) { goto lqwdj; } goto NS24e; NS24e: $this->addImage($file, $sizes); goto VTLBI; kMxvZ: } private function addImage($file, $sizes = array()) { goto bLmqS; rB3HJ: if (is_array($sizes[0])) { goto nxXW8; } goto XaI13; Z6XD6: return true; goto FpUTO; x3wab: $sizes = array(imagesx($im), imagesy($im)); goto D0Pic; AtGTU: lcBPW: goto Z6XD6; GdU1T: foreach ((array) $sizes as $size) { goto UyerR; ybM_o: $new_im = imagecreatetruecolor($width, $height); goto PIAXb; AfFZA: goto zhPmq; goto sHwWf; E5aRW: $source_width = imagesx($im); goto zg4cg; qUfR1: imagesavealpha($new_im, true); goto E5aRW; Op9N5: imagealphablending($new_im, false); goto qUfR1; Sv10U: $this->addImageData($new_im); goto lh5KH; zg4cg: $source_height = imagesy($im); goto UdYz4; lh5KH: zhPmq: goto ArVHf; PIAXb: imagecolortransparent($new_im, imagecolorallocatealpha($new_im, 0, 0, 0, 127)); goto Op9N5; sHwWf: LyQWd: goto Sv10U; UdYz4: if (!(false === imagecopyresampled($new_im, $im, 0, 0, 0, 0, $width, $height, $source_width, $source_height))) { goto LyQWd; } goto AfFZA; UyerR: list($width, $height) = $size; goto ybM_o; ArVHf: } goto AtGTU; ysJT_: return false; goto pNL5k; D0Pic: jXBq7: goto rB3HJ; Rx2lA: if (!empty($sizes)) { goto jXBq7; } goto x3wab; XaI13: $sizes = array($sizes); goto i7WU4; i7WU4: nxXW8: goto GdU1T; pNL5k: vGg4O: goto Rx2lA; hAqgx: if (!(false === ($im = $this->loadImageFile($file)))) { goto vGg4O; } goto ysJT_; bLmqS: session_write_close(); goto hAqgx; FpUTO: } public function saveIco($file) { goto J1CZi; ae9Zi: fclose($fh); goto lacbx; J1CZi: session_write_close(); goto g3Dw0; lacbx: return true; goto kLhBI; VkNSM: return false; goto yn1wS; yn1wS: jhnkl: goto ae9Zi; g3Dw0: if (!(false === ($data = $this->getIcoData()) || false === ($fh = fopen($file, "\x77")) || false === fwrite($fh, $data))) { goto jhnkl; } goto VkNSM; kLhBI: } private function getIcoData() { goto bgXL3; unLL0: if (!empty($this->images)) { goto Q3hSi; } goto PFwAF; Mk7Ox: unset($pixel_data); goto bBbmn; bgXL3: session_write_close(); goto unLL0; ZrwFn: $data = pack("\166\166\x76", 0, 1, count($this->images)); goto q1ROZ; cRdvW: $offset = 6 + $icon_dir_entry_size * count($this->images); goto QyFpk; bBbmn: return $data; goto qeVS7; EPkCA: $icon_dir_entry_size = 16; goto cRdvW; g__rF: $data .= $pixel_data; goto Mk7Ox; q1ROZ: $pixel_data = ''; goto EPkCA; jHvDS: haJnT: goto g__rF; PFwAF: return false; goto nAxRo; QyFpk: foreach ($this->images as $image) { goto B0Ep2; nz7MN: $offset += $image["\x73\151\x7a\x65"]; goto FWX2t; FWkYL: $pixel_data .= $image["\144\141\164\x61"]; goto nz7MN; B0Ep2: $data .= pack("\103\103\x43\x43\166\x76\126\x56", $image["\x77\x69\144\164\150"], $image["\150\x65\151\x67\x68\x74"], $image["\x63\157\154\157\x72\x5f\160\x61\154\x65\x74\164\x65\x5f\143\157\154\157\162\x73"], 0, 1, $image["\x62\x69\x74\x73\137\x70\145\162\x5f\160\x69\x78\x65\x6c"], $image["\x73\x69\172\145"], $offset); goto FWkYL; FWX2t: sHBhk: goto oCm97; oCm97: } goto jHvDS; nAxRo: Q3hSi: goto ZrwFn; qeVS7: } private function addImageData($im) { goto oObVL; cBk3R: R465s: goto PROyK; D3C3u: $current_opacity_val = 0; goto LFMOy; S2VaM: $alpha = (1 - $alpha / 127) * 255; goto DrSjQ; sSB1H: if (!($y >= 0)) { goto R465s; } goto v1Goc; Fl0Br: if (!($x < $width)) { goto tyjT5; } goto RwPOc; ZDYcU: foreach ($opacity_data as $opacity) { $data .= pack("\116", $opacity); ZWCoL: } goto zK3tq; xQ88c: $image = array("\x77\151\x64\164\x68" => $width, "\x68\145\x69\147\x68\164" => $height, "\143\157\154\157\162\137\160\141\x6c\145\x74\164\145\x5f\x63\x6f\x6c\x6f\x72\x73" => 0, "\142\x69\x74\163\137\x70\x65\x72\137\160\x69\x78\145\x6c" => 32, "\x73\x69\x7a\145" => $image_header_size + $color_mask_size + $opacity_mask_size, "\144\x61\164\141" => $data); goto NGWGB; byZPI: goto erOeM; goto pA9yS; MS_M2: if (!($x++ % 32 > 0)) { goto mkNF2; } goto myRuh; giOBU: $opacity_mask_size = ceil($width / 32) * 4 * $height; goto LS_ki; i20Bz: $opacity_data[] = $current_opacity_val; goto I5BC4; O2KP3: $pixel_data[] = $color; goto o5Pn1; hfCQu: $opacity_data = array(); goto KQTQE; Y4q1T: $pixel_data = array(); goto hfCQu; LS_ki: $data = pack("\x56\126\x56\x76\x76\126\126\x56\x56\x56\126", 40, $width, $height * 2, 1, 32, 0, 0, 0, 0, 0, 0); goto o9Wc8; afq0w: $x++; goto byZPI; myRuh: $current_opacity_val = $current_opacity_val << 1; goto ffPKV; pA9yS: tyjT5: goto qt57q; zcq81: $color |= 0xff000000 & $alpha << 24; goto O2KP3; KQTQE: $current_opacity_val = 0; goto EX72j; zj1lb: s8e1G: goto sSB1H; YyC1a: mkNF2: goto i20Bz; zK3tq: T6aOo: goto xQ88c; LFMOy: PgctV: goto FVTBQ; JCIZp: $color_mask_size = $width * $height * 4; goto giOBU; qYwr1: $width = imagesx($im); goto qvwY6; U1cOj: $current_opacity_val = $current_opacity_val << 1 | $opacity; goto t6FS6; ffPKV: goto RidMB; goto YyC1a; qvwY6: $height = imagesy($im); goto Y4q1T; o5Pn1: $opacity = intval($alpha <= 127); goto U1cOj; RwPOc: $color = imagecolorat($im, $x, $y); goto jqUml; FMVN1: $opacity_data[] = $current_opacity_val; goto D3C3u; oObVL: session_write_close(); goto qYwr1; v1Goc: $x = 0; goto tXf46; I5BC4: $current_opacity_val = 0; goto InW33; t6FS6: if (!(($x + 1) % 32 == 0)) { goto PgctV; } goto FMVN1; qt57q: if (!($x % 32 > 0)) { goto WE8tR; } goto Qp4Iw; C4E93: $color &= 0xffffff; goto zcq81; tXf46: erOeM: goto Fl0Br; InW33: WE8tR: goto p6RkI; yRUte: $y--; goto xE366; xE366: goto s8e1G; goto cBk3R; Qp4Iw: RidMB: goto MS_M2; o9Wc8: foreach ($pixel_data as $color) { $data .= pack("\x56", $color); r_QTV: } goto cFZOw; NGWGB: $this->images[] = $image; goto kmzV6; EX72j: $y = $height - 1; goto zj1lb; DrSjQ: $alpha = (int) round($alpha); goto C4E93; cFZOw: DHdUH: goto ZDYcU; PROyK: $image_header_size = 40; goto JCIZp; jqUml: $alpha = ($color & 0x7f000000) >> 24; goto S2VaM; FVTBQ: m5odf: goto afq0w; p6RkI: z91Bv: goto yRUte; kmzV6: } private function loadImageFile($file) { goto WLxEf; XQb2v: return $im; goto J4Tbk; ExPXG: if (!(false === getimagesize($file) || false === ($file_data = file_get_contents($file)) || false === ($im = imagecreatefromstring($file_data)))) { goto ruFRS; } goto Ldn0g; iSj_Q: ruFRS: goto c6KRb; Ldn0g: return false; goto iSj_Q; c6KRb: unset($file_data); goto XQb2v; WLxEf: session_write_close(); goto ExPXG; J4Tbk: } }
