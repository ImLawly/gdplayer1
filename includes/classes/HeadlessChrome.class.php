<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-18 20:27:34              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*
Copyright @ 2020 - 2025 GDPlayer v4.7.1. https://gdplayer.to | https://t.me/gdplayerto
*/
 namespace GDPlayer; use GDPlayer\InstanceCache; use HeadlessChromium\{BrowserFactory, Page}; use HeadlessChromium\Browser\ProcessAwareBrowser; use HeadlessChromium\Communication\Message; use Monolog\Logger; use Monolog\Handler\StreamHandler; use Wrench\Exception\FrameException; class HeadlessChrome { private $ajaxResults = []; private $browser = null; private $cookies = ''; private $debug = false; private $logFile = ''; private $logProcessFile = ''; private $referer = ''; private $requestType = ["\x6d\145\x64\x69\141", "\x78\150\x72", "\x6f\164\150\145\162"]; private $timeout = 30000; private $url = ''; private $userAgent = ''; private $userLanguage = ''; private $videoSources = ["\155\160\64", "\x6d\x6b\166", "\155\63\165\70", "\155\160\144"]; public function __construct() { goto vGaEU; vGaEU: session_write_close(); goto L7Bks; JdpI0: $this->userAgent = USER_AGENT; goto SwJdm; L7Bks: $this->userLanguage = ACCEPT_LANGUAGE; goto JdpI0; SwJdm: } public function setTimeout(int $timeout = 30000) { session_write_close(); $this->timeout = $timeout; } public function setUserAgent(string $userAgent = '') { session_write_close(); $this->userAgent = $userAgent; } public function setUserLanguage(string $userLanguage = '') { session_write_close(); $this->userLanguage = $userLanguage; } public function setReferer(string $url = '') { session_write_close(); $this->referer = $url; } public function setCookies(string $cookies = '') { session_write_close(); $this->cookies = $cookies; } private function createConfig(string $url = '', string $logName = '') { goto THYMa; i8Fip: $config["\144\145\142\165\x67\114\157\x67\147\145\x72"] = $log; goto JDh54; THYMa: session_write_close(); goto x86bG; zP8Px: g3qyH: goto MD7N1; we0pz: dEBCP: goto pPv26; J1XP4: if (empty($this->cookies)) { goto dEBCP; } goto yDK1h; pPv26: if (!$this->debug) { goto pB5rl; } goto Ho6fQ; x86bG: if (!empty($this->referer)) { goto g3qyH; } goto Eq1zb; yDK1h: $config["\150\x65\x61\144\x65\162\x73"]["\103\x6f\x6f\x6b\151\145"] = $this->cookies; goto we0pz; JDh54: pB5rl: goto w5L20; p1iio: $log->pushHandler(new StreamHandler($this->logProcessFile, Logger::DEBUG)); goto i8Fip; Eq1zb: $this->referer = $url; goto zP8Px; MD7N1: $config = array("\x75\163\x65\x72\101\147\x65\156\x74" => $this->userAgent, "\150\x65\x61\144\x65\162\163" => array("\x41\143\143\x65\x70\164\x2d\114\141\x6e\147\x75\141\147\x65" => $this->userLanguage, "\103\141\143\150\x65\55\x43\157\156\164\x72\x6f\154" => "\156\x6f\55\143\141\x63\x68\x65", "\x50\162\141\147\155\x61" => "\156\x6f\x2d\143\x61\143\150\145", "\x52\x65\146\x65\x72\x65\162" => $this->referer, "\125\x73\145\162\x2d\101\x67\x65\156\x74" => $this->userAgent), "\x63\x75\x73\x74\x6f\x6d\x46\x6c\141\x67\163" => ["\55\x2d\144\151\x73\x61\142\154\x65\55\144\145\x76\x2d\x73\x68\x6d\55\165\x73\x61\147\x65", "\x2d\x2d\144\151\x73\x61\142\154\x65\x2d\147\x70\165", "\x2d\x2d\x64\151\x73\x61\142\x6c\145\x2d\143\162\x61\x73\150\x2d\162\145\160\157\162\164\x65\x72"], "\x6e\157\120\x72\157\170\171\123\145\162\166\145\162" => true, "\x6e\x6f\123\x61\156\x64\x62\x6f\170" => true, "\150\145\x61\144\154\145\x73\x73" => true, "\151\147\156\157\x72\x65\103\145\x72\164\x69\x66\x69\x63\x61\x74\145\x45\x72\x72\x6f\162\163" => true, "\x65\156\141\142\x6c\x65\x49\x6d\x61\x67\x65\x73" => false, "\165\163\x65\162\103\x72\141\x73\x68\x44\x75\x6d\x70\163\104\151\x72" => normalizeSeparator(TMP_PATH)); goto J1XP4; Ho6fQ: $log = new Logger($logName); goto p1iio; w5L20: return $config; goto EMq47; EMq47: } private function saveLogFile(string $content = '') { goto s6YQn; kjXC8: return $this->logFile; goto POdXJ; s6YQn: session_write_close(); goto OSfI2; mjYX1: $saved = createFile($this->logFile, $content); goto PZ1j1; KkICI: return false; goto vZ8wQ; zD9Oq: return false; goto t3p7Y; RP00T: wc0r3: goto Dc_5b; sd9OW: @unlink($this->logProcessFile); goto kjXC8; LMTZT: rXbYm: goto HDti6; PZ1j1: goto wc0r3; goto LMTZT; cDpea: $created = createFile($this->logProcessFile, $content); goto szgpi; Dc_5b: if (!$saved) { goto y9ZG2; } goto sd9OW; HDti6: $saved = @copy($this->logProcessFile, $this->logFile); goto RP00T; szgpi: if ($created && file_exists($this->logProcessFile) && file_exists($this->logFile)) { goto rXbYm; } goto mjYX1; OSfI2: if (!empty($content)) { goto cYrQJ; } goto KkICI; POdXJ: y9ZG2: goto zD9Oq; vZ8wQ: cYrQJ: goto cDpea; t3p7Y: } public function getInstance() { goto sL5iU; h6yvd: switch (PHP_OS_FAMILY) { case "\x44\141\x72\167\x69\156": $instance = "\57\101\160\160\x6c\151\x63\141\164\151\x6f\x6e\x73\57\x47\x6f\x6f\147\x6c\x65\x20\x43\150\162\157\155\145\x2e\141\160\x70\x2f\x43\x6f\156\164\x65\156\x74\x73\x2f\115\141\143\117\x53\x2f\x47\x6f\157\147\x6c\145\40\x43\150\162\x6f\155\x65"; goto OaBv1; case "\x57\x69\x6e\144\157\x77\x73": goto HtoQy; f7msv: goto OaBv1; goto vNIVJ; UEYP1: $instance = $matches[0]; goto nhdQQ; nMhPD: $chrome = shell_exec("\162\145\147\40\x71\165\x65\162\x79\x20\x22" . $reg . "\134\143\x68\x72\x6f\155\145\x2e\145\170\x65\x22\x20\57\166\145"); goto had43; IWfBW: $edge = shell_exec("\162\145\147\40\161\165\x65\162\x79\40\x22" . $reg . "\x5c\155\x73\145\x64\147\x65\56\145\170\145\x22\40\57\166\x65"); goto nMhPD; W4IDn: preg_match("\x2f\x2e\x3a\x28\x3f\41\x2e\52\72\x29\56\52\x2f", $registryKey, $matches); goto UEYP1; HtoQy: $reg = "\110\x4b\105\131\137\x4c\117\x43\101\x4c\x5f\115\x41\x43\x48\x49\x4e\x45\134\x53\x4f\106\124\127\101\x52\x45\134\x4d\x69\143\x72\157\x73\157\x66\x74\134\x57\x69\x6e\x64\x6f\x77\163\x5c\x43\165\x72\x72\145\156\x74\x56\145\162\163\x69\157\156\134\101\x70\x70\x20\120\141\164\x68\163"; goto IWfBW; zzyqN: if (!$registryKey) { goto MGRTe; } goto W4IDn; had43: $registryKey = $chrome ?? $edge; goto zzyqN; nhdQQ: MGRTe: goto f7msv; vNIVJ: default: goto G2L_L; G2L_L: $instances = ["\143\x68\162\157\x6d\151\165\155\x2d\142\162\157\167\x73\145\162", "\147\x6f\x6f\147\154\145\55\143\x68\x72\x6f\x6d\145", "\x6d\151\143\x72\x6f\x73\x6f\x66\164\55\x65\x64\147\x65"]; goto FttkV; FttkV: foreach ($instances as $iname) { goto hlJj7; hlJj7: if (!shell_exec("\x63\157\155\x6d\x61\x6e\x64\x20\x2d\166\x20" . $iname)) { goto V7SfU; } goto Mr7nz; evCYo: V7SfU: goto fJluH; Mr7nz: $instance = $iname; goto qmybo; qmybo: goto HtvQp; goto evCYo; fJluH: njTw0: goto C6LP1; C6LP1: } goto WbOkV; WbOkV: HtvQp: goto jla5A; jla5A: goto OaBv1; goto uYMyv; uYMyv: } goto Lm3du; lDgdg: $instance = null; goto vm0jJ; wRNP5: return $instance; goto hKvWZ; sL5iU: session_write_close(); goto lDgdg; Lm3du: HNsq_: goto mn_D_; mn_D_: OaBv1: goto wRNP5; vm0jJ: if (!function_exists("\163\150\x65\154\154\137\x65\170\145\x63")) { return $instance; } goto h6yvd; hKvWZ: } public function exec(string $url = '', string $logName = '', bool $debug = false, string $jsContent = '', string $evaluation = '') { goto jfGU5; izEgb: $now = time(); goto mlb05; Hzo2A: $content = ''; goto pT2MK; djvyh: AVXMb: goto lFJCe; Tv5Nv: if ($now - $logFilemtime < 600) { goto v1BHn; } goto yrZij; UuUyS: $arr = []; goto Hzo2A; Iwr4j: $logName = keyFilter($logName); goto RS8Dw; jfGU5: session_write_close(); goto yS0UK; J1G1m: goto DGnOl; goto QB2G3; yS0UK: $this->url = $url; goto n1dY6; lFJCe: return $this->exec($this->url, $logName . "\176" . randomString(), $debug); goto DEFZk; gqTwm: $this->logProcessFile = BASE_DIR . "\x63\141\x63\150\x65\x2f\x6c\157\147\163\x2f\x70\x72\x6f\143\145\x73\163\57" . $logName . "\56\x6c\157\147"; goto uBZSM; mlb05: $this->logFile = BASE_DIR . "\143\x61\x63\150\145\x2f\154\x6f\x67\163\x2f" . $logName . "\x2e\x6c\x6f\x67"; goto gqTwm; raMEq: return $this->logFile; goto e33rm; uBZSM: $logFilemtime = @filemtime($this->logFile) ?: 0; goto Tv5Nv; DEFZk: DGnOl: goto UuUyS; RS8Dw: $logName = substr($logName, 0, 240); goto izEgb; qrHmI: try { goto mXZKz; A129a: if ($this->debug) { goto nTEJg; } goto GMIOM; p7ZVL: $page = $this->browser->createPage(); goto UHFfl; QBv6i: if (!(!empty($jsContent) && !empty($evaluation))) { goto N6Bw4; } goto IaiAW; GMIOM: $page->navigate($this->url)->waitForNavigation(Page::DOM_CONTENT_LOADED, $this->timeout); goto AZdFG; mXZKz: $browserFactory = new BrowserFactory($this->getInstance()); goto d6YsY; t7VwU: $arr["\141\x6a\x61\x78\x52\145\x71\x75\x65\x73\x74\x73"] = $this->ajaxResults; goto c7L6S; F9_io: s7T1f: goto QBv6i; c7L6S: $content .= json_encode($arr, JSON_UNESCAPED_SLASHES); goto o17kT; GvX7e: $func = $page->evaluate($evaluation); goto WE84N; MKFuJ: $arr["\150\164\155\154"] = $page->getHtml($this->timeout); goto t7VwU; ND3l4: $page->getSession()->sendMessage(new Message("\x4e\145\x74\167\157\162\x6b\56\x65\156\x61\142\x6c\145")); goto z3yOp; IaiAW: $page->addScriptTag(["\x63\157\x6e\x74\145\x6e\x74" => $jsContent])->waitForResponse($this->timeout); goto GvX7e; UHFfl: $page->getSession()->sendMessage(new Message("\114\157\x67\56\145\x6e\x61\142\154\145")); goto ANFaX; AZdFG: goto s7T1f; goto J8QGU; nqOu3: $page->navigate($this->url)->waitForNavigation(Page::LOAD, $this->timeout); goto F9_io; o17kT: $this->browser->close(); goto EJNcA; z3yOp: $page->setExtraHTTPHeaders($config["\x68\145\x61\144\145\162\163"]); goto A129a; iPUAl: N6Bw4: goto MKFuJ; d6YsY: $this->browser = $browserFactory->createBrowser($config); goto p7ZVL; PfkzU: $page->getSession()->on("\x6d\x65\x74\x68\157\144\72\x4e\145\x74\x77\157\162\153\x2e\x72\145\161\x75\x65\163\x74\127\x69\154\154\x42\145\123\145\156\164", function ($data) use($logName) : void { goto oqjXr; oqjXr: session_write_close(); goto naerD; J5e7B: $this->ajaxResults[] = ["\165\x72\154" => $data["\162\x65\161\x75\x65\x73\164"]["\165\x72\x6c"], "\164\171\x70\x65" => $data["\x74\x79\160\145"]]; goto FqwdE; sxkUo: if (!(in_array($ext, $this->videoSources) || in_array(strtolower($data["\x74\171\160\145"]), $this->requestType))) { goto xIx9S; } goto J5e7B; FqwdE: InstanceCache::setItem("\150\145\x61\x64\x6c\x65\x73\163\x2d\x61\152\x61\x78\x5f" . $logName, $this->ajaxResults); goto BD2gf; naerD: $ext = strtolower(pathinfo(parse_url($data["\162\145\161\x75\145\163\164"]["\165\x72\x6c"], PHP_URL_PATH), PATHINFO_EXTENSION)); goto sxkUo; BD2gf: xIx9S: goto LStw1; LStw1: }); goto nqOu3; ANFaX: $page->getSession()->sendMessage(new Message("\x52\165\156\x74\x69\155\x65\56\x65\x6e\141\142\154\x65")); goto ND3l4; J8QGU: nTEJg: goto PfkzU; WE84N: $arr["\x65\166\141\154\165\x61\164\151\157\x6e\x52\x65\x73\x75\154\x74"] = $func->getReturnValue(); goto iPUAl; EJNcA: } catch (FrameException|\Exception $e) { createErrorLog([__FILE__, __FUNCTION__, $logName, $e->getMessage()]); $this->browser->close(); } goto PvVVs; n1dY6: $this->debug = $debug; goto Iwr4j; e33rm: goto DGnOl; goto djvyh; pT2MK: $config = $this->createConfig($this->url, $logName); goto qrHmI; yrZij: if (file_exists($this->logProcessFile) && !is_executable($this->logProcessFile)) { goto AVXMb; } goto J1G1m; PvVVs: return $this->saveLogFile($content); goto gvb04; QB2G3: v1BHn: goto raMEq; gvb04: } }
