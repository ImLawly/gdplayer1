<?php
/*   __________________________________________________
    |  Obfuscated by YAK Pro - Php Obfuscator  2.0.16  |
    |              on 2025-05-18 20:27:33              |
    |    GitHub: https://github.com/pk-fr/yakpro-po    |
    |__________________________________________________|
*/
/*
Copyright @ 2020 - 2025 GDPlayer v4.7.1. https://gdplayer.to | https://t.me/gdplayerto
*/
 namespace GDPlayer; use GDPlayer\{Config, ParseSources, Security}; use GDPlayer\Model\User; class API { private static function sendError(string $message = '') { goto t9phx; pTZf4: exit; goto tHfGC; t9phx: session_write_close(); goto jf7AS; jf7AS: echo json_encode(["\x73\x74\x61\x74\x75\x73" => "\146\141\151\154", "\155\x65\163\x73\141\x67\x65" => $message]); goto pTZf4; tHfGC: } private static function authorize(string $token = '') { goto WasdC; uCO8P: VGXyz: goto YMjZV; RgzVa: if (empty($token)) { goto BnzPI; } goto KPh3A; iTKGg: if (empty($_SERVER["\110\x54\124\x50\x5f\101\125\124\110\x4f\x52\111\x5a\x41\124\111\117\116"])) { goto VGXyz; } goto ReufW; WasdC: session_write_close(); goto RgzVa; vqq6m: $user = User::getInstance(); goto Upl12; YMjZV: return false; goto qwMr3; TzuC2: BnzPI: goto iTKGg; KPh3A: return corsPolicyValidation($token); goto TzuC2; Upl12: $user->setMultiCriteria([["\x75\x73\145\162", $username, "\x3d"], ["\163\x74\141\x74\x75\163", 1, "\75", "\101\x4e\104"], ["\x72\x6f\154\145", 0, "\75", "\x41\x4e\104"]]); goto ZCJ15; ZCJ15: $usrData = $user->getOne(["\x70\x61\163\x73\x77\x6f\162\144"]); goto kHCJO; kHCJO: return !empty($usrData["\160\x61\163\x73\x77\x6f\162\144"]) && password_verify($password, $usrData["\160\x61\x73\163\x77\x6f\162\144"]); goto uCO8P; ReufW: list($username, $password) = array_pad(explode("\72", base64_decode(substr($_SERVER["\110\x54\124\120\x5f\x41\x55\124\x48\117\122\x49\132\101\x54\x49\x4f\116"], 6))), 2, ''); goto vqq6m; qwMr3: } private static function getInputQuery() { goto v2Q2Z; PhWJl: $decrypt2 = $security->decryptURL($tokenEncrypted); goto yvBCM; F0ncg: $ex = explode("\46\137", $_SERVER["\121\x55\x45\122\x59\137\x53\124\122\x49\116\x47"]); goto jzbst; ZjnRM: $decrypt = decode($tokenEncrypted); goto OYukk; BVOz6: $qry = []; goto KaeDP; Lad4W: list($tokenEncrypted, $securityKey) = array_pad(explode("\x2d\54", $inputData), 2, ''); goto Qrv7L; v2Q2Z: session_write_close(); goto BVOz6; Ube73: sWDwW: goto Lad4W; DF2sD: R1Vx2: goto P8oGo; yvBCM: parse_str($decrypt2, $qry); goto DF2sD; hRNm4: goto R1Vx2; goto uxcHw; Qrv7L: if (!empty($securityKey) && $security->validateApiSalt($securityKey)) { goto ZGS4S; } goto ZjnRM; uxcHw: ZGS4S: goto PhWJl; KaeDP: $security = new Security(); goto mZX5E; opLno: if (!(empty($inputData) && !empty($_SERVER["\x51\125\x45\x52\131\x5f\x53\124\122\x49\x4e\107"]))) { goto sWDwW; } goto F0ncg; jzbst: $inputData = $ex[0]; goto Ube73; OYukk: parse_str($decrypt, $qry); goto hRNm4; P8oGo: return $qry; goto C5sVp; mZX5E: $inputData = file_get_contents("\x70\150\x70\72\57\57\151\x6e\x70\x75\164") ?: ''; goto opLno; C5sVp: } private static function parseDownloadResult(array $result = [], array $config = []) { goto EEVGf; EEVGf: session_write_close(); goto fA2Za; suHGB: if ($config["\144\x69\163\x61\x62\x6c\x65\x5f\163\150\x6f\x72\x74\145\x6e\145\162\x5f\x6c\x69\156\153"]) { goto KeRxE; } goto R6dO6; T8z9m: return $result; goto DILn5; R6dO6: foreach ($result["\163\157\x75\x72\x63\x65\x73"] as $i => $dt) { $result["\x73\x6f\x75\x72\x63\x65\x73"][$i]["\x66\x69\x6c\145"] = downloadLink($dt["\146\x69\x6c\x65"]); xtKuC: } goto FuCtx; AZt9M: y9NMN: goto cK25T; IKPaa: if ($config["\163\150\157\x77\137\x73\x75\x62\137\x64\157\167\156\x6c\x6f\x61\144"]) { goto nHB1i; } goto Fvb1m; UCreG: KeRxE: goto T8z9m; fA2Za: if (empty($result["\164\151\164\x6c\x65"])) { goto LKv9b; } goto TZ1EB; Fvb1m: $result["\x74\162\141\x63\153\163"] = []; goto r3ZVD; eZQjB: $ext = pathinfo($result["\x74\151\164\x6c\x65"], PATHINFO_EXTENSION); goto cNyyi; TZ1EB: $fname = pathinfo($result["\x74\x69\x74\x6c\x65"], PATHINFO_FILENAME); goto eZQjB; FVtlu: $ext = "\x6d\160\64"; goto OZr1a; OZr1a: U7XXU: goto VCldM; FuCtx: cZcwH: goto UCreG; r3ZVD: nHB1i: goto suHGB; cK25T: LKv9b: goto IKPaa; cNyyi: if (!empty($ext)) { goto U7XXU; } goto FVtlu; VCldM: foreach ($result["\x73\x6f\x75\x72\143\145\163"] as $i => $dt) { goto PC4uz; bumwo: ndyDg: goto BAFLj; PC4uz: list($url, $qry) = array_pad(explode("\77", $dt["\146\x69\x6c\145"]), 2, ''); goto BL_0t; BL_0t: $result["\163\157\x75\x72\x63\145\163"][$i]["\146\151\x6c\x65"] = sprintf("\45\163\57\45\x73\55\x25\163\x2e\45\x73\x3f\x25\163", rtrim($url, SLASH), $fname, $dt["\154\x61\142\145\154"], $ext, $qry); goto bumwo; BAFLj: } goto AZt9M; DILn5: } public static function response() { goto YlsdY; DTIYJ: Nfnir: goto CxMnU; rwv2m: if (empty($result["\x73\x6f\x75\x72\x63\145\x73"])) { goto JmymB; } goto fWGwl; YsNch: $isDownloadable = validateBoolean($qry["\x64\157\167\156\x6c\157\x61\144"] ?? 0); goto F2GKk; VqhQA: $videoTypes = ["\150\x6c\x73", "\155\160\x64", "\x76\x69\x64\x65\x6f\57\x6d\160\x34"]; goto LZ5Hi; F_VKi: $result = self::parseDownloadResult($result, $config); goto K5vbK; IHrOP: echo json_encode($result, JSON_UNESCAPED_SLASHES); goto zePIg; Foyla: if (self::authorize($qry["\x74\157\x6b\145\156"] ?? '')) { goto xnHUw; } goto VSpgl; bsQfa: O2d3h: goto nqhax; YlsdY: session_write_close(); goto eC2kv; wtz_W: goto Nfnir; goto qvruP; he396: self::sendError("\x44\x6f\167\x6e\x6c\157\x61\144\x20\x66\145\x61\x74\165\162\145\x20\151\x73\40\x64\x69\163\141\x62\154\145\x64"); goto wtz_W; I7Lwf: goto O2d3h; goto XbPiP; VZjpD: OVkOC: goto rTGpA; Xz282: goto O2d3h; goto H4Cb0; LQ3_5: createResponseHeaders(corsResponseHeaders()); goto IHrOP; eC2kv: $config = Config::getMulti(["\142\154\157\143\x6b\x5f\166\x70\x6e", "\x64\x69\163\x61\x62\154\x65\137\x73\x68\x6f\162\164\145\156\145\162\137\x6c\151\x6e\x6b", "\145\x6e\141\142\x6c\x65\137\x64\157\x77\156\x6c\157\x61\144\137\160\141\147\145", "\x73\150\x6f\x77\x5f\x73\165\x62\x5f\144\x6f\167\x6e\154\x6f\141\x64", "\165\x70\x64\141\x74\x65\144"]); goto Jllk_; H4Cb0: C6te9: goto cy1X6; CxMnU: if (!$isDownloadable) { goto qJRT0; } goto F_VKi; nqhax: $qry = self::getInputQuery(); goto Foyla; qvruP: JmymB: goto jqRwO; x3aAg: if (isTitleBlacklisted($title)) { goto OVkOC; } goto Uwnuz; XbPiP: pwJbq: goto sLeCP; LZ5Hi: $result["\x73\157\165\162\143\x65\163"] = array_map(function ($dt) use($videoTypes) { $type = in_array($dt["\164\x79\x70\x65"], $videoTypes) ? $dt["\164\x79\160\x65"] : "\166\151\x64\145\157\57\x6d\160\x34"; return ["\146\151\x6c\145" => $dt["\146\x69\x6c\x65"], "\154\x61\142\x65\154" => $dt["\154\141\142\145\154"], "\164\171\160\145" => $type]; }, $result["\163\157\x75\x72\x63\145\x73"]); goto Au8k6; Au8k6: header("\x43\157\x6e\x74\x65\156\x74\55\x54\x79\160\x65\72\40\x61\x70\x70\154\151\x63\141\164\151\x6f\156\x2f\152\163\x6f\x6e\73\x20\x63\150\x61\x72\163\145\164\75\165\x74\x66\x2d\x38"); goto LQ3_5; VSpgl: self::sendError("\101\x63\143\145\163\x73\40\104\x65\x6e\x69\x65\x64"); goto omV30; jqRwO: self::sendError("\x4e\157\164\40\x46\157\165\x6e\x64"); goto DTIYJ; rTGpA: self::sendError("\x44\115\x43\x41\x20\124\x61\153\145\144\157\x77\156"); goto Me2HY; cy1X6: self::sendError("\x59\157\x75\40\x63\141\156\156\157\x74\40\141\x63\143\145\x73\163\40\x74\x68\x65\x20\166\x69\x64\x65\x6f\x20\165\163\x69\x6e\x67\40\141\40\160\x72\x6f\170\171\x2f\126\120\116\x2e"); goto bsQfa; Jllk_: if ($config["\x75\x70\x64\141\164\x65\144"] < DB_VERSION) { goto pwJbq; } goto gd1Dc; EQfgc: Gjzwc: goto he396; K5vbK: qJRT0: goto VqhQA; fWGwl: goto Nfnir; goto VZjpD; F2GKk: $result = (new ParseSources($qry))->getResult(); goto QWp75; Uwnuz: if ($isDownloadable && !$config["\x65\x6e\x61\142\x6c\x65\137\144\157\167\156\154\x6f\x61\x64\137\x70\141\x67\145"]) { goto Gjzwc; } goto rwv2m; QWp75: $title = $result["\164\x69\x74\x6c\145"] ?? ''; goto x3aAg; omV30: xnHUw: goto YsNch; sLeCP: self::sendError("\x55\x6e\x64\x65\162\40\x4d\x61\x69\x6e\164\x65\x6e\141\x6e\x63\x65"); goto Xz282; gd1Dc: if ($config["\142\154\x6f\143\153\x5f\166\x70\x6e"] && isUsingProxyOrServer()) { goto C6te9; } goto I7Lwf; Me2HY: goto Nfnir; goto EQfgc; zePIg: } }
